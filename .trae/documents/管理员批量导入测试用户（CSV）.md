## 目标
- 在“添加新用户”页支持 CSV 批量导入账号。提供模板下载、文件导入预览（每页 20 行分页）、逐条插入与成败统计。
- 按你的要求：不包含“头像”和“聊天额度”字段。

## 页面改动
1. 在 `src/admin/users/UserCreateView.jsx` 顶部按钮区新增“批量导入”按钮。
2. 点击后打开全屏 Overlay，包含：
   - 模板下载按钮（生成 CSV 模板文件）
   - 文件选择控件（只接受 `.csv`）
   - 预览区域（表格 + 分页 + 校验提示 + 总数统计）
   - 操作区：开始导入 / 取消 / 导入进度与结果摘要

## CSV 模板（中文列名 + 示例）
- 列（按顺序显示第一行，中文列名）：
  - 用户名（必填）
  - 昵称
  - 邮箱
  - 密码（必填）
  - 登录后禁用时间(分钟)（默认 60，按分钟填写；0 表示不限制）
- 示例首行内容：
  ```csv
  用户名,昵称,邮箱,密码,登录后禁用时间(分钟)
  test_user,测试,example@test.com,Pass@123,60
  ```
- 通过 Blob 生成并触发浏览器下载；无需后端支持。

## CSV 解析
1. 使用浏览器 `FileReader` 读取文本。
2. 自实现轻量 CSV 解析函数（支持引号、逗号、换行；不引入第三方库），输出为数组行。
3. 列名映射（严格按中文列名）：
   - 用户名 → `username`
   - 昵称 → `nickname`
   - 邮箱 → `email`
   - 密码 → `password`
   - 登录后禁用时间(分钟) → `expireAfterMinutes`（转 number，空置为 60）
4. 校验规则：
   - `username` 与 `password` 必填
   - `expireAfterMinutes` 必须为非负整数；空值按默认 60
   - 邮箱为可选；宽松校验，非法时给出警示但允许继续
5. 为每行生成校验状态，预览表格中进行高亮与提示。

## 预览与分页
- 表格每页 20 行；顶部/底部提供上一页 / 下一页控制，显示当前页与总页数。
- 列顺序与模板一致；增加“校验状态/错误信息”列。
- 显示总待导入数、已校验错误数。

## 导入执行
1. 点击“开始导入”：
   - 仅导入校验通过的行；错误行保留在预览中并提示
   - 导入过程禁用控件；显示总体进度（成功/失败计数）
2. 逐条调用后端创建接口：
   - 使用现有路由 `POST /admin/users`
   - 参数：`{ username, nickname, email, password, expireAfterMinutes }`
3. 并发策略：安全起见串行或小并发（例如 3 并发）；每条更新其状态为“成功/失败”。
4. 完成后比较成功总数与导入总数：
   - 全部成功 → 弹出“导入成功，共 X 条”
   - 部分失败 → 显示“成功 Y 条，失败 Z 条”，失败原因以行内提示保留

## 交互与提示
- 模板下载：明确“默认 60 分钟，数字按分钟填写；0 表示不限制”。
- 文件选择后：显示解析结果、统计与校验错误提示。
- 导入失败常见原因：用户名冲突、密码缺失、服务端错误；在失败行显示后端返回的错误信息。

## 实现细节（前端）
- 新增局部状态：
  - `isImportOpen`：Overlay 开关
  - `csvRows`：解析后的行（含原值、映射值、校验状态、错误信息）
  - `pageIndex`：当前页
  - `importing`、`successCount`、`failCount`
- 新增方法：
  - `downloadTemplate()`：生成模板并下载
  - `parseCsv(text)`：解析 CSV 文本 → 行对象数组
  - `validateRow(row)`：返回错误列表/OK 标记
  - `startImport()`：并发提交；更新行状态与计数；结束时弹结果
- 优先复用现有 `onSave(newUser)` 以保持组件职责一致；如父组件提供的 `onSave` 即调用后台创建接口。

## 后端兼容
- 路由 `POST /admin/users` 已支持 `expireAfterMinutes`；无需新增接口。
- 登录成功处已调用 `markFirstLogin(userId)`，与自动禁用逻辑协同。

## 测试计划
1. 下载模板 → 手工填入 5 条（含 1 条用户名重复、1 条缺少密码、1 条非法邮箱）→ 预览校验
2. 导入 → 确认成功/失败计数正确，失败行显示原因
3. 导入完成后刷新用户列表 → 确认成功条目出现且字段值正确
4. 设置 `expireAfterMinutes=1` 测试：登录后 1 分钟自动禁用，验证 `is_active=0`
