## 后端改动
- 在 `client-services/chatSessions.js`：
  - 创建会话时查询 `models` 表，获取当前默认模型：`model_id` 与 `model_nickname`。
  - 会话 Redis 字段新增：`model_id`, `model_nickname`, `temperature`（沿用已存在的 `model`/`temperature` 可向后兼容），用户没有设置模型则使用创建session从数据库获取的默认模型。
- 在 `client-routes/chat.js`：
  - POST `/api/chat/sessions` 返回 `{ sessionId, model: { id, nickname }, temperature }`（仅配置，不含提示词）。
  - GET `/api/chat/sessions/:id` 返回当前会话配置 `{ sid, model: { id, nickname }, temperature }`。
  - 新增 GET `/api/chat/models`：返回可选模型列表（`[{ id, name, nickname }]`）。
  - 新增 PUT `/api/chat/sessions/:id/config`：更新会话的 `model_id` 与 `temperature`，校验 ID 合法性后写入 Redis。
- 日志：沿用 `req.log`，记录选择/更新操作与 `userId`。

## 前端改动
- 新增 `ModelSelectorSheet.tsx`：
  - 参照 `UserRoleSelectorSheet` 的底部弹出风格与动效。
  - 打开时 `GET /api/chat/models` 拉取列表，展示 `model_nickname`（若有昵称优先昵称）。
  - 选择后调用 `PUT /api/chat/sessions/:id/config` 更新会话配置，并关闭弹窗。
- `ChatDetail.tsx`：
  - 设置页新增“模型”项，图标使用 `Cpu`（`lucide-react`），视觉与“我的角色设置”一致。
  - 首次进入会话：
    - `createChatSession` 接收 `{ sessionId, model, temperature }`，本地固化到 `localStorage`：`chat_model_{characterId}`, `chat_temp_{characterId}`。
    - 若本地已有固化且与会话默认不同，调用 `PUT /api/chat/sessions/:id/config` 同步到服务器。
  - 打开“模型”项：弹出 `ModelSelectorSheet`，选择后更新本地与会话。
- `chatService.ts`：
  - `createChatSession` 返回值兼容新结构（从仅 `sessionId` 改为对象），对旧结构做容错。
  - 新增 `listModels()`、`updateSessionConfig(sessionId,{modelId,temperature})`。

## 本地固化与行为
- 每角色会话使用键：
  - `chat_session_{characterId}`（已存在）
  - `chat_model_{characterId}`、`chat_temp_{characterId}`（新增）
- 仅当用户主动选择或本地已有固化时才更新会话配置；否则沿用服务器默认。

## UI 交互与一致性
- 底部弹出层、阴影、圆角、动效统一使用 `androidBottomSheet` 与 `fade`。
- 列表项选中态与“我的角色设置”一致（左侧圆头像/图标、右侧勾选）。
- 温度在选择框顶部提供简洁输入/滑条；提交一起更新。

## 兼容与安全
- 不返回或记录任何提示词内容；仅返回模型标识与温度。
- 前端对旧接口仅 `sessionId` 的情况进行降级处理。

## 验证
- 创建会话后，设置页显示默认模型与温度；刷新后保留。
- 切换模型/温度后，消息生成使用新配置（服务端 Redis 更新成功、日志含 `userId`）。