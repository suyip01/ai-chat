## 概览
- 目标：故事列表在首页支持分页（limit=10，按第7/17/…触发下一页），并为故事卡片图片启用 IntersectionObserver 懒加载（底部提前两卡片预取）。
- 复用：与角色分页逻辑一致，尽量抽象成通用组件/Hook，减少重复代码。

## 后端改动（stories.js）
- 接收 `offset` 参数，按 `limit/offset` 返回已发布故事：
  1. 解析 `offset = parseInt(req.query.offset || '0')`
  2. 保留现有 `listStories()` 后过滤已发布 `published` 列表
  3. 使用 `out = published.slice(offset, offset + limit)`
  4. 日志记录 `{ limit, offset, count: out.length }`
- 可选增强：若有数据库层接口，后续迁移到 SQL `LIMIT/OFFSET`，减少内存切片。

## 前端改动（App.tsx）
- 状态：新增 `storyOffset`、`hasMoreStories`、`isLoadingMoreStories`。
- 初次加载：`listStoriesClient({ limit: 10, offset: 0 })` 并设置偏移量与是否还有更多。
- 观察器：
  1. 使用同一 `scrollRootRef` 作为 `root`
  2. 将哨兵 `ref` 绑定到故事列表倒数第 3 项（对应第7、17…触发）
  3. `IntersectionObserver` 触发后请求 `listStoriesClient({ limit: 10, offset: storyOffset })`，追加到列表，并更新偏移与`hasMoreStories`
- 图片懒加载：
  1. 抽取 `LazyImage` 通用组件：`root`, `src`, `alt`, `className`, `placeholderChar`，内部设置 `rootMargin: '0 0 240px 0'` 预取两个卡片
  2. 将当前 `CharacterThumb` 迁移为使用 `LazyImage`（减少重复代码）
  3. 故事卡片图也用 `LazyImage`，传入 `scrollRootRef.current` 作为 `root`

## 复用与抽象
- 新增 `components/LazyImage.tsx`：供角色头像与故事封面通用
- 可选：新增 `hooks/useInfinitePager.ts`：参数为 `rootRef`、`items`、`sentinelOffset=3`、`fetchNext`，返回 `bindSentinelRef`；角色与故事使用同一 Hook

## 验证
- 后端：`GET /stories?limit=10&offset=10` 返回已发布列表第 11–20 条；日志含 `offset`
- 前端：
  - 初次显示 10 条故事，滚到第 7 条时加载第 11–20 条；滚到第 17 条时加载 21–30 条
  - 图片仅在进入视口或预取范围时加载；占位字符显示在未加载前

## 变更范围
- server/src/client-routes/stories.js（分页支持）
- src/user/App.tsx（故事分页状态与 IO 观察器）
- src/user/components/LazyImage.tsx（新增通用图片懒加载组件）
- 将角色头像与故事封面统一用 `LazyImage`（减少重复）

## 说明
- 保持与角色分页/懒加载一致的触发与预取策略，避免重复逻辑，便于后续维护。