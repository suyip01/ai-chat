{"version":3,"file":"CharacterManagement-5X-DgjnY.js","sources":["../../node_modules/lucide-react/dist/esm/icons/refresh-cw.js","../../node_modules/lucide-react/dist/esm/icons/wand-sparkles.js","../../admin/components/AvatarEditor.jsx","../../admin/characters/CharacterCreateView.jsx","../../admin/characters/CharacterManagement.jsx"],"sourcesContent":["/**\n * @license lucide-react v0.555.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8\", key: \"v9h5vc\" }],\n  [\"path\", { d: \"M21 3v5h-5\", key: \"1q7to0\" }],\n  [\"path\", { d: \"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16\", key: \"3uifl3\" }],\n  [\"path\", { d: \"M8 16H3v5\", key: \"1cv678\" }]\n];\nconst RefreshCw = createLucideIcon(\"refresh-cw\", __iconNode);\n\nexport { __iconNode, RefreshCw as default };\n//# sourceMappingURL=refresh-cw.js.map\n","/**\n * @license lucide-react v0.555.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72\",\n      key: \"ul74o6\"\n    }\n  ],\n  [\"path\", { d: \"m14 7 3 3\", key: \"1r5n42\" }],\n  [\"path\", { d: \"M5 6v4\", key: \"ilb8ba\" }],\n  [\"path\", { d: \"M19 14v4\", key: \"blhpug\" }],\n  [\"path\", { d: \"M10 2v2\", key: \"7u0qdc\" }],\n  [\"path\", { d: \"M7 8H3\", key: \"zfb6yr\" }],\n  [\"path\", { d: \"M21 16h-4\", key: \"1cnmox\" }],\n  [\"path\", { d: \"M11 3H9\", key: \"1obp7u\" }]\n];\nconst WandSparkles = createLucideIcon(\"wand-sparkles\", __iconNode);\n\nexport { __iconNode, WandSparkles as default };\n//# sourceMappingURL=wand-sparkles.js.map\n","import React, { useState, useRef, useEffect, useCallback } from 'react';\nimport { uploadAPI } from '../api.js';\nimport {\n    Camera,\n    Trash2,\n    Pencil,\n    X,\n    Globe,\n    RotateCw,\n    Image as ImageIcon,\n    Monitor,\n    UploadCloud,\n    ChevronLeft,\n    Move,\n    ZoomIn,\n    ZoomOut\n} from 'lucide-react';\n\nconst readFile = (file) => {\n    return new Promise((resolve) => {\n        const reader = new FileReader();\n        reader.addEventListener('load', () => resolve(reader.result), false);\n        reader.readAsDataURL(file);\n    });\n};\n\nconst createImage = (url) =>\n    new Promise((resolve, reject) => {\n        const image = new Image();\n        image.addEventListener('load', () => resolve(image));\n        image.addEventListener('error', (error) => reject(error));\n        image.setAttribute('crossOrigin', 'anonymous');\n        image.src = url;\n    });\n\nexport default function AvatarEditor({ initialImage, onSave, onCancel }) {\n    const [currentStep, setCurrentStep] = useState(initialImage ? 'main' : 'upload'); // 'main', 'upload', 'edit'\n    const [avatarUrl, setAvatarUrl] = useState(initialImage || null);\n    const [tempImage, setTempImage] = useState(null);\n\n    const handleFileChange = async (e) => {\n        if (e.target.files && e.target.files.length > 0) {\n            const file = e.target.files[0];\n            const imageDataUrl = await readFile(file);\n            setTempImage(imageDataUrl);\n            setCurrentStep('edit');\n        }\n    };\n\n    const handleSaveCrop = (croppedImageUrl) => {\n        setAvatarUrl(croppedImageUrl);\n        onSave(croppedImageUrl);\n    };\n\n    return (\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4 animate-in fade-in duration-200\">\n            <div className=\"relative w-full max-w-md bg-white rounded-3xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh] animate-in zoom-in-95 duration-200\">\n\n                {/* Header */}\n                <Header\n                    step={currentStep}\n                    onBack={() => setCurrentStep(currentStep === 'edit' ? 'upload' : 'main')}\n                    onClose={onCancel}\n                />\n\n                {/* Content Body */}\n                <div className=\"flex-1 overflow-y-auto custom-scrollbar\">\n                    {currentStep === 'main' && (\n                        <MainView\n                            avatarUrl={avatarUrl}\n                            onChangeClick={() => setCurrentStep('upload')}\n                            onRemoveClick={() => { setAvatarUrl(null); onSave(null); }}\n                        />\n                    )}\n\n                    {currentStep === 'upload' && (\n                        <UploadView onFileChange={handleFileChange} />\n                    )}\n\n                    {currentStep === 'edit' && tempImage && (\n                        <EditView\n                            imageSrc={tempImage}\n                            onSave={handleSaveCrop}\n                            onCancel={() => setCurrentStep('upload')}\n                        />\n                    )}\n                </div>\n            </div>\n        </div>\n    );\n}\n\nfunction Header({ step, onBack, onClose }) {\n    let title = \"头像设置\";\n    if (step === 'upload') title = \"更换头像\";\n    if (step === 'edit') title = \"裁剪与旋转\";\n\n    return (\n        <div className=\"flex items-center justify-between px-6 py-4 border-b border-gray-100 shrink-0 bg-white\">\n            <div className=\"flex items-center gap-2\">\n                {step !== 'main' && step !== 'upload' && ( // Simplified navigation logic\n                    <button\n                        onClick={onBack}\n                        className=\"p-2 -ml-2 rounded-full hover:bg-gray-100 text-gray-400 hover:text-pink-600 transition-colors\"\n                    >\n                        <ChevronLeft size={20} />\n                    </button>\n                )}\n                {(step === 'upload' && onBack) && ( // If we are in upload but came from main (implied by existence of onBack logic in parent, but here simplified)\n                    // Actually, if we have an avatar, 'upload' has a back button to 'main'. \n                    // If we started with no avatar, 'upload' is the first step.\n                    // For simplicity, let's just show back if step is 'edit'.\n                    null\n                )}\n                <h2 className=\"text-lg font-cute text-pink-900\">{title}</h2>\n            </div>\n            <button\n                onClick={onClose}\n                className=\"p-2 -mr-2 rounded-full hover:bg-gray-100 text-gray-400 hover:text-red-500 transition-colors\"\n            >\n                <X size={20} />\n            </button>\n        </div>\n    );\n}\n\nfunction MainView({ avatarUrl, onChangeClick, onRemoveClick }) {\n    return (\n        <div className=\"flex flex-col h-full bg-gray-50/50\">\n            <div className=\"p-8 flex flex-col items-center text-center flex-1 justify-center\">\n                <div className=\"relative group mb-8\">\n                    <div className=\"w-48 h-48 rounded-full overflow-hidden ring-8 ring-white shadow-2xl bg-gray-200 flex items-center justify-center\">\n                        {avatarUrl ? (\n                            <img\n                                src={avatarUrl}\n                                alt=\"Profile\"\n                                className=\"w-full h-full object-cover\"\n                            />\n                        ) : (\n                            <span className=\"text-6xl font-medium text-gray-400\">\n                                ?\n                            </span>\n                        )}\n                    </div>\n                </div>\n                <p className=\"text-sm text-gray-500 mb-2\">\n                    设置一个好看的头像，让角色更具吸引力\n                </p>\n            </div>\n\n            {/* Footer Actions */}\n            <div className=\"flex items-stretch border-t border-gray-100 bg-white divide-x divide-gray-100\">\n                <button\n                    onClick={onChangeClick}\n                    className=\"flex-1 py-4 flex items-center justify-center gap-2 text-pink-600 hover:bg-pink-50 transition-colors font-bold text-sm\"\n                >\n                    <Pencil size={16} />\n                    更换头像\n                </button>\n                <button\n                    onClick={onRemoveClick}\n                    className=\"flex-1 py-4 flex items-center justify-center gap-2 text-gray-400 hover:bg-red-50 hover:text-red-500 transition-colors font-bold text-sm\"\n                >\n                    <Trash2 size={16} />\n                    移除头像\n                </button>\n            </div>\n        </div>\n    );\n}\n\nfunction UploadView({ onFileChange }) {\n    const [isDragging, setIsDragging] = useState(false);\n    const fileInputRef = useRef(null);\n\n    const handleDragOver = (e) => {\n        e.preventDefault();\n        setIsDragging(true);\n    };\n\n    const handleDragLeave = (e) => {\n        e.preventDefault();\n        setIsDragging(false);\n    };\n\n    const handleDrop = (e) => {\n        e.preventDefault();\n        setIsDragging(false);\n        if (e.dataTransfer.files && e.dataTransfer.files.length > 0) {\n            onFileChange({ target: { files: e.dataTransfer.files } });\n        }\n    };\n\n    return (\n        <div className=\"flex flex-col h-full bg-white\">\n            {/* Drop Zone */}\n            <div className=\"flex-1 p-8 flex flex-col items-center justify-center\">\n                <div\n                    onDragOver={handleDragOver}\n                    onDragLeave={handleDragLeave}\n                    onDrop={handleDrop}\n                    onClick={() => fileInputRef.current.click()}\n                    className={`w-full max-w-xs aspect-square rounded-3xl flex flex-col items-center justify-center transition-all duration-300 cursor-pointer border-2 border-dashed ${isDragging\n                        ? 'bg-pink-50 border-pink-400 scale-105'\n                        : 'bg-gray-50 border-gray-200 hover:border-pink-300 hover:bg-pink-50/30'\n                        }`}\n                >\n                    <div className=\"w-20 h-20 rounded-full bg-white shadow-sm flex items-center justify-center mb-4 text-pink-500\">\n                        <UploadCloud size={32} />\n                    </div>\n                    <p className=\"text-gray-600 font-bold mb-1\">点击或拖拽上传</p>\n                    <p className=\"text-gray-400 text-xs\">支持 JPG, PNG, GIF</p>\n                </div>\n            </div>\n\n            <input\n                type=\"file\"\n                ref={fileInputRef}\n                onChange={onFileChange}\n                className=\"hidden\"\n                accept=\"image/*\"\n            />\n        </div>\n    );\n}\n\nfunction EditView({ imageSrc, onSave, onCancel }) {\n    const canvasRef = useRef(null);\n    const [imageObj, setImageObj] = useState(null);\n    const [saving, setSaving] = useState(false);\n\n    const [rotation, setRotation] = useState(0);\n    const [offset, setOffset] = useState({ x: 0, y: 0 });\n    const [isDragging, setIsDragging] = useState(false);\n    const [dragStart, setDragStart] = useState({ x: 0, y: 0 });\n    const [baseScale, setBaseScale] = useState(1);\n    const [zoom, setZoom] = useState(1);\n\n    const CANVAS_SIZE = 800;\n    const VIEWPORT_SIZE = 600;\n\n    useEffect(() => {\n        const init = async () => {\n            try {\n                const img = await createImage(imageSrc);\n                setImageObj(img);\n                const scaleX = CANVAS_SIZE / img.width;\n                const scaleY = CANVAS_SIZE / img.height;\n                const initScale = Math.max(scaleX, scaleY);\n                setBaseScale(initScale);\n                setZoom(1);\n            } catch (e) {\n                console.error(e);\n            }\n        };\n        init();\n    }, [imageSrc]);\n\n    const handleWheel = (e) => {\n        e.preventDefault();\n        const delta = e.deltaY * -0.001;\n        setZoom(prev => Math.max(0.5, Math.min(prev + delta, 3)));\n    };\n\n    const draw = useCallback(() => {\n        if (!imageObj || !canvasRef.current) return;\n        const canvas = canvasRef.current;\n        const ctx = canvas.getContext('2d');\n\n        ctx.clearRect(0, 0, CANVAS_SIZE, CANVAS_SIZE);\n\n        // Background (Dark for contrast)\n        ctx.fillStyle = '#18181b'; // zinc-900\n        ctx.fillRect(0, 0, CANVAS_SIZE, CANVAS_SIZE);\n\n        ctx.save();\n\n        ctx.translate(CANVAS_SIZE / 2, CANVAS_SIZE / 2);\n        ctx.rotate((rotation * Math.PI) / 180);\n        ctx.translate(-CANVAS_SIZE / 2, -CANVAS_SIZE / 2);\n\n        let rad = (rotation * Math.PI) / 180;\n        let localX = offset.x * Math.cos(-rad) - offset.y * Math.sin(-rad);\n        let localY = offset.x * Math.sin(-rad) + offset.y * Math.cos(-rad);\n\n        const currentScale = baseScale * zoom;\n        const imgWidth = imageObj.width * currentScale;\n        const imgHeight = imageObj.height * currentScale;\n\n        const centerX = CANVAS_SIZE / 2;\n        const centerY = CANVAS_SIZE / 2;\n\n        ctx.drawImage(\n            imageObj,\n            centerX - imgWidth / 2 + localX,\n            centerY - imgHeight / 2 + localY,\n            imgWidth,\n            imgHeight\n        );\n\n        ctx.restore();\n\n        // Overlay\n        const viewportOffset = (CANVAS_SIZE - VIEWPORT_SIZE) / 2;\n\n        ctx.fillStyle = 'rgba(0, 0, 0, 0.6)';\n        ctx.beginPath();\n        ctx.rect(0, 0, CANVAS_SIZE, CANVAS_SIZE);\n\n        // Square crop hole\n        ctx.rect(viewportOffset + VIEWPORT_SIZE, viewportOffset, -VIEWPORT_SIZE, VIEWPORT_SIZE);\n        ctx.fill('evenodd');\n        // Removed corner frame lines\n\n    }, [imageObj, rotation, offset, baseScale, zoom]);\n\n    useEffect(() => {\n        draw();\n    }, [draw]);\n\n    const handleMouseDown = (e) => {\n        setIsDragging(true);\n        const rect = canvasRef.current.getBoundingClientRect();\n        const x = e.clientX || e.touches[0].clientX;\n        const y = e.clientY || e.touches[0].clientY;\n        setDragStart({ x: x - rect.left, y: y - rect.top });\n    };\n\n    const handleMouseMove = (e) => {\n        if (!isDragging) return;\n        const rect = canvasRef.current.getBoundingClientRect();\n        const clientX = e.clientX || (e.touches ? e.touches[0].clientX : 0);\n        const clientY = e.clientY || (e.touches ? e.touches[0].clientY : 0);\n\n        const x = clientX - rect.left;\n        const y = clientY - rect.top;\n\n        const dx = x - dragStart.x;\n        const dy = y - dragStart.y;\n\n        setOffset(prev => ({ x: prev.x + dx, y: prev.y + dy }));\n        setDragStart({ x, y });\n    };\n\n    const handleMouseUp = () => {\n        setIsDragging(false);\n    };\n\n    const handleRotate = () => {\n        setRotation(prev => (prev + 90) % 360);\n    };\n\n    const handleFinalSave = async () => {\n        if (!canvasRef.current || saving) return;\n        setSaving(true);\n        try {\n            const tempCanvas = document.createElement('canvas');\n            const size = VIEWPORT_SIZE;\n            tempCanvas.width = size;\n            tempCanvas.height = size;\n            const tCtx = tempCanvas.getContext('2d');\n            const viewportOffset = (CANVAS_SIZE - VIEWPORT_SIZE) / 2;\n            tCtx.drawImage(\n                canvasRef.current,\n                viewportOffset, viewportOffset, size, size,\n                0, 0, size, size\n            );\n            const blob = await new Promise((resolve, reject) => {\n                tempCanvas.toBlob((b) => b ? resolve(b) : reject(new Error('blob_failed')), 'image/jpeg', 0.92);\n            });\n            const file = new File([blob], `avatar_${Date.now()}.jpg`, { type: 'image/jpeg' });\n            const result = await uploadAPI.avatar(file);\n            onSave(result.url);\n        } catch (e) {\n            console.error(e);\n        } finally {\n            setSaving(false);\n        }\n    };\n\n    return (\n        <div className=\"flex flex-col h-full bg-white\">\n            <div className=\"flex-1 relative flex items-center justify-center bg-gray-900 overflow-hidden\">\n                <canvas\n                    ref={canvasRef}\n                    width={CANVAS_SIZE}\n                    height={CANVAS_SIZE}\n                    onMouseDown={handleMouseDown}\n                    onMouseMove={handleMouseMove}\n                    onMouseUp={handleMouseUp}\n                    onMouseLeave={handleMouseUp}\n                    onTouchStart={handleMouseDown}\n                    onTouchMove={handleMouseMove}\n                    onTouchEnd={handleMouseUp}\n                    onWheel={handleWheel}\n                    className=\"cursor-move max-w-full max-h-full\"\n                    style={{ width: '100%', height: 'auto', maxHeight: '520px' }}\n                />\n            </div>\n\n            <div className=\"p-4 bg-white flex items-center justify-between border-t border-gray-100 gap-4\">\n                <button\n                    onClick={handleRotate}\n                    className=\"flex flex-col itemscenter gap-1 text-pink-600 hover:text-pink-700 transition text-xs font-bold px-2 py-2 rounded-xl hover:bg-pink-50 shrink-0\"\n                >\n                    <RotateCw size={20} />\n                    旋转\n                </button>\n\n                <div className=\"flex items-center gap-2 flex-1 max-w-[200px]\">\n                    <ZoomOut size={16} className=\"text-gray-400 shrink-0\" />\n                    <input\n                        type=\"range\"\n                        min=\"0.5\"\n                        max=\"3\"\n                        step=\"0.1\"\n                        value={zoom}\n                        onChange={(e) => setZoom(parseFloat(e.target.value))}\n                        className=\"w-full h-1.5 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-pink-500\"\n                    />\n                    <ZoomIn size={16} className=\"text-gray-400 shrink-0\" />\n                </div>\n\n                <div className=\"flex gap-2 shrink-0\">\n                    <button\n                        onClick={onCancel}\n                        className=\"px-4 py-2 rounded-xl text-gray-500 font-bold text-sm hover:bg-gray-100 transition-colors\"\n                    >\n                        取消\n                    </button>\n                    <button\n                        onClick={handleFinalSave}\n                        disabled={saving}\n                        className={`px-5 py-2 rounded-xl bg-gradient-to-r from-pink-500 to-pink-600 text-white font-bold text-sm shadow-lg shadow-pink-200 transition-all ${saving ? 'opacity-60 cursor-not-allowed' : 'hover:opacity-90'}`}\n                    >\n                        {saving ? '上传中...' : '完成'}\n                    </button>\n                </div>\n            </div>\n        </div>\n    );\n}\n","import React, { useEffect, useState, useRef } from 'react';\nimport { ChevronLeft, Save, Info, X, ChevronDown, RefreshCw, Wand2, FileText, HelpCircle } from 'lucide-react';\nimport { MOCK_TEMPLATES } from '../data/mock.js';\nimport { charactersAPI, templatesAPI, modelsAPI, syspromptAPI, uploadAPI } from '../api.js';\nimport AvatarEditor from '../components/AvatarEditor.jsx';\n\nconst CharacterCreateView = ({ initialData, onCancel, mode = 'new', notify }) => {\n  const [formData, setFormData] = useState({\n    name: '', gender: '男', identity: '', tagline: '', tags: [],\n    plotTheme: '', plotSummary: '', openingLine: '', styleExamples: ['', '', ''],\n    hobbies: '', experiences: '', published: false, generatedPrompt: '', personality: '',\n    relationship: '陌生人', customRelationship: '', sceneDescription: '',\n    sceneGeneratedPrompt: '', avatar: '', characterType: '原创角色', age: '', occupation: '',\n  });\n  const RELATIONSHIP_PRESETS = ['陌生人', '暧昧', '恋爱中', '冷战', '分手'];\n  const [isCustomRel, setIsCustomRel] = useState(false);\n  const [showAdvanced, setShowAdvanced] = useState(true);\n  useEffect(() => {\n    if (initialData) {\n      const isPresetRel = RELATIONSHIP_PRESETS.includes(initialData.relationship);\n      setFormData({\n        name: initialData.name || '', gender: initialData.gender || '男', identity: initialData.identity || '',\n        tagline: initialData.tagline || '', tags: initialData.tags || [],\n        plotTheme: initialData.plotTheme || '', plotSummary: initialData.plotSummary || '',\n        openingLine: initialData.openingLine || initialData.opening || '',\n        styleExamples: initialData.styleExamples || ['', '', ''], hobbies: initialData.hobbies || '',\n        experiences: initialData.experiences || '', published: initialData.status === 'published',\n        generatedPrompt: initialData.systemPrompt || '', personality: initialData.personality || '',\n        relationship: isPresetRel ? (initialData.relationship || '陌生人') : '',\n        customRelationship: !isPresetRel ? (initialData.relationship || '') : '',\n        avatar: initialData.avatar || '',\n        sceneDescription: initialData.sceneDescription || '',\n        sceneGeneratedPrompt: initialData.systemPromptScene || '',\n        templateIdScene: initialData.sceneTemplateId ? String(initialData.sceneTemplateId) : '',\n        characterType: initialData.characterType || initialData.type || '原创角色',\n        age: initialData.age || '',\n        occupation: initialData.occupation || '',\n      });\n      setIsCustomRel(!isPresetRel && !!initialData.relationship);\n      setSelectedPromptModel(initialData.promptModelId || '');\n      setPromptTemperature(typeof initialData.promptTemperature === 'number' ? initialData.promptTemperature : (initialData.promptTemperature || 0.1));\n      setSelectedSceneModel(initialData.sceneModelId || '');\n      setSceneTemperature(typeof initialData.sceneTemperature === 'number' ? initialData.sceneTemperature : (initialData.sceneTemperature || 0.1));\n    }\n  }, [initialData]);\n  const [isGeneratingMain, setIsGeneratingMain] = useState(false);\n  const [isGeneratingScene, setIsGeneratingScene] = useState(false);\n  const [showAvatarEditor, setShowAvatarEditor] = useState(false);\n  const [tagInput, setTagInput] = useState('');\n  const [isDropdownOpenScene, setIsDropdownOpenScene] = useState(false);\n  const dropdownRefScene = useRef(null);\n  const [isModelOpenMain, setIsModelOpenMain] = useState(false);\n  const [isModelOpenScene, setIsModelOpenScene] = useState(false);\n  const modelRefMain = useRef(null);\n  const modelRefScene = useRef(null);\n  const [selectedPromptModel, setSelectedPromptModel] = useState('');\n  const [selectedSceneModel, setSelectedSceneModel] = useState('');\n  const [promptTemperature, setPromptTemperature] = useState(0.1);\n  const [sceneTemperature, setSceneTemperature] = useState(0.1);\n  const [modelList, setModelList] = useState([]);\n  const [showTagModal, setShowTagModal] = useState(false);\n  const [customTagInput, setCustomTagInput] = useState('');\n  const [tplList, setTplList] = useState([]);\n  const [tplLoading, setTplLoading] = useState(false);\n\n  const availableTags = [\n    'M/M', 'M/F', 'BL', 'BG', '耽美', '百合', '责任感', '偶像', '占有欲', '霸道', '调戏', '腹黑', '温柔', '年下', '年上', '感性', '体贴', '理性', '反差', '激情', '校园', '贴心', '偏执', '疯批', '傲娇', '职场', '冷漠', '忧郁', '人夫', '养胃', '控制欲', '黏人', '可爱', '成熟', '性感'\n  ];\n  useEffect(() => {\n    const onDocClick = (e) => {\n      if (isDropdownOpenScene && dropdownRefScene.current && !dropdownRefScene.current.contains(e.target)) setIsDropdownOpenScene(false);\n      if (isModelOpenMain && modelRefMain.current && !modelRefMain.current.contains(e.target)) setIsModelOpenMain(false);\n      if (isModelOpenScene && modelRefScene.current && !modelRefScene.current.contains(e.target)) setIsModelOpenScene(false);\n    };\n    const onKey = (e) => {\n      if (e.key === 'Escape') { setIsDropdownOpenScene(false); setIsModelOpenMain(false); setIsModelOpenScene(false); }\n    };\n    document.addEventListener('mousedown', onDocClick);\n    document.addEventListener('keydown', onKey);\n    return () => {\n      document.removeEventListener('mousedown', onDocClick);\n      document.removeEventListener('keydown', onKey);\n    };\n  }, [isDropdownOpenScene, isModelOpenMain, isModelOpenScene]);\n\n  useEffect(() => {\n    (async () => {\n      try {\n        const data = await modelsAPI.list();\n        const sortKey = (m) => {\n          const nick = m.model_nickname || '';\n          const mt = nick.match(/^模型-([A-Z])$/i);\n          if (mt) return mt[1].toUpperCase();\n          return m.model_name || m.model_id || '';\n        };\n        setModelList((data.items || []).sort((a, b) => sortKey(a).localeCompare(sortKey(b))));\n      } catch { }\n    })();\n  }, []);\n\n  useEffect(() => {\n    (async () => {\n      try {\n        setTplLoading(true);\n        const data = await templatesAPI.list();\n        setTplList(data.items || []);\n      } catch { }\n      finally { setTplLoading(false); }\n    })();\n  }, []);\n\n  const getModelDisplay = (id) => {\n    const m = modelList.find(x => x.model_id === id);\n    return m ? (m.model_nickname || m.model_name || m.model_id) : '-- 请选择 --';\n  };\n  const selectedTemplateNameScene = formData.templateIdScene ? tplList.find((t) => t.id === parseInt(formData.templateIdScene))?.name : '-- 请选择 --';\n  const openTplDropdownScene = async () => {\n    const open = !isDropdownOpenScene;\n    setIsDropdownOpenScene(open);\n  };\n  const handleGeneratePrompt = async () => {\n    setIsGeneratingMain(true);\n    setFormData((prev) => ({ ...prev, generatedPrompt: '' }));\n    try {\n      const payload = {\n        model: selectedPromptModel || undefined,\n        temperature: promptTemperature === '' ? undefined : parseFloat(promptTemperature),\n        sourcePrompt: formData.sceneGeneratedPrompt || '',\n      };\n      const resp = await syspromptAPI.generateNoScene(payload);\n      setFormData((prev) => ({ ...prev, generatedPrompt: resp.prompt || '' }));\n    } catch {\n    } finally {\n      setIsGeneratingMain(false);\n    }\n  };\n  const handleAddTag = (e) => {\n    if (e.key === 'Enter' && tagInput.trim()) {\n      if (!formData.tags.includes(tagInput.trim())) {\n        setFormData((p) => ({ ...p, tags: [...p.tags, tagInput.trim()] }));\n      }\n      setTagInput('');\n    }\n  };\n  const handleTemplateSelectScene = (id) => { setFormData((prev) => ({ ...prev, templateIdScene: id })); setIsDropdownOpenScene(false); };\n  const handleRelSelect = (rel) => { setIsCustomRel(false); setFormData((prev) => ({ ...prev, relationship: rel, customRelationship: '' })); };\n  const handleCustomRelSelect = () => { setIsCustomRel(true); setFormData((prev) => ({ ...prev, relationship: '' })); };\n  const handleStyleExampleChange = (index, value) => { const newExamples = [...formData.styleExamples]; newExamples[index] = value; setFormData((prev) => ({ ...prev, styleExamples: newExamples })); };\n  return (\n    <div className=\"animate-fade-in pb-20\">\n      <div className=\"flex items-center gap-4 mb-6\">\n        <button onClick={onCancel} className=\"w-10 h-10 flex items-center justify-center bg-white rounded-full shadow-sm text-gray-500 hover:text-pink-600 transition-colors\"><ChevronLeft size={20} /></button>\n        <div>\n          <h2 className=\"text-2xl font-cute text-pink-900\">{initialData ? '编辑角色' : '创建新角色'}</h2>\n          <p className=\"text-gray-400 text-xs\">{initialData ? '修改角色设定与提示词' : '填写设定并生成专属提示词'}</p>\n        </div>\n        <div className=\"ml-auto flex gap-3\">\n          <button onClick={onCancel} className=\"px-6 py-2.5 rounded-xl bg-white text-gray-500 font-bold text-sm shadow-sm hover:bg-gray-50\">取消</button>\n          <button\n            onClick={async () => {\n              if (!formData.name || !formData.name.trim()) {\n                notify && notify('保存失败：请输入角色名称', 'error');\n                return;\n              }\n              const payload = {\n                name: formData.name.trim(),\n                gender: formData.gender,\n                sceneTemplateId: formData.templateIdScene ? parseInt(formData.templateIdScene) : (initialData?.sceneTemplateId ?? null),\n                identity: formData.identity || null,\n                tagline: formData.tagline || null,\n                personality: formData.personality || null,\n                relationship: isCustomRel ? (formData.customRelationship || null) : (formData.relationship || null),\n                plotTheme: formData.plotTheme || null,\n                plotSummary: formData.plotSummary || null,\n                openingLine: formData.openingLine || null,\n                systemPrompt: formData.generatedPrompt || null,\n                systemPromptScene: formData.sceneGeneratedPrompt || null,\n                promptModelId: selectedPromptModel || null,\n                promptTemperature: promptTemperature === '' ? null : parseFloat(promptTemperature),\n                sceneModelId: selectedSceneModel || null,\n                sceneTemperature: sceneTemperature === '' ? null : parseFloat(sceneTemperature),\n                hobbies: formData.hobbies || null,\n                experiences: formData.experiences || null,\n                status: formData.published ? 'published' : 'draft',\n                tags: formData.tags || [],\n                styleExamples: formData.styleExamples || [],\n                avatar: formData.avatar || null,\n                characterType: formData.characterType || null,\n                age: formData.age === '' ? null : parseInt(formData.age, 10),\n                occupation: formData.occupation || null,\n              };\n              try {\n                if (mode === 'edit' && initialData?.id) {\n                  await charactersAPI.update(initialData.id, payload);\n                  notify && notify('保存成功：角色已更新');\n                } else {\n                  await charactersAPI.create(payload);\n                  notify && notify('保存成功：角色已保存');\n                }\n                onCancel();\n              } catch (e) {\n                console.error('[characters.save] failed', { mode, payload, error: e });\n                notify && notify('保存失败：请稍后重试', 'error');\n              }\n            }}\n            className=\"px-6 py-2.5 rounded-xl bg-gradient-to-r from-pink-500 to-pink-600 text-white font-bold text-sm shadow-lg shadow-pink-200 flex items-center gap-2\"\n          >\n            <Save size={16} /> 保存角色\n          </button>\n        </div>\n      </div>\n      <div className=\"grid grid-cols-12 gap-6\">\n        <div className=\"col-span-12 lg:col-span-8 space-y-6\">\n          <div className=\"solid-card p-8 rounded-3xl space-y-4\">\n            <h3 className=\"font-cute text-lg text-pink-900 flex items-center gap-2 mb-2\"><span className=\"w-1.5 h-4 bg-yellow-400 rounded-full\"></span> 角色类型设置</h3>\n            <div className=\"flex flex-wrap gap-3\">\n              {['原创角色', '二次创作', '其他'].map((t) => (\n                <button\n                  key={t}\n                  onClick={() => setFormData({ ...formData, characterType: t })}\n                  className={`px-6 py-3 rounded-2xl text-sm font-bold transition-all ${formData.characterType === t ? 'bg-pink-500 text-white shadow-md' : 'bg-white text-gray-500 hover:text-pink-600'}`}\n                >\n                  {t}\n                </button>\n              ))}\n            </div>\n          </div>\n          <div className=\"solid-card p-8 rounded-3xl space-y-6\">\n            <h3 className=\"font-cute text-lg text-pink-900 flex items-center gap-2 mb-2\"><span className=\"w-1.5 h-4 bg-yellow-400 rounded-full\"></span> 基础设定</h3>\n            <div className=\"grid grid-cols-2 gap-6\">\n              <div>\n                <label className=\"block text-xs font-bold text-pink-800 mb-2\">角色名称</label>\n                <input value={formData.name} onChange={(e) => setFormData({ ...formData, name: e.target.value })} type=\"text\" className=\"dream-input w-full px-4 py-3 rounded-xl text-sm font-bold text-gray-700\" placeholder=\"角色姓名\" />\n              </div>\n              <div>\n                <label className=\"block text-xs font-bold text-pink-800 mb-2\">性别</label>\n                <div className=\"flex bg-gray-50 p-1 rounded-xl border border-gray-200\">\n                  {['男', '女', '其他'].map((g) => (\n                    <button key={g} onClick={() => setFormData({ ...formData, gender: g })} className={`flex-1 py-2 rounded-lg text-xs font-bold transition-all ${formData.gender === g ? 'bg-pink-500 text-white shadow-md' : 'text-gray-400 hover:text-pink-500'}`}>{g}</button>\n                  ))}\n                </div>\n              </div>\n              <div>\n                <label className=\"block text-xs font-bold text-pink-800 mb-2\">年龄</label>\n                <input value={formData.age} onChange={(e) => setFormData({ ...formData, age: e.target.value })} type=\"number\" min=\"0\" max=\"200\" className=\"dream-input w-full px-4 py-3 rounded-xl text-sm\" placeholder=\"年龄\" />\n              </div>\n              <div>\n                <label className=\"block text-xs font-bold text-pink-800 mb-2\">职业</label>\n                <input value={formData.occupation} onChange={(e) => setFormData({ ...formData, occupation: e.target.value })} type=\"text\" className=\"dream-input w-full px-4 py-3 rounded-xl text-sm\" placeholder=\"职业\" />\n              </div>\n            </div>\n            <div>\n              <label className=\"block text-xs font-bold text-pink-800 mb-2\">身份背景 (Identity)</label>\n              <textarea value={formData.identity} onChange={(e) => setFormData({ ...formData, identity: e.target.value })} rows=\"3\" className=\"dream-input w-full px-4 py-3 rounded-xl text-sm resize-none\" placeholder=\"角色的年龄、职业、过往经历...\"></textarea>\n            </div>\n            <div>\n              <label className=\"block text-xs font-bold text-pink-800 mb-2\">一句话人设 (Tagline)</label>\n              <input value={formData.tagline} onChange={(e) => setFormData({ ...formData, tagline: e.target.value })} className=\"dream-input w-full px-4 py-3 rounded-xl text-sm\" placeholder=\"例如：表面温柔克己实则腹黑\" />\n            </div>\n            <div>\n              <label className=\"block text-xs font-bold text-pink-800 mb-2\">性格 (Personality)</label>\n              <textarea value={formData.personality} onChange={(e) => setFormData({ ...formData, personality: e.target.value })} rows=\"2\" className=\"dream-input w-full px-4 py-3 rounded-xl text-sm resize-none\" placeholder=\"例：占有欲强，容易吃醋...\" />\n            </div>\n            <div>\n              <label className=\"block text-xs font-bold text-pink-800 mb-2\">角色标签</label>\n              <div onClick={() => setShowTagModal(true)} className=\"dream-input w-full px-3 py-2 min-h-[46px] flex flex-wrap gap-2 items-center bg-white/60 cursor-pointer hover:bg-white transition rounded-2xl border border-pink-100\">\n                {formData.tags.length === 0 && (\n                  <span className=\"text-xs text-[#B3A4C8] ml-1\">点击添加标签 (#傲娇 #高冷...)</span>\n                )}\n                {formData.tags.map((tag) => (\n                  <span key={tag} className=\"tag-pill px-2 py-1 flex items-center shadow-sm\">\n                    #{tag}\n                    <button onClick={(e) => { e.stopPropagation(); setFormData((prev) => ({ ...prev, tags: prev.tags.filter((t) => t !== tag) })); }} className=\"ml-1 opacity-60 hover:opacity-100\">\n                      <X size={12} />\n                    </button>\n                  </span>\n                ))}\n                <span className=\"ml-auto text-pink-300 text-xs\">›</span>\n              </div>\n            </div>\n            <div>\n              <label className=\"block text-xs font-bold text-pink-800 mb-2\">当下的关系</label>\n              <div className=\"flex flex-wrap gap-2 mb-2\">\n                <button onClick={handleCustomRelSelect} className={`px-4 py-2 rounded-xl text-xs font-bold transition-all border ${isCustomRel ? 'bg-pink-500 text-white shadow-md border-pink-500' : 'bg-white text-gray-500 border-gray-200 hover:border-pink-300'}`}>自定义</button>\n                {RELATIONSHIP_PRESETS.map((rel) => (\n                  <button key={rel} onClick={() => handleRelSelect(rel)} className={`px-4 py-2 rounded-xl text-xs font-bold transition-all border ${!isCustomRel && formData.relationship === rel ? 'bg-pink-500 text-white shadow-md border-pink-500' : 'bg-white text-gray-500 border-gray-200 hover:border-pink-300'}`}>{rel}</button>\n                ))}\n              </div>\n              {isCustomRel && (\n                <div className=\"animate-fade-in mt-2\">\n                  <input type=\"text\" value={formData.customRelationship} onChange={(e) => setFormData({ ...formData, customRelationship: e.target.value })} className=\"dream-input w-full px-4 py-2.5 rounded-xl text-sm\" placeholder=\"请输入自定义关系\" />\n                </div>\n              )}\n            </div>\n          </div>\n          <div className=\"solid-card p-8 rounded-3xl space-y-6\">\n            <h3 className=\"font-cute text-lg text-pink-900 flex items-center gap-2 mb-2\"><span className=\"w-1.5 h-4 bg-yellow-400 rounded-full\"></span> 第一情节</h3>\n            <div className=\"bg-pink-50 border border-pink-100 rounded-2xl p-4 flex gap-3 text-pink-700 text-sm leading-relaxed\">\n              <Info size={18} className=\"flex-shrink-0 mt-0.5 text-pink-500\" />\n              <div>第一情节的内容将被应用于和角色的第一次聊天。此外，设定第一情节并选择公开角色后，情节内容将显示在角色资料页上。</div>\n            </div>\n            <div>\n              <label className=\"block text-xs font-bold text-pink-800 mb-2\">主题</label>\n              <input value={formData.plotTheme} onChange={(e) => setFormData({ ...formData, plotTheme: e.target.value })} className=\"dream-input w-full px-4 py-3 rounded-xl text-sm\" placeholder=\"例：当温柔人夫终于爆发腹黑属性\" />\n            </div>\n            <div>\n              <label className=\"block text-xs font-bold text-pink-800 mb-2\">情节梗概</label>\n              <textarea value={formData.plotSummary} onChange={(e) => setFormData({ ...formData, plotSummary: e.target.value })} rows=\"4\" className=\"dream-input w-full px-4 py-3 rounded-xl text-sm resize-none\" placeholder=\"例：在一起这么久了，他还是一如既往的温柔体贴，从来不干涉你的个人生活。今天晚上你去酒吧玩，故意装作喝醉和他打电话，却在他应了一声后开始软声叫着别人的名字......\" />\n            </div>\n            <div>\n              <label className=\"block text-xs font-bold text-pink-800 mb-2\">开场白</label>\n              <input value={formData.openingLine} onChange={(e) => setFormData({ ...formData, openingLine: e.target.value })} className=\"dream-input w-full px-4 py-3 rounded-xl text-sm\" placeholder=\"例：“出来，我在酒吧门口”\" />\n            </div>\n          </div>\n          <div className=\"solid-card rounded-3xl overflow-hidden\">\n            <div className=\"p-8 pb-4 flex justify-between items-center cursor-pointer hover:bg-gray-50 transition-colors\" onClick={() => setShowAdvanced(!showAdvanced)}>\n              <div className=\"flex items-center gap-2\"><span className=\"w-1.5 h-4 bg-yellow-400 rounded-full\"></span><h3 className=\"font-cute text-lg text-pink-900\">进阶设定</h3><span className=\"text-[10px] px-2 py-0.5 bg-pink-100 text-pink-600 rounded\">可选</span></div>\n              <ChevronDown size={20} className={`text-gray-400 transition-transform duration-300 ${showAdvanced ? 'rotate-180' : ''}`} />\n            </div>\n            {showAdvanced && (\n              <div className=\"p-8 pt-0 space-y-6 animate-in slide-in-from-top-4 fade-in duration-300\">\n                <div>\n                  <label className=\"block text-xs font-bold text-pink-800 mb-3\">说话风格示例</label>\n                  <div className=\"space-y-3\">\n                    {[0, 1, 2].map((idx) => (\n                      <div key={idx} className=\"relative flex items-center gap-3\">\n                        <span className=\"text-xs font-bold text-pink-300 font-mono\">0{idx + 1}</span>\n                        <input type=\"text\" value={formData.styleExamples[idx] || ''} onChange={(e) => handleStyleExampleChange(idx, e.target.value)} className=\"dream-input flex-1 px-4 py-3 rounded-xl text-sm\" placeholder={idx === 0 ? '例：哼，别以为我会感谢你。' : idx === 1 ? '例：今晚月色真美，不一起走走吗？' : '例：再靠近一步，我就不客气了。'} />\n                      </div>\n                    ))}\n                  </div>\n                </div>\n                <div>\n                  <label className=\"block text-xs font-bold text-pink-800 mb-2\">爱好</label>\n                  <textarea value={formData.hobbies} onChange={(e) => setFormData({ ...formData, hobbies: e.target.value })} rows=\"3\" className=\"dream-input w-full px-4 py-3 rounded-xl text-sm resize-none\" placeholder=\"例：喜欢看书、收集古董怀表...\" />\n                </div>\n                <div>\n                  <label className=\"block text-xs font-bold text-pink-800 mb-2\">经历</label>\n                  <textarea value={formData.experiences} onChange={(e) => setFormData({ ...formData, experiences: e.target.value })} rows=\"4\" className=\"dream-input w-full px-4 py-3 rounded-xl text-sm resize-none\" placeholder=\"请填写角色个人经历或你们的共同经历\" />\n                </div>\n              </div>\n            )}\n          </div>\n          <div className=\"solid-card p-8 rounded-3xl relative overflow-visible bg-gradient-to-r from-pink-50 to-pink-100 border-pink-100\">\n            <h3 className=\"font-cute text-lg text-pink-900 mb-4 flex items-center gap-2\"><span className=\"w-1.5 h-4 bg-yellow-400 rounded-full\"></span> 角色提示词配置（带场景描述）</h3>\n            <div className=\"mb-4\">\n              <label className=\"block text-xs font-bold text-pink-800 mb-2\">角色提示词AI模型（场景）</label>\n              <div className=\"flex items-center gap-4\">\n                <div className=\"relative z-50 flex-1\" ref={modelRefScene}>\n                  <button onClick={() => setIsModelOpenScene(!isModelOpenScene)} className={`dream-input w-full px-4 py-3 rounded-xl text-sm text-left font-bold transition-all bg-white flex justify-between items-center ${isModelOpenScene ? 'border-pink-500 ring-4 ring-pink-100/50' : ''}`}>\n                    <span className={`${selectedSceneModel ? 'text-gray-700' : 'text-gray-400 font-normal'}`}>{getModelDisplay(selectedSceneModel)}</span>\n                    <div className={`text-pink-400 transition-transform ${isModelOpenScene ? 'rotate-180' : ''}`}>▼</div>\n                  </button>\n                  {isModelOpenScene && (\n                    <ul className=\"absolute top-full mt-1 w-full bg-white border border-pink-200 rounded-xl shadow-xl max-h-48 overflow-y-auto z-50\">\n                      {modelList.length === 0 ? (\n                        <li className=\"px-4 py-3 text-sm text-gray-400\">暂无模型</li>\n                      ) : (\n                        modelList.map(m => (\n                          <li key={m.id} onClick={() => { setSelectedSceneModel(m.model_id); setIsModelOpenScene(false); }} className={`px-4 py-3 text-sm text-gray-700 hover:bg-pink-50 cursor-pointer transition-colors ${selectedSceneModel === m.model_id ? 'bg-pink-100 font-bold text-pink-700' : ''}`}>{m.model_nickname || m.model_name || m.model_id}</li>\n                        ))\n                      )}\n                    </ul>\n                  )}\n                </div>\n                <div className=\"flex items-center gap-2 min-w-[140px] justify-end\">\n                  <input type=\"number\" min=\"0\" max=\"2\" step=\"0.05\" value={sceneTemperature} onChange={(e) => setSceneTemperature(e.target.value)} className=\"dream-input w-24 px-2 py-3 rounded-xl text-sm font-bold text-center\" />\n                  <div className=\"relative group\">\n                    <HelpCircle size={18} className=\"text-pink-400 cursor-help\" />\n                    <div className=\"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 w-48 p-3 bg-white/90 backdrop-blur-sm border border-pink-100 text-pink-900 text-xs rounded-xl shadow-xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50 pointer-events-none text-center\">\n                      温度：高数值输出随机，低数值输出集中。\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n            <div className=\"flex gap-4 items-end mt-4\">\n              <div className=\"flex-1\">\n                <label className=\"block text-xs font-bold text-pink-800 mb-2\">选择基础模版</label>\n                <div className=\"relative z-20 flex-1\" ref={dropdownRefScene}>\n                  <button onClick={openTplDropdownScene} className={`dream-input w-full px-4 py-3 rounded-xl text-sm text-left font-bold transition-all bg-white flex justify-between items-center ${isDropdownOpenScene ? 'border-pink-500 ring-4 ring-pink-100/50' : ''}`}>\n                    <span className={`${formData.templateIdScene ? 'text-gray-700' : 'text-gray-400 font-normal'}`}>{selectedTemplateNameScene}</span>\n                    <div className={`text-pink-400 transition-transform ${isDropdownOpenScene ? 'rotate-180' : ''}`}>▼</div>\n                  </button>\n                  {isDropdownOpenScene && (\n                    <ul className=\"absolute top-full mt-1 w-full bg-white border border-pink-200 rounded-xl shadow-xl max-h-48 overflow-y-auto z-50\">\n                      <li onClick={() => handleTemplateSelectScene('')} className=\"px-4 py-3 text-sm text-gray-400 hover:bg-pink-50 cursor-pointer border-b border-pink-50\">-- 请选择 --</li>\n                      {tplLoading ? (\n                        <li className=\"px-4 py-3 text-sm text-gray-400\">加载中...</li>\n                      ) : (\n                        tplList.map((tpl) => (\n                          <li key={tpl.id} onClick={() => handleTemplateSelectScene(tpl.id.toString())} className={`px-4 py-3 text-sm text-gray-700 hover:bg-pink-50 cursor-pointer transition-colors ${formData.templateIdScene == tpl.id ? 'bg-pink-100 font-bold text-pink-700' : ''}`}>{tpl.name} ({tpl.type})</li>\n                        ))\n                      )}\n                    </ul>\n                  )}\n                </div>\n              </div>\n              <button onClick={async () => {\n                if (!formData.templateIdScene) return alert('请先选择一个提示词模版');\n                setIsGeneratingScene(true);\n                setFormData((prev) => ({ ...prev, sceneGeneratedPrompt: '' }));\n                try {\n                  const selectedTemplate = tplList.find((t) => t.id === parseInt(formData.templateIdScene));\n                  const payload = {\n                    templateContent: selectedTemplate?.content || '',\n                    model: selectedSceneModel || undefined,\n                    temperature: sceneTemperature === '' ? undefined : parseFloat(sceneTemperature),\n                    name: formData.name,\n                    gender: formData.gender,\n                    age: formData.age,\n                    occupation: formData.occupation,\n                    identity: formData.identity,\n                    tagline: formData.tagline,\n                    tags: formData.tags,\n                    personality: formData.personality,\n                    relationship: isCustomRel ? formData.customRelationship : formData.relationship,\n                    styleExamples: formData.styleExamples,\n                    hobbies: formData.hobbies,\n                    experiences: formData.experiences,\n                  };\n                  const resp = await syspromptAPI.generate(payload);\n                  setFormData((prev) => ({ ...prev, sceneGeneratedPrompt: resp.prompt || '' }));\n                } catch {\n                } finally {\n                  setIsGeneratingScene(false);\n                }\n              }} disabled={isGeneratingScene} className=\"px-6 py-3 rounded-xl bg-pink-600 text-white font-bold text-sm shadow-lg shadow-pink-200 hover:bg-pink-700 transition-all flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed min-w-[140px] justify-center z-0\">\n                {isGeneratingScene ? <span className=\"animate-spin\"><RefreshCw size={16} /></span> : <Wand2 size={16} className=\"text-yellow-300\" />}\n                {isGeneratingScene ? '生成中...' : '生成提示词'}\n              </button>\n            </div>\n            <p className=\"text-xs text-pink-400 mt-2 ml-1\">* 将根据上方填写的设定，自动填充到模版占位符中</p>\n            <div className=\"mt-4 relative\">\n              <textarea rows=\"12\" value={formData.sceneGeneratedPrompt} onChange={(e) => setFormData({ ...formData, sceneGeneratedPrompt: e.target.value })} className=\"dream-input w-full px-5 py-4 rounded-xl text-sm leading-relaxed font-mono text-gray-700 bg-white focus:bg-white resize-y shadow-inner\" placeholder=\"点击上方“生成提示词”按钮，或在此直接编写 Prompt...\"></textarea>\n              {!formData.sceneGeneratedPrompt && (\n                <div className=\"absolute inset-0 flex items-center justify-center pointer-events-none opacity-30\">\n                  <div className=\"text-center\"><FileText size={48} className=\"mx-auto mb-2 text-pink-300\" /><p className=\"text-sm font-bold text-pink-400\">等待生成...</p></div>\n                </div>\n              )}\n            </div>\n          </div>\n          <div className=\"solid-card p-8 rounded-3xl relative overflow-visible bg-gradient-to-r from-pink-50 to-pink-100 border-pink-100\">\n            <h3 className=\"font-cute text-lg text-pink-900 mb-4 flex items-center gap-2\"><span className=\"w-1.5 h-4 bg-yellow-400 rounded-full\"></span> 角色提示词配置</h3>\n            <div className=\"mb-4\">\n              <label className=\"block text-xs font-bold text-pink-800 mb-2\">角色提示词AI模型</label>\n              <div className=\"flex items-center gap-4\">\n                <div className=\"relative z-50 flex-1\" ref={modelRefMain}>\n                  <button onClick={() => setIsModelOpenMain(!isModelOpenMain)} className={`dream-input w-full px-4 py-3 rounded-xl text-sm text-left font-bold transition-all bg-white flex justify-between items-center ${isModelOpenMain ? 'border-pink-500 ring-4 ring-pink-100/50' : ''}`}>\n                    <span className={`${selectedPromptModel ? 'text-gray-700' : 'text-gray-400 font-normal'}`}>{getModelDisplay(selectedPromptModel)}</span>\n                    <div className={`text-pink-400 transition-transform ${isModelOpenMain ? 'rotate-180' : ''}`}>▼</div>\n                  </button>\n                  {isModelOpenMain && (\n                    <ul className=\"absolute top-full mt-1 w-full bg-white border border-pink-200 rounded-xl shadow-xl max-h-48 overflow-y-auto z-50\">\n                      {modelList.length === 0 ? (\n                        <li className=\"px-4 py-3 text-sm text-gray-400\">暂无模型</li>\n                      ) : (\n                        modelList.map(m => (\n                          <li key={m.id} onClick={() => { setSelectedPromptModel(m.model_id); setIsModelOpenMain(false); }} className={`px-4 py-3 text-sm text-gray-700 hover:bg-pink-50 cursor-pointer transition-colors ${selectedPromptModel === m.model_id ? 'bg-pink-100 font-bold text-pink-700' : ''}`}>{m.model_nickname || m.model_name || m.model_id}</li>\n                        ))\n                      )}\n                    </ul>\n                  )}\n                </div>\n                <div className=\"flex items-center gap-2 min-w-[140px] justify-end\">\n                  <input type=\"number\" min=\"0\" max=\"2\" step=\"0.05\" value={promptTemperature} onChange={(e) => setPromptTemperature(e.target.value)} className=\"dream-input w-24 px-2 py-3 rounded-xl text-sm font-bold text-center\" />\n                  <div className=\"relative group\">\n                    <HelpCircle size={18} className=\"text-pink-400 cursor-help\" />\n                    <div className=\"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 w-48 p-3 bg-white/90 backdrop-blur-sm border border-pink-100 text-pink-900 text-xs rounded-xl shadow-xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50 pointer-events-none text-center\">\n                      温度：高数值输出随机，低数值输出集中。\n                    </div>\n                  </div>\n                </div>\n                <button onClick={handleGeneratePrompt} disabled={isGeneratingMain} className=\"px-6 py-3 rounded-xl bg-pink-600 text-white font-bold text-sm shadow-lg shadow-pink-200 hover:bg-pink-700 transition-all flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed min-w-[140px] justify-center z-0\">\n                  {isGeneratingMain ? <span className=\"animate-spin\"><RefreshCw size={16} /></span> : <Wand2 size={16} className=\"text-yellow-300\" />}\n                  {isGeneratingMain ? '生成中...' : '生成提示词'}\n                </button>\n              </div>\n            </div>\n            <p className=\"text-xs text-pink-400 mt-2 ml-1\">* 将根据上方输出的提示词，进行二次生成不带场景描述的提示词。</p>\n            <div className=\"mt-4 relative\">\n              <textarea rows=\"12\" value={formData.generatedPrompt} onChange={(e) => setFormData({ ...formData, generatedPrompt: e.target.value })} className=\"dream-input w-full px-5 py-4 rounded-xl text-sm leading-relaxed font-mono text-gray-700 bg-white focus:bg-white resize-y shadow-inner\" placeholder=\"点击上方“生成提示词”按钮，或在此直接编写 Prompt...\"></textarea>\n              {!formData.generatedPrompt && (\n                <div className=\"absolute inset-0 flex items-center justify-center pointer-events-none opacity-30\">\n                  <div className=\"text-center\"><FileText size={48} className=\"mx-auto mb-2 text-pink-300\" /><p className=\"text-sm font-bold text-pink-400\">等待生成...</p></div>\n                </div>\n              )}\n            </div>\n          </div>\n\n        </div>\n        <div className=\"col-span-12 lg:col-span-4 space-y-6\">\n          <div className=\"glass-card p-6 rounded-3xl flex flex-col items-center text-center\">\n            <h3 className=\"font-cute text-pink-900 mb-4 w-full text-left border-b border-pink-100 pb-2\">头像预览</h3>\n            <div onClick={() => setShowAvatarEditor(true)} className=\"w-32 h-32 rounded-full bg-gray-100 border-4 border-white shadow-xl flex items-center justify-center mb-4 relative group cursor-pointer overflow-hidden\">\n              {formData.avatar ? <img src={formData.avatar} alt=\"Avatar\" className=\"w-full h-full object-cover\" /> : <div className=\"text-4xl text-gray-300 font-bold\">{formData.name ? formData.name[0] : '?'}</div>}\n              <div className=\"absolute inset-0 bg-black/30 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity text-white text-xs font-bold\">更换头像</div>\n            </div>\n            <div className=\"w-full\">\n              <label className=\"flex items-center justify-between p-4 bg-white/50 rounded-xl cursor-pointer hover:bg-white transition-colors border border-pink-50\">\n                <span className=\"text-sm font-bold text-gray-700\">发布到广场</span>\n                <div onClick={() => setFormData({ ...formData, published: !formData.published })} className={`w-12 h-6 rounded-full p-1 transition-colors duration-300 ${formData.published ? 'bg-pink-500' : 'bg-gray-300'}`}> \n                  <div className={`w-4 h-4 rounded-full bg-white shadow-sm transform transition-transform duration-300 ${formData.published ? 'translate-x-6' : ''}`}></div>\n                </div>\n              </label>\n              <p className=\"text-xs text-left text-gray-400 mt-2 px-1\">开启后，该角色将出现在公共广场，所有用户可见。</p>\n            </div>\n          </div>\n          <div className=\"glass-card p-6 rounded-3xl bg-gradient-to-br from-pink-500 to-pink-600 text-white\"><h4 className=\"font-bold mb-2 flex items-center gap-2\"><span className=\"inline-block\"><Wand2 size={16} className=\"text-yellow-300\" /></span> 提示</h4><p className=\"text-xs opacity-90 leading-relaxed\">好的 Prompt 决定了角色的灵魂。建议生成后仔细检查，补充更多细节。</p></div>\n        </div>\n      </div>\n      {showTagModal && (\n        <>\n          <div className=\"fixed top-0 right-0 bottom-0 left-64 bg-black/30 z-50\" onClick={() => setShowTagModal(false)}></div>\n          <div className=\"fixed top-0 right-0 bottom-0 left-64 z-50 flex items-center justify-center p-4\">\n            <div className=\"w-full max-w-4xl rounded-3xl bg-white p-6 shadow-2xl border border-pink-50\">\n              <div className=\"flex justify-between items-center mb-4\">\n                <button onClick={() => setShowTagModal(false)} className=\"w-8 h-8 rounded-full bg-pink-50 text-pink-800 flex items-center justify-center\">‹</button>\n                <h3 className=\"text-lg font-bold font-cute text-pink-900\">添加 #标签</h3>\n                <button onClick={() => setShowTagModal(false)} className=\"text-sm font-bold text-pink-600 bg-pink-50 px-3 py-1 rounded-full\">完成</button>\n              </div>\n              <div className=\"space-y-6 max-h-[70vh] overflow-y-auto\">\n                <div>\n                  <div className=\"text-xs font-bold text-gray-400 mb-2 ml-1\">选定的标签</div>\n                  <div className=\"flex flex-wrap gap-2 min-h-[46px] bg-pink-50/50 p-3 rounded-xl border border-pink-100 border-dashed\">\n                    {formData.tags.length === 0 ? (\n                      <span className=\"text-xs text-gray-400\">暂无标签</span>\n                    ) : (\n                      formData.tags.map((tag) => (\n                        <button key={tag} onClick={() => setFormData((prev) => ({ ...prev, tags: prev.tags.filter((t) => t !== tag) }))} className=\"bg-pink-500 text-white px-3 py-1.5 rounded-xl text-xs font-bold shadow-sm flex items-center gap-1\">\n                          #{tag} <span className=\"text-[10px] ml-1 opacity-80\">×</span>\n                        </button>\n                      ))\n                    )}\n                  </div>\n                </div>\n                <div>\n                  <div className=\"text-xs font-bold text-gray-400 mb-2 ml-1\">直接添加 (自定义)</div>\n                  <div className=\"flex gap-2\">\n                    <input value={customTagInput} onChange={(e) => setCustomTagInput(e.target.value)} onKeyDown={(e) => { if (e.key === 'Enter') { e.preventDefault(); const val = customTagInput.trim(); if (val) setFormData((prev) => (prev.tags.includes(val) ? prev : { ...prev, tags: [...prev.tags, val] })); setCustomTagInput(''); } }} type=\"text\" placeholder=\"输入标签，不用加#\" className=\"dream-input flex-1 px-4 py-2 text-sm bg-white rounded-xl\" />\n                    <button onClick={() => { const val = customTagInput.trim(); if (val) setFormData((prev) => (prev.tags.includes(val) ? prev : { ...prev, tags: [...prev.tags, val] })); setCustomTagInput(''); }} className=\"bg-gradient-to-r from-pink-400 to-pink-500 text-white px-4 rounded-xl font-bold text-sm shadow-md active:scale-95 transition\">添加</button>\n                  </div>\n                </div>\n                <div>\n                  <div className=\"text-xs font-bold text-gray-400 mb-2 ml-1\">标签选择</div>\n                  <div className=\"grid grid-cols-4 gap-2\">\n                    {availableTags.map((tag) => (\n                      <button key={tag} onClick={() => setFormData((prev) => ({ ...prev, tags: prev.tags.includes(tag) ? prev.tags.filter((t) => t !== tag) : [...prev.tags, tag] }))} className={`tag-select-btn flex items-center justify-center ${formData.tags.includes(tag) ? 'active' : ''}`}>#{tag}</button>\n                    ))}\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </>\n      )}\n      {showAvatarEditor && (\n        <AvatarEditor\n          initialImage={formData.avatar || null}\n          onSave={async (dataUrl) => {\n            try {\n              const r = await uploadAPI.avatar(dataUrl);\n              setFormData((p) => ({ ...p, avatar: r.url }));\n            } catch { }\n            setShowAvatarEditor(false);\n          }}\n          onCancel={() => setShowAvatarEditor(false)}\n        />\n      )}\n      {showAvatarEditor && (\n        <AvatarEditor\n          initialImage={formData.avatar}\n          onSave={(newAvatar) => { setFormData(prev => ({ ...prev, avatar: newAvatar })); setShowAvatarEditor(false); }}\n          onCancel={() => setShowAvatarEditor(false)}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default CharacterCreateView;\n","import React, { useState, useEffect } from 'react';\nimport { Plus, Edit3, Copy, Archive, Send, X } from 'lucide-react';\nimport CharacterCreateView from './CharacterCreateView.jsx';\nimport { ToastProvider, useToast } from '../Toast.jsx';\nimport { charactersAPI } from '../api.js';\n\nconst CharacterManagementInner = ({ creatorRole }) => {\n  const [view, setView] = useState('list');\n  const [editingChar, setEditingChar] = useState(null);\n  const [characterList, setCharacterList] = useState([]);\n  const [mode, setMode] = useState('new');\n  const { showToast } = useToast();\n  const [deleteTarget, setDeleteTarget] = useState(null);\n  const CARD_HEIGHT = 220;\n  const TAG_MAX_W = 300;\n  const reload = async () => {\n    try {\n      const params = creatorRole ? { creator_role: creatorRole } : {};\n      const d = await charactersAPI.list(params);\n      setCharacterList(d.items || []);\n    } catch {\n      showToast('加载失败', 'error');\n    }\n  };\n  useEffect(() => { reload(); }, [creatorRole]);\n  const handleEdit = (char) => { setEditingChar(char); setMode('edit'); setView('create'); };\n  const handleCreateNew = () => { setEditingChar(null); setMode('new'); setView('create'); };\n  const handleCopy = (char) => { const copiedChar = { ...char, id: undefined, name: `${char.name}_copy`, status: 'draft' }; setEditingChar(copiedChar); setMode('copy'); setView('create'); showToast('复制成功，已进入编辑'); };\n  const handleToggleStatus = async (id, current) => { try { await charactersAPI.setStatus(id, current === 'published' ? 'draft' : 'published'); await reload(); } catch { showToast('操作失败', 'error'); } };\n  const openDelete = (char) => setDeleteTarget(char);\n  const closeDelete = () => setDeleteTarget(null);\n  const confirmDelete = async () => { if (!deleteTarget) return; try { await charactersAPI.remove(deleteTarget.id); showToast('删除成功'); await reload(); } catch { showToast('删除失败', 'error'); } finally { closeDelete(); } };\n  if (view === 'create') return <CharacterCreateView initialData={editingChar} onCancel={() => { setView('list'); reload(); }} mode={mode} notify={showToast} />;\n  return (\n    <div className=\"space-y-6 animate-fade-in\">\n      <div className=\"flex justify-between items-center\">\n        <div>\n          <h2 className=\"text-2xl font-cute text-pink-900 flex items-center gap-2\">\n            <span className=\"w-1.5 h-6 bg-yellow-400 rounded-full inline-block\"></span>\n            {creatorRole === 'user_role' ? '用户角色' : '官方角色'}\n          </h2>\n          <p className=\"text-gray-400 text-xs mt-1 ml-4\">\n            {creatorRole === 'user_role' ? '查看用户创建的角色' : '管理官方发布的 AI 角色'}\n          </p>\n        </div>\n        {creatorRole !== 'user_role' && (\n          <button onClick={handleCreateNew} className=\"bg-gradient-to-r from-pink-500 to-pink-600 text-white px-5 py-2.5 rounded-xl font-bold shadow-lg shadow-pink-200 hover:opacity-90 transition-all flex items-center gap-2 text-sm\">\n            <Plus size={16} /> 创建角色\n          </button>\n        )}\n      </div>\n      <div className=\"grid gap-6\" style={{ gridTemplateColumns: 'repeat(auto-fit, minmax(320px, 360px))' }}>\n        {characterList.map((char) => (\n          <div key={char.id} className=\"relative w-full\">\n            <div className=\"glass-card p-4 rounded-3xl hover:shadow-xl transition-all group relative overflow-hidden h-[220px] flex flex-col\">\n              <div className={`absolute top-4 right-4 text-xs px-2 py-0.5 rounded-md font-bold ${char.status === 'published' ? 'bg-green-100 text-green-600' : 'bg-gray-100 text-gray-500'}`}>{char.status === 'published' ? '已发布' : '草稿'}</div>\n              <div className=\"flex items-start gap-4\">\n                <div className=\"w-20 h-20 rounded-2xl bg-gradient-to-br from-pink-200 to-pink-300 flex items-center justify-center text-white text-xl font-bold shadow-inner border-2 border-white overflow-hidden flex-shrink-0\">\n                  {char.avatar ? (\n                    <img src={char.avatar} alt=\"avatar\" className=\"w-full h-full object-cover\" />\n                  ) : (\n                    <span>{char.name ? (char.name[0]) : '?'}</span>\n                  )}\n                </div>\n                <div className=\"flex-1 min-w-0\">\n                  <div className=\"flex items-baseline gap-2\">\n                    <h3 className=\"font-bold text-lg text-gray-800 truncate\">{char.name}</h3>\n                    <div className=\"text-xs text-gray-400 truncate\">\n                      {(char.age != null && char.age !== '') ? `${char.age}岁` : ''}\n                      {char.occupation ? `${(char.age != null && char.age !== '') ? ' · ' : ''}${char.occupation}` : ''}\n                    </div>\n                  </div>\n                  <div className=\"flex gap-1 mt-2 flex-nowrap whitespace-nowrap overflow-hidden\" style={{ maxWidth: TAG_MAX_W }}>\n                    {char.tags.map((t) => (\n                      <span key={t} className=\"text-[10px] bg-pink-50 text-pink-600 px-1.5 py-0.5 rounded border border-pink-100\">#{t}</span>\n                    ))}\n                  </div>\n                  {/* 人设文案移动到头像下方，完整换行显示 */}\n                </div>\n              </div>\n              <div className=\"mt-3\">\n                <p className=\"text-gray-600 text-sm leading-relaxed break-words\">\n                  {char.tagline || '暂无一句话人设'}\n                </p>\n              </div>\n              <div className=\"mt-auto flex gap-2 pt-3 border-t border-white/50\">\n                <button onClick={() => handleEdit(char)} className=\"flex-1 py-2 text-xs font-bold text-pink-600 bg-pink-50 hover:bg-pink-100 rounded-lg transition-colors flex items-center justify-center gap-1 mx-1\"><Edit3 size={12} /> 编辑</button>\n                <button onClick={() => handleCopy(char)} className=\"flex-1 py-2 text-xs font-bold text-blue-600 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors flex items-center justify-center gap-1 mx-1\"><Copy size={12} /> 复制</button>\n                {char.status === 'published' ? (\n                  <button onClick={() => handleToggleStatus(char.id, char.status)} className=\"flex-1 py-2 text-xs font-bold text-red-600 bg-red-50 hover:bg-red-100 rounded-lg transition-colors flex items-center justify-center gap-1 mx-1\"><Archive size={12} /> 回收</button>\n                ) : (\n                  <button onClick={() => handleToggleStatus(char.id, char.status)} className=\"flex-1 py-2 text-xs font-bold text-green-600 bg-green-50 hover:bg-green-100 rounded-lg transition-colors flex items-center justify-center gap-1 mx-1\"><Send size={12} /> 发布</button>\n                )}\n              </div>\n            </div>\n            <button onClick={() => openDelete(char)} className=\"absolute -top-2 -right-2 z-10 w-8 h-8 rounded-full bg-white/60 backdrop-blur-md shadow-lg border border-pink-100 flex items-center justify-center text-gray-400 hover:text-red-500 transition\">\n              <X size={12} />\n            </button>\n          </div>\n        ))}\n      </div>\n      {deleteTarget && (\n        <>\n          <div className=\"fixed top-0 right-0 bottom-0 left-64 bg-black/30 z-50\" onClick={closeDelete}></div>\n          <div className=\"fixed top-0 right-0 bottom-0 left-64 z-50 flex items-center justify-center p-4\">\n            <div className=\"bg-white rounded-3xl border border-pink-50 p-6 w-full max-w-md shadow-2xl\">\n              <h3 className=\"font-cute text-lg text-pink-900 mb-2\">删除角色</h3>\n              <p className=\"text-sm text-gray-500 mb-4\">确定删除“{deleteTarget.name}”吗？此操作不可撤回。</p>\n              <div className=\"flex justify-end gap-3\">\n                <button onClick={closeDelete} className=\"px-5 py-2 rounded-xl bg-white border border-gray-200 text-gray-600 font-bold text-sm hover:bg-gray-50\">取消</button>\n                <button onClick={confirmDelete} className=\"px-5 py-2 rounded-xl bg-red-500 text-white font-bold text-sm shadow-sm hover:bg-red-600\">确认删除</button>\n              </div>\n            </div>\n          </div>\n        </>\n      )}\n    </div>\n  );\n};\n\nconst CharacterManagement = ({ creatorRole }) => (\n  <ToastProvider>\n    <CharacterManagementInner creatorRole={creatorRole} />\n  </ToastProvider>\n);\n\nexport default CharacterManagement;\n"],"names":["__iconNode","RefreshCw","createLucideIcon","WandSparkles","readFile","file","resolve","reader","createImage","url","reject","image","error","AvatarEditor","initialImage","onSave","onCancel","currentStep","setCurrentStep","useState","avatarUrl","setAvatarUrl","tempImage","setTempImage","handleFileChange","e","imageDataUrl","handleSaveCrop","croppedImageUrl","jsxs","jsx","Header","MainView","UploadView","EditView","step","onBack","onClose","title","ChevronLeft","X","onChangeClick","onRemoveClick","Pencil","Trash2","onFileChange","isDragging","setIsDragging","fileInputRef","useRef","handleDragOver","handleDragLeave","handleDrop","UploadCloud","imageSrc","canvasRef","imageObj","setImageObj","saving","setSaving","rotation","setRotation","offset","setOffset","dragStart","setDragStart","baseScale","setBaseScale","zoom","setZoom","CANVAS_SIZE","VIEWPORT_SIZE","useEffect","img","scaleX","scaleY","initScale","handleWheel","delta","prev","draw","useCallback","ctx","rad","localX","localY","currentScale","imgWidth","imgHeight","centerX","centerY","viewportOffset","handleMouseDown","rect","x","y","handleMouseMove","clientX","clientY","dx","dy","handleMouseUp","handleRotate","handleFinalSave","tempCanvas","size","tCtx","blob","b","result","uploadAPI","RotateCw","ZoomOut","ZoomIn","CharacterCreateView","initialData","mode","notify","formData","setFormData","RELATIONSHIP_PRESETS","isCustomRel","setIsCustomRel","showAdvanced","setShowAdvanced","isPresetRel","setSelectedPromptModel","setPromptTemperature","setSelectedSceneModel","setSceneTemperature","isGeneratingMain","setIsGeneratingMain","isGeneratingScene","setIsGeneratingScene","showAvatarEditor","setShowAvatarEditor","tagInput","setTagInput","isDropdownOpenScene","setIsDropdownOpenScene","dropdownRefScene","isModelOpenMain","setIsModelOpenMain","isModelOpenScene","setIsModelOpenScene","modelRefMain","modelRefScene","selectedPromptModel","selectedSceneModel","promptTemperature","sceneTemperature","modelList","setModelList","showTagModal","setShowTagModal","customTagInput","setCustomTagInput","tplList","setTplList","tplLoading","setTplLoading","availableTags","onDocClick","onKey","data","modelsAPI","sortKey","m","mt","a","templatesAPI","getModelDisplay","id","selectedTemplateNameScene","_a","openTplDropdownScene","handleGeneratePrompt","payload","resp","syspromptAPI","handleTemplateSelectScene","handleRelSelect","rel","handleCustomRelSelect","handleStyleExampleChange","index","value","newExamples","charactersAPI","Save","g","tag","t","Info","ChevronDown","idx","HelpCircle","tpl","selectedTemplate","Wand2","FileText","Fragment","val","dataUrl","p","newAvatar","CharacterManagementInner","creatorRole","view","setView","editingChar","setEditingChar","characterList","setCharacterList","setMode","showToast","useToast","deleteTarget","setDeleteTarget","TAG_MAX_W","reload","params","d","handleEdit","char","handleCreateNew","handleCopy","copiedChar","handleToggleStatus","current","openDelete","closeDelete","confirmDelete","Plus","Edit3","Copy","Archive","Send","CharacterManagement","ToastProvider"],"mappings":"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","x_google_ignoreList":[0,1]}