{"version":3,"file":"AdminDashboard-COqpRzN_.js","sources":["../../node_modules/lucide-react/dist/esm/icons/archive.js","../../node_modules/lucide-react/dist/esm/icons/bot.js","../../node_modules/lucide-react/dist/esm/icons/circle-question-mark.js","../../node_modules/lucide-react/dist/esm/icons/cloud-upload.js","../../node_modules/lucide-react/dist/esm/icons/copy.js","../../node_modules/lucide-react/dist/esm/icons/database.js","../../node_modules/lucide-react/dist/esm/icons/file-text.js","../../node_modules/lucide-react/dist/esm/icons/pen-line.js","../../node_modules/lucide-react/dist/esm/icons/refresh-cw.js","../../node_modules/lucide-react/dist/esm/icons/rotate-cw.js","../../node_modules/lucide-react/dist/esm/icons/save.js","../../node_modules/lucide-react/dist/esm/icons/search.js","../../node_modules/lucide-react/dist/esm/icons/settings.js","../../node_modules/lucide-react/dist/esm/icons/shield.js","../../node_modules/lucide-react/dist/esm/icons/sparkles.js","../../node_modules/lucide-react/dist/esm/icons/star.js","../../node_modules/lucide-react/dist/esm/icons/user-cog.js","../../node_modules/lucide-react/dist/esm/icons/users.js","../../node_modules/lucide-react/dist/esm/icons/wand-sparkles.js","../../node_modules/lucide-react/dist/esm/icons/zoom-in.js","../../node_modules/lucide-react/dist/esm/icons/zoom-out.js","../../admin/api.js","../../admin/components/StyleInjector.jsx","../../admin/Toast.jsx","../../admin/components/LoginPage.jsx","../../admin/components/Sidebar.jsx","../../admin/templates/TemplateCreateView.jsx","../../admin/templates/TemplatesView.jsx","../../admin/components/AvatarEditor.jsx","../../admin/characters/CharacterCreateView.jsx","../../admin/characters/CharacterManagement.jsx","../../admin/users/UserRow.jsx","../../admin/users/UserCreateView.jsx","../../admin/users/UsersView.jsx","../../admin/settings/ModelSettingsView.jsx","../../admin/settings/ModelManageView.jsx","../../admin/settings/AdminAccountsView.jsx","../../admin/components/CoverEditor.jsx","../../admin/story/StoryCreateView.jsx","../../admin/story/StoryManagement.jsx","../../admin/AdminDashboard.jsx"],"sourcesContent":["/**\n * @license lucide-react v0.555.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"rect\", { width: \"20\", height: \"5\", x: \"2\", y: \"3\", rx: \"1\", key: \"1wp1u1\" }],\n  [\"path\", { d: \"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8\", key: \"1s80jp\" }],\n  [\"path\", { d: \"M10 12h4\", key: \"a56b0p\" }]\n];\nconst Archive = createLucideIcon(\"archive\", __iconNode);\n\nexport { __iconNode, Archive as default };\n//# sourceMappingURL=archive.js.map\n","/**\n * @license lucide-react v0.555.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M12 8V4H8\", key: \"hb8ula\" }],\n  [\"rect\", { width: \"16\", height: \"12\", x: \"4\", y: \"8\", rx: \"2\", key: \"enze0r\" }],\n  [\"path\", { d: \"M2 14h2\", key: \"vft8re\" }],\n  [\"path\", { d: \"M20 14h2\", key: \"4cs60a\" }],\n  [\"path\", { d: \"M15 13v2\", key: \"1xurst\" }],\n  [\"path\", { d: \"M9 13v2\", key: \"rq6x2g\" }]\n];\nconst Bot = createLucideIcon(\"bot\", __iconNode);\n\nexport { __iconNode, Bot as default };\n//# sourceMappingURL=bot.js.map\n","/**\n * @license lucide-react v0.555.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"path\", { d: \"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3\", key: \"1u773s\" }],\n  [\"path\", { d: \"M12 17h.01\", key: \"p32p05\" }]\n];\nconst CircleQuestionMark = createLucideIcon(\"circle-question-mark\", __iconNode);\n\nexport { __iconNode, CircleQuestionMark as default };\n//# sourceMappingURL=circle-question-mark.js.map\n","/**\n * @license lucide-react v0.555.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M12 13v8\", key: \"1l5pq0\" }],\n  [\"path\", { d: \"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242\", key: \"1pljnt\" }],\n  [\"path\", { d: \"m8 17 4-4 4 4\", key: \"1quai1\" }]\n];\nconst CloudUpload = createLucideIcon(\"cloud-upload\", __iconNode);\n\nexport { __iconNode, CloudUpload as default };\n//# sourceMappingURL=cloud-upload.js.map\n","/**\n * @license lucide-react v0.555.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"rect\", { width: \"14\", height: \"14\", x: \"8\", y: \"8\", rx: \"2\", ry: \"2\", key: \"17jyea\" }],\n  [\"path\", { d: \"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2\", key: \"zix9uf\" }]\n];\nconst Copy = createLucideIcon(\"copy\", __iconNode);\n\nexport { __iconNode, Copy as default };\n//# sourceMappingURL=copy.js.map\n","/**\n * @license lucide-react v0.555.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"ellipse\", { cx: \"12\", cy: \"5\", rx: \"9\", ry: \"3\", key: \"msslwz\" }],\n  [\"path\", { d: \"M3 5V19A9 3 0 0 0 21 19V5\", key: \"1wlel7\" }],\n  [\"path\", { d: \"M3 12A9 3 0 0 0 21 12\", key: \"mv7ke4\" }]\n];\nconst Database = createLucideIcon(\"database\", __iconNode);\n\nexport { __iconNode, Database as default };\n//# sourceMappingURL=database.js.map\n","/**\n * @license lucide-react v0.555.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z\",\n      key: \"1oefj6\"\n    }\n  ],\n  [\"path\", { d: \"M14 2v5a1 1 0 0 0 1 1h5\", key: \"wfsgrz\" }],\n  [\"path\", { d: \"M10 9H8\", key: \"b1mrlr\" }],\n  [\"path\", { d: \"M16 13H8\", key: \"t4e002\" }],\n  [\"path\", { d: \"M16 17H8\", key: \"z1uh3a\" }]\n];\nconst FileText = createLucideIcon(\"file-text\", __iconNode);\n\nexport { __iconNode, FileText as default };\n//# sourceMappingURL=file-text.js.map\n","/**\n * @license lucide-react v0.555.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M13 21h8\", key: \"1jsn5i\" }],\n  [\n    \"path\",\n    {\n      d: \"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z\",\n      key: \"1a8usu\"\n    }\n  ]\n];\nconst PenLine = createLucideIcon(\"pen-line\", __iconNode);\n\nexport { __iconNode, PenLine as default };\n//# sourceMappingURL=pen-line.js.map\n","/**\n * @license lucide-react v0.555.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8\", key: \"v9h5vc\" }],\n  [\"path\", { d: \"M21 3v5h-5\", key: \"1q7to0\" }],\n  [\"path\", { d: \"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16\", key: \"3uifl3\" }],\n  [\"path\", { d: \"M8 16H3v5\", key: \"1cv678\" }]\n];\nconst RefreshCw = createLucideIcon(\"refresh-cw\", __iconNode);\n\nexport { __iconNode, RefreshCw as default };\n//# sourceMappingURL=refresh-cw.js.map\n","/**\n * @license lucide-react v0.555.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8\", key: \"1p45f6\" }],\n  [\"path\", { d: \"M21 3v5h-5\", key: \"1q7to0\" }]\n];\nconst RotateCw = createLucideIcon(\"rotate-cw\", __iconNode);\n\nexport { __iconNode, RotateCw as default };\n//# sourceMappingURL=rotate-cw.js.map\n","/**\n * @license lucide-react v0.555.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z\",\n      key: \"1c8476\"\n    }\n  ],\n  [\"path\", { d: \"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7\", key: \"1ydtos\" }],\n  [\"path\", { d: \"M7 3v4a1 1 0 0 0 1 1h7\", key: \"t51u73\" }]\n];\nconst Save = createLucideIcon(\"save\", __iconNode);\n\nexport { __iconNode, Save as default };\n//# sourceMappingURL=save.js.map\n","/**\n * @license lucide-react v0.555.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"m21 21-4.34-4.34\", key: \"14j7rj\" }],\n  [\"circle\", { cx: \"11\", cy: \"11\", r: \"8\", key: \"4ej97u\" }]\n];\nconst Search = createLucideIcon(\"search\", __iconNode);\n\nexport { __iconNode, Search as default };\n//# sourceMappingURL=search.js.map\n","/**\n * @license lucide-react v0.555.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915\",\n      key: \"1i5ecw\"\n    }\n  ],\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"3\", key: \"1v7zrd\" }]\n];\nconst Settings = createLucideIcon(\"settings\", __iconNode);\n\nexport { __iconNode, Settings as default };\n//# sourceMappingURL=settings.js.map\n","/**\n * @license lucide-react v0.555.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z\",\n      key: \"oel41y\"\n    }\n  ]\n];\nconst Shield = createLucideIcon(\"shield\", __iconNode);\n\nexport { __iconNode, Shield as default };\n//# sourceMappingURL=shield.js.map\n","/**\n * @license lucide-react v0.555.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z\",\n      key: \"1s2grr\"\n    }\n  ],\n  [\"path\", { d: \"M20 2v4\", key: \"1rf3ol\" }],\n  [\"path\", { d: \"M22 4h-4\", key: \"gwowj6\" }],\n  [\"circle\", { cx: \"4\", cy: \"20\", r: \"2\", key: \"6kqj1y\" }]\n];\nconst Sparkles = createLucideIcon(\"sparkles\", __iconNode);\n\nexport { __iconNode, Sparkles as default };\n//# sourceMappingURL=sparkles.js.map\n","/**\n * @license lucide-react v0.555.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z\",\n      key: \"r04s7s\"\n    }\n  ]\n];\nconst Star = createLucideIcon(\"star\", __iconNode);\n\nexport { __iconNode, Star as default };\n//# sourceMappingURL=star.js.map\n","/**\n * @license lucide-react v0.555.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M10 15H6a4 4 0 0 0-4 4v2\", key: \"1nfge6\" }],\n  [\"path\", { d: \"m14.305 16.53.923-.382\", key: \"1itpsq\" }],\n  [\"path\", { d: \"m15.228 13.852-.923-.383\", key: \"eplpkm\" }],\n  [\"path\", { d: \"m16.852 12.228-.383-.923\", key: \"13v3q0\" }],\n  [\"path\", { d: \"m16.852 17.772-.383.924\", key: \"1i8mnm\" }],\n  [\"path\", { d: \"m19.148 12.228.383-.923\", key: \"1q8j1v\" }],\n  [\"path\", { d: \"m19.53 18.696-.382-.924\", key: \"vk1qj3\" }],\n  [\"path\", { d: \"m20.772 13.852.924-.383\", key: \"n880s0\" }],\n  [\"path\", { d: \"m20.772 16.148.924.383\", key: \"1g6xey\" }],\n  [\"circle\", { cx: \"18\", cy: \"15\", r: \"3\", key: \"gjjjvw\" }],\n  [\"circle\", { cx: \"9\", cy: \"7\", r: \"4\", key: \"nufk8\" }]\n];\nconst UserCog = createLucideIcon(\"user-cog\", __iconNode);\n\nexport { __iconNode, UserCog as default };\n//# sourceMappingURL=user-cog.js.map\n","/**\n * @license lucide-react v0.555.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2\", key: \"1yyitq\" }],\n  [\"path\", { d: \"M16 3.128a4 4 0 0 1 0 7.744\", key: \"16gr8j\" }],\n  [\"path\", { d: \"M22 21v-2a4 4 0 0 0-3-3.87\", key: \"kshegd\" }],\n  [\"circle\", { cx: \"9\", cy: \"7\", r: \"4\", key: \"nufk8\" }]\n];\nconst Users = createLucideIcon(\"users\", __iconNode);\n\nexport { __iconNode, Users as default };\n//# sourceMappingURL=users.js.map\n","/**\n * @license lucide-react v0.555.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72\",\n      key: \"ul74o6\"\n    }\n  ],\n  [\"path\", { d: \"m14 7 3 3\", key: \"1r5n42\" }],\n  [\"path\", { d: \"M5 6v4\", key: \"ilb8ba\" }],\n  [\"path\", { d: \"M19 14v4\", key: \"blhpug\" }],\n  [\"path\", { d: \"M10 2v2\", key: \"7u0qdc\" }],\n  [\"path\", { d: \"M7 8H3\", key: \"zfb6yr\" }],\n  [\"path\", { d: \"M21 16h-4\", key: \"1cnmox\" }],\n  [\"path\", { d: \"M11 3H9\", key: \"1obp7u\" }]\n];\nconst WandSparkles = createLucideIcon(\"wand-sparkles\", __iconNode);\n\nexport { __iconNode, WandSparkles as default };\n//# sourceMappingURL=wand-sparkles.js.map\n","/**\n * @license lucide-react v0.555.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"circle\", { cx: \"11\", cy: \"11\", r: \"8\", key: \"4ej97u\" }],\n  [\"line\", { x1: \"21\", x2: \"16.65\", y1: \"21\", y2: \"16.65\", key: \"13gj7c\" }],\n  [\"line\", { x1: \"11\", x2: \"11\", y1: \"8\", y2: \"14\", key: \"1vmskp\" }],\n  [\"line\", { x1: \"8\", x2: \"14\", y1: \"11\", y2: \"11\", key: \"durymu\" }]\n];\nconst ZoomIn = createLucideIcon(\"zoom-in\", __iconNode);\n\nexport { __iconNode, ZoomIn as default };\n//# sourceMappingURL=zoom-in.js.map\n","/**\n * @license lucide-react v0.555.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"circle\", { cx: \"11\", cy: \"11\", r: \"8\", key: \"4ej97u\" }],\n  [\"line\", { x1: \"21\", x2: \"16.65\", y1: \"21\", y2: \"16.65\", key: \"13gj7c\" }],\n  [\"line\", { x1: \"8\", x2: \"14\", y1: \"11\", y2: \"11\", key: \"durymu\" }]\n];\nconst ZoomOut = createLucideIcon(\"zoom-out\", __iconNode);\n\nexport { __iconNode, ZoomOut as default };\n//# sourceMappingURL=zoom-out.js.map\n","export const BASE_URL = '/api/admin';\n\nconst getToken = () => localStorage.getItem('admin_access_token') || '';\nconst getRefresh = () => localStorage.getItem('admin_refresh_token') || '';\nconst saveTokens = (access, refresh) => {\n  if (access) localStorage.setItem('admin_access_token', access);\n  if (refresh) localStorage.setItem('admin_refresh_token', refresh);\n};\nconst logout = () => {\n  localStorage.removeItem('admin_access_token');\n  localStorage.removeItem('admin_refresh_token');\n  const url = '/super-admin/login';\n  if (typeof window !== 'undefined' && window.location) {\n    if (typeof window.location.replace === 'function') {\n      window.location.replace(url);\n    } else {\n      window.location.href = url;\n    }\n  }\n};\n\nconst authHeaders = () => ({\n  'Authorization': `Bearer ${getToken()}`,\n});\n\nlet refreshingPromise = null;\nconst refreshOnce = async () => {\n  const rt = getRefresh();\n  if (!rt) { logout(); throw new Error('unauthorized'); }\n  const r = await fetch(`${BASE_URL}/refresh`, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ refresh_token: rt }) });\n  if (!r.ok) { logout(); throw new Error('refresh_failed'); }\n  const data = await r.json();\n  saveTokens(data.access_token, data.refresh_token);\n  return data;\n};\n\nconst request = async (path, options = {}) => {\n  const opts = { ...options };\n  const isFormData = typeof FormData !== 'undefined' && opts.body instanceof FormData;\n  const baseHeaders = authHeaders();\n  const jsonHeader = isFormData ? {} : { 'Content-Type': 'application/json' };\n  opts.headers = { ...(opts.headers || {}), ...jsonHeader, ...baseHeaders };\n  let res = await fetch(`${BASE_URL}${path}`, opts);\n  if (res.status === 401) {\n    if (!refreshingPromise) refreshingPromise = refreshOnce();\n    try {\n      await refreshingPromise;\n    } finally {\n      refreshingPromise = null;\n    }\n    const baseHeaders2 = authHeaders();\n    const jsonHeader2 = isFormData ? {} : { 'Content-Type': 'application/json' };\n    opts.headers = { ...(opts.headers || {}), ...jsonHeader2, ...baseHeaders2 };\n    res = await fetch(`${BASE_URL}${path}`, opts);\n    if (res.status === 401) { logout(); throw new Error('unauthorized'); }\n  }\n  if (!res.ok) throw new Error('failed');\n  if (!res.ok) {\n    let body = '';\n    try { body = await res.text(); } catch {}\n    console.error('[admin.api.request] failed', { path, status: res.status, body });\n    throw new Error('failed');\n  }\n  return res.json();\n};\n\nexport const templatesAPI = {\n  async list() { return request('/templates'); },\n  async create(payload) { return request('/templates', { method: 'POST', body: JSON.stringify(payload) }); },\n  async update(id, payload) { return request(`/templates/${id}`, { method: 'PUT', body: JSON.stringify(payload) }); },\n  async remove(id) { return request(`/templates/${id}`, { method: 'DELETE' }); },\n  async copy(id) { return request(`/templates/${id}/copy`, { method: 'POST' }); },\n  async setDefault(id) { return request(`/templates/${id}/default`, { method: 'POST' }); },\n};\n\nexport const charactersAPI = {\n  async list(params) {\n    const qs = params ? '?' + new URLSearchParams(params).toString() : '';\n    return request(`/characters${qs}`);\n  },\n  async get(id) { return request(`/characters/${id}`); },\n  async create(payload) { return request('/characters', { method: 'POST', body: JSON.stringify(payload) }); },\n  async update(id, payload) { return request(`/characters/${id}`, { method: 'PUT', body: JSON.stringify(payload) }); },\n  async remove(id) { return request(`/characters/${id}`, { method: 'DELETE' }); },\n  async setStatus(id, status) { return request(`/characters/${id}/status`, { method: 'POST', body: JSON.stringify({ status }) }); },\n};\n\nexport const modelsAPI = {\n  async list() { return request('/models'); },\n  async create(payload) { return request('/models', { method: 'POST', body: JSON.stringify(payload) }); },\n  async remove(id) { return request(`/models/${id}`, { method: 'DELETE' }); },\n};\n\nexport const settingsAPI = {\n  async get() { return request('/settings'); },\n  async save(payload) { return request('/settings', { method: 'PUT', body: JSON.stringify(payload) }); },\n};\n\nexport const storiesAPI = {\n  async list() { return request('/stories'); },\n  async get(id) { return request(`/stories/${id}`); },\n  async create(payload) { return request('/stories', { method: 'POST', body: JSON.stringify(payload) }); },\n  async update(id, payload) { return request(`/stories/${id}`, { method: 'PUT', body: JSON.stringify(payload) }); },\n  async remove(id) { return request(`/stories/${id}`, { method: 'DELETE' }); },\n  async setStatus(id, status) { return request(`/stories/${id}/status`, { method: 'POST', body: JSON.stringify({ status }) }); },\n};\n\nexport const syspromptAPI = {\n  async generate(payload) {\n    return request('/sysprompt/generate', { method: 'POST', body: JSON.stringify(payload) });\n  },\n  async generateNoScene(payload) {\n    return request('/sysprompt/generate-noscene', { method: 'POST', body: JSON.stringify(payload) });\n  },\n};\n\nexport const uploadAPI = {\n  async avatar(file) {\n    const fd = new FormData();\n    fd.append('avatar', file);\n    return request('/uploads/avatar', { method: 'POST', body: fd });\n  },\n  async cover(file) {\n    const fd = new FormData();\n    fd.append('cover', file);\n    return request('/uploads/cover', { method: 'POST', body: fd });\n  },\n};\n\nexport const usersAPI = {\n  async list(q) {\n    const qs = q ? `?q=${encodeURIComponent(q)}` : '';\n    return request(`/users${qs}`);\n  },\n  async create({ username, nickname, email, password, chatLimit }) {\n    return request('/users', { method: 'POST', body: JSON.stringify({ username, nickname, email, password, chatLimit }) });\n  },\n  async update(id, payload) {\n    return request(`/users/${id}`, { method: 'PUT', body: JSON.stringify(payload) });\n  },\n  async remove(id) {\n    return request(`/users/${id}`, { method: 'DELETE' });\n  },\n  async changePassword(id, password) {\n    return request(`/users/${id}/password`, { method: 'POST', body: JSON.stringify({ password }) });\n  },\n};\n\nexport const adminsAPI = {\n  async list(q) {\n    const qs = q ? `?q=${encodeURIComponent(q)}` : '';\n    return request(`/admins${qs}`);\n  },\n  async create({ username, email, password }) {\n    return request('/admins', { method: 'POST', body: JSON.stringify({ username, email, password }) });\n  },\n  async update(id, payload) {\n    return request(`/admins/${id}`, { method: 'PUT', body: JSON.stringify(payload) });\n  },\n  async remove(id) {\n    return request(`/admins/${id}`, { method: 'DELETE' });\n  },\n  async changePassword(id, password) {\n    return request(`/admins/${id}/password`, { method: 'POST', body: JSON.stringify({ password }) });\n  },\n  async getMyAvatar() {\n    return request('/admins/me/avatar');\n  },\n  async updateMe(payload) {\n    return request('/admins/me', { method: 'PUT', body: JSON.stringify(payload) });\n  },\n};\n","import React from 'react';\n\nconst StyleInjector = () => (\n  <style>{`\n    @import url('https://fonts.googleapis.com/css2?family=ZCOOL+KuaiLe&family=Varela+Round&display=swap');\n    body { font-family: 'Varela Round', 'PingFang SC', sans-serif; background-color: #FFFFFF; color: #4A4060; }\n    .font-cute { font-family: 'ZCOOL KuaiLe', cursive; }\n    .glass-card { background: rgba(255, 255, 255, 0.7); backdrop-filter: blur(12px); border: 1px solid rgba(255, 255, 255, 0.9); box-shadow: 0 8px 30px rgba(236, 72, 153, 0.08); }\n    .solid-card { background: #FFFFFF; border: 1px solid #FCE7F3; box-shadow: 0 4px 20px rgba(236, 72, 153, 0.05); }\n    .glass-nav { background: rgba(255, 255, 255, 0.85); backdrop-filter: blur(20px); border-right: 1px solid rgba(255, 255, 255, 0.5); }\n    .dream-input { background: rgba(255, 255, 255, 0.6); border: 2px solid #FCE7F3; transition: all 0.3s ease; color: #5D5476; }\n    .dream-input:focus { background: #FFFFFF; border-color: #F472B6; outline: none; box-shadow: 0 0 0 4px rgba(244, 114, 182, 0.15); }\n    .tag-pill { background: linear-gradient(135deg, #FBCFE8 0%, #FCE7F3 100%); color: #BE185D; font-weight: 700; font-size: 0.75rem; border-radius: 8px; }\n    .tag-select-btn { background: #FCE7F3; color: #BE185D; border: 1px solid transparent; border-radius: 20px; font-weight: bold; font-size: 0.85rem; padding: 8px 10px; transition: all 0.2s; white-space: nowrap; }\n    .tag-select-btn.active { background: #EC4899; color: white; border-color: #DB2777; box-shadow: 0 4px 12px rgba(236, 72, 153, 0.3); }\n    .ambient-bg { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; background: radial-gradient(at 0% 0%, hsla(330, 70%, 98%, 1) 0, transparent 50%), radial-gradient(at 50% 100%, hsla(330, 85%, 95%, 1) 0, transparent 50%), radial-gradient(at 100% 0%, hsla(330, 80%, 97%, 1) 0, transparent 50%); background-size: 200% 200%; animation: gradientMove 15s ease infinite; }\n    @keyframes gradientMove { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }\n    ::-webkit-scrollbar { width: 6px; height: 6px; }\n    ::-webkit-scrollbar-track { background: rgba(0,0,0,0.02); }\n    ::-webkit-scrollbar-thumb { background: #FBCFE8; border-radius: 3px; }\n    ::-webkit-scrollbar-thumb:hover { background: #F472B6; }\n    .glass-card p, .glass-card h4, .glass-card li, .glass-card ul { color: #4A4060; }\n    .solid-card p, .solid-card h4, .solid-card li, .solid-card ul { color: #4A4060; }\n  `}</style>\n);\n\nexport default StyleInjector;\n","import React, { createContext, useContext, useState, useCallback } from 'react';\n\nconst ToastContext = createContext(null);\n\nexport const useToast = () => useContext(ToastContext);\n\nexport const ToastProvider = ({ children }) => {\n  const [toasts, setToasts] = useState([]);\n  const showToast = useCallback((message, type = 'success') => {\n    const id = Date.now() + Math.random();\n    setToasts((prev) => [...prev, { id, message, type }]);\n    setTimeout(() => {\n      setToasts((prev) => prev.filter((t) => t.id !== id));\n    }, 3000);\n  }, []);\n\n  return (\n    <ToastContext.Provider value={{ showToast }}>\n      {children}\n      <div className=\"fixed top-6 left-64 right-0 z-50 flex flex-col items-center gap-3 pointer-events-none\">\n        {toasts.map((t) => (\n          <div\n            key={t.id}\n            className={`pointer-events-auto flex items-center justify-center text-center px-4 py-2 rounded-2xl shadow-xl border max-w-[480px] min-w-[180px] mx-auto ${\n              t.type === 'success' ? 'bg-white border-green-200 text-green-700' : 'bg-white border-red-200 text-red-700'\n            }`}\n          >\n            {t.message}\n          </div>\n        ))}\n      </div>\n    </ToastContext.Provider>\n  );\n};\n","import React, { useState } from 'react';\nimport { BASE_URL } from '../api.js';\nimport { Sparkles, LogOut } from 'lucide-react';\nimport { useToast } from '../Toast.jsx';\n\nconst LoginPage = ({ onLogin }) => {\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const { showToast } = useToast();\n  const handleLogin = async () => {\n    try {\n      const r = await fetch(`${BASE_URL}/crypto/public-key`);\n      const pem = await r.text();\n      const b64 = pem.replace(/-----BEGIN PUBLIC KEY-----/, '').replace(/-----END PUBLIC KEY-----/, '').replace(/\\s+/g, '');\n      const bin = Uint8Array.from(atob(b64), c => c.charCodeAt(0));\n      const key = await window.crypto.subtle.importKey('spki', bin.buffer, { name: 'RSA-OAEP', hash: 'SHA-256' }, false, ['encrypt']);\n      const enc = await window.crypto.subtle.encrypt({ name: 'RSA-OAEP' }, key, new TextEncoder().encode(password));\n      const encB64 = btoa(String.fromCharCode(...new Uint8Array(enc)));\n      const res = await fetch(`${BASE_URL}/login`, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ username, password_encrypted: encB64 }) });\n      if (!res.ok) { showToast('登录失败', 'error'); return; }\n      const data = await res.json();\n      if (data?.access_token) localStorage.setItem('admin_access_token', data.access_token);\n      if (data?.refresh_token) localStorage.setItem('admin_refresh_token', data.refresh_token);\n      localStorage.setItem('admin_username', username);\n      onLogin();\n    } catch {\n      showToast('登录失败', 'error');\n    }\n  };\n  return (\n    <div className=\"min-h-screen flex items-center justify-center relative overflow-hidden\" onKeyDown={(e) => { if (e.key === 'Enter') handleLogin(); }}>\n      <div className=\"ambient-bg\"></div>\n      <div className=\"glass-card p-10 rounded-3xl w-full max-w-md shadow-2xl transform transition-all hover:scale-[1.01]\">\n        <div className=\"text-center mb-8\">\n          <div className=\"inline-flex items-center justify-center w-16 h-16 rounded-full bg-pink-100 text-pink-600 mb-4 shadow-inner\">\n            <Sparkles size={32} />\n          </div>\n          <h1 className=\"text-3xl font-cute text-pink-900 mb-2\">YumeCrush</h1>\n          <p className=\"text-pink-400 text-sm\">运营管理平台</p>\n        </div>\n        <div className=\"space-y-5\">\n          <div>\n            <label className=\"block text-sm font-bold text-pink-800 mb-2 ml-1\">管理员账号</label>\n            <input type=\"text\" placeholder=\"请输入管理员账号\" value={username} onChange={e => setUsername(e.target.value)} className=\"dream-input w-full px-4 py-3 rounded-2xl\" />\n          </div>\n          <div>\n            <label className=\"block text-sm font-bold text-pink-800 mb-2 ml-1\">密码</label>\n            <input type=\"password\" placeholder=\"••••••••\" value={password} onChange={e => setPassword(e.target.value)} className=\"dream-input w-full px-4 py-3 rounded-2xl\" />\n          </div>\n          <button onClick={handleLogin} className=\"w-full bg-gradient-to-r from-pink-500 to-pink-600 hover:from-pink-600 hover:to-pink-700 text-white font-bold py-3.5 rounded-2xl shadow-lg shadow-pink-200 transition-all transform active:scale-95 flex items-center justify-center gap-2\">\n            <LogOut size={18} className=\"rotate-180\" /> 登录后台\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default LoginPage;\n","import React, { useState, useEffect } from 'react';\nimport { adminsAPI } from '../api.js';\nimport { Sparkles, LogOut, FileText, Users, UserCog, Settings, ChevronDown, ChevronRight, Bot, User, Cpu, Database, Shield } from 'lucide-react';\n\nconst Sidebar = ({ activeTab, setActiveTab, onLogout, username, onEditProfile }) => {\n  const [expandedMenus, setExpandedMenus] = useState(['characters', 'settings']);\n\n  const menuItems = [\n    { id: 'stories', label: '故事管理', icon: FileText },\n    { id: 'templates', label: '提示词模版', icon: FileText },\n    {\n      id: 'characters',\n      label: '角色管理',\n      icon: Users,\n      subItems: [\n        { id: 'official_characters', label: '官方角色', icon: Bot },\n        { id: 'user_characters', label: '用户角色', icon: User },\n      ]\n    },\n    { id: 'users', label: '用户管理', icon: UserCog },\n    {\n      id: 'settings',\n      label: '系统设置',\n      icon: Settings,\n      subItems: [\n        { id: 'model_settings', label: '模型设置', icon: Cpu },\n        ...(username === 'admin' ? [\n          { id: 'model_manage', label: '模型管理', icon: Database },\n          { id: 'admin_accounts', label: '管理员账号', icon: Shield },\n        ] : [])\n      ]\n    },\n  ];\n\n  // Ensure the submenu containing the active tab is always expanded\n  useEffect(() => {\n    const activeParent = menuItems.find(item =>\n      item.subItems?.some(sub => sub.id === activeTab)\n    );\n\n    if (activeParent) {\n      setExpandedMenus(prev => {\n        if (!prev.includes(activeParent.id)) {\n          return [...prev, activeParent.id];\n        }\n        return prev;\n      });\n    }\n  }, [activeTab]);\n\n  const toggleMenu = (id) => {\n    setExpandedMenus(prev => prev.includes(id) ? prev.filter(x => x !== id) : [...prev, id]);\n  };\n\n  const handleMouseEnter = (id) => {\n    setExpandedMenus(prev => {\n      if (!prev.includes(id)) {\n        return [...prev, id];\n      }\n      return prev;\n    });\n  };\n\n  const handleMouseLeave = (id) => {\n    // Check if this menu contains the active tab\n    const item = menuItems.find(i => i.id === id);\n    const hasActiveSubItem = item?.subItems?.some(sub => sub.id === activeTab);\n\n    // If it doesn't contain the active tab, collapse it\n    if (!hasActiveSubItem) {\n      setExpandedMenus(prev => prev.filter(x => x !== id));\n    }\n  };\n\n  const handleItemClick = (item) => {\n    if (item.subItems) {\n      toggleMenu(item.id);\n    } else {\n      setActiveTab(item.id);\n      // When clicking a top-level item, collapse others but keep the active one if it was a submenu?\n      // Requirement: \"When clicking on other first-level directories, default expanded secondary directories will be put away\"\n      // Requirement: \"When right side page belongs to a secondary directory, the secondary directory will not be put away\"\n      // If we are switching TO a top-level item, the \"right side page\" is NO LONGER a secondary directory.\n      // So we can collapse everything.\n      setExpandedMenus([]);\n    }\n  };\n\n  const [showEdit, setShowEdit] = useState(false);\n  const [newNickname, setNewNickname] = useState('');\n  const [pwd1, setPwd1] = useState('');\n  const [pwd2, setPwd2] = useState('');\n  const submitEdit = async () => {\n    const payload = {};\n    if (newNickname && newNickname.trim()) payload.nickname = newNickname.trim();\n    if (pwd1) {\n      if (pwd1 !== pwd2) return;\n      payload.password = pwd1;\n    }\n    try { await adminsAPI.updateMe(payload); setShowEdit(false); setNewNickname(''); setPwd1(''); setPwd2(''); } catch {}\n  };\n  return (\n    <div className=\"w-16 xl:w-56 glass-nav h-screen fixed left-0 top-0 flex flex-col z-20 transition-all duration-300\" style={{ backgroundColor: '#f4f6fb' }}>\n      <div className=\"p-4 xl:p-8 flex items-center justify-center xl:justify-start gap-3\">\n        <div className=\"w-8 h-8 bg-pink-500 rounded-lg flex items-center justify-center text-white flex-shrink-0\">\n          <Sparkles size={18} />\n        </div>\n        <span className=\"text-xl font-cute text-pink-900 tracking-wide hidden xl:block\">YumeCrush Admin</span>\n      </div>\n      <nav className=\"flex-1 px-4 space-y-2\">\n        {menuItems.map((item) => (\n          <div\n            key={item.id}\n            onMouseEnter={() => item.subItems && handleMouseEnter(item.id)}\n            onMouseLeave={() => item.subItems && handleMouseLeave(item.id)}\n          >\n            <button\n              onClick={() => handleItemClick(item)}\n              className={`w-full flex items-center justify-center xl:justify-start gap-3 px-2 xl:px-4 py-3.5 rounded-2xl transition-all duration-300 font-bold text-sm ${(activeTab === item.id || (item.subItems && item.subItems.some(sub => sub.id === activeTab)))\n                ? 'bg-pink-100 text-pink-700 shadow-sm'\n                : 'text-gray-500 hover:bg-white/50 hover:text-pink-600'\n                }`}\n            >\n              <item.icon size={18} className=\"flex-shrink-0\" />\n              <span className=\"hidden xl:block flex-1 text-left\">{item.label}</span>\n              {item.subItems && (\n                <span className=\"hidden xl:block transition-transform duration-300\">\n                  {expandedMenus.includes(item.id) ? <ChevronDown size={14} /> : <ChevronRight size={14} />}\n                </span>\n              )}\n            </button>\n\n            {/* Elastic/Smooth Animation Container */}\n            {item.subItems && (\n              <div\n                className={`grid transition-all duration-300 ease-in-out ${expandedMenus.includes(item.id)\n                  ? 'grid-rows-[1fr] opacity-100'\n                  : 'grid-rows-[0fr] opacity-0'\n                  }`}\n              >\n                <div className=\"overflow-hidden\">\n                  <div className=\"mt-1 space-y-1 xl:pl-4\">\n                    {item.subItems.map((sub) => (\n                      <button\n                        key={sub.id}\n                        onClick={(e) => {\n                          e.stopPropagation();\n                          setActiveTab(sub.id);\n                        }}\n                        className={`w-full flex items-center justify-center xl:justify-start gap-2 px-2 xl:px-4 py-2.5 rounded-xl transition-all duration-300 text-xs font-bold ${activeTab === sub.id\n                          ? 'bg-pink-200/50 text-pink-800'\n                          : 'text-gray-400 hover:text-pink-600 hover:bg-white/30'\n                          }`}\n                      >\n                        {sub.icon ? (\n                          <sub.icon size={16} className=\"flex-shrink-0 hidden xl:block\" />\n                        ) : (\n                          <span className=\"w-1.5 h-1.5 rounded-full bg-current flex-shrink-0 hidden xl:block\"></span>\n                        )}\n                        <span className=\"hidden xl:block\">{sub.label}</span>\n                        {/* Icon only mode fallback */}\n                        <span className=\"xl:hidden\">\n                          {sub.icon ? <sub.icon size={14} /> : sub.label.substring(0, 1)}\n                        </span>\n                      </button>\n                    ))}\n                  </div>\n                </div>\n              </div>\n            )}\n          </div>\n        ))}\n      </nav>\n      <div className=\"p-4 border-t border-pink-100\">\n        <div className=\"w-full flex xl:flex-row flex-col items-center xl:justify-start justify-center gap-3\">\n          <div className=\"group relative\" onClick={() => onEditProfile && onEditProfile()}>\n            <SidebarAvatar username={username} />\n            <div className=\"absolute left-1/2 -translate-x-1/2 -translate-y-full -top-2 bg-pink-700 text-white text-xs px-2 py-1 rounded shadow opacity-0 group-hover:opacity-100 pointer-events-none whitespace-nowrap z-50\">\n              {username}\n            </div>\n          </div>\n          <button onClick={onLogout} className=\"w-full xl:flex-1 flex items-center justify-center xl:justify-start gap-3 px-2 xl:px-4 py-3 text-red-400 hover:bg-red-50 rounded-2xl transition-colors font-bold text-sm\">\n            <LogOut size={18} className=\"flex-shrink-0\" />\n            <span className=\"hidden xl:block\">退出登录</span>\n          </button>\n        </div>\n      </div>\n      {showEdit && (\n        <div className=\"fixed inset-0 z-[100] flex items-center justify-center bg-black/40\">\n          <div className=\"bg-white rounded-2xl p-6 w-96 shadow-2xl\">\n            <div className=\"font-bold mb-4 text-pink-900\">修改资料</div>\n            <div className=\"space-y-3\">\n              <div>\n                <input type=\"text\" placeholder={`昵称（当前：${username}）`} value={newNickname} onChange={e => setNewNickname(e.target.value)} className=\"dream-input w-full px-4 py-3 rounded-2xl text-sm font-bold text-gray-700\" />\n              </div>\n              <div>\n                <input type=\"password\" placeholder=\"新密码\" value={pwd1} onChange={e => setPwd1(e.target.value)} className=\"dream-input w-full px-4 py-3 rounded-2xl text-sm font-bold text-gray-700\" />\n              </div>\n              <div>\n                <input type=\"password\" placeholder=\"再次输入新密码\" value={pwd2} onChange={e => setPwd2(e.target.value)} className=\"dream-input w-full px-4 py-3 rounded-2xl text-sm font-bold text-gray-700\" />\n              </div>\n            </div>\n            <div className=\"flex gap-2 justify-end mt-5\">\n              <button className=\"px-4 py-2 rounded-xl bg-gray-100 text-gray-600\" onClick={() => { setShowEdit(false); setNewNickname(''); setPwd1(''); setPwd2(''); }}>取消</button>\n              <button className=\"px-4 py-2 rounded-xl bg-pink-500 text-white\" onClick={submitEdit} disabled={!newNickname.trim() && !pwd1}>保存</button>\n        </div>\n      </div>\n      <div className=\"absolute right-0 top-0 bottom-0 w-[1px] bg-slate-300\"></div>\n    </div>\n      )}\n    </div>\n  );\n};\n\nexport default Sidebar;\n\nconst SidebarAvatar = ({ username }) => {\n  const [avatar, setAvatar] = useState('');\n  useEffect(() => {\n    let mounted = true;\n    adminsAPI.getMyAvatar().then(r => { if (mounted) setAvatar(r?.avatar || '/uploads/avatars/default_admin.jpg'); }).catch(() => { if (mounted) setAvatar('/uploads/avatars/default_admin.jpg'); });\n    return () => { mounted = false; };\n  }, [username]);\n  return (\n    <div className=\"group relative w-8 h-8 rounded-full overflow-hidden border border-pink-200 bg-white flex items-center justify-center\">\n      {avatar ? (<img src={avatar} alt={username} className=\"w-full h-full object-cover\" />) : (<User size={16} className=\"text-pink-500\" />)}\n    </div>\n  );\n};\n","import React, { useState, useEffect } from 'react';\nimport { ChevronLeft, Save, X, Sparkles } from 'lucide-react';\n\nconst TemplateCreateView = ({ onCancel, initialData, onSave, notify }) => {\n  const [formData, setFormData] = useState({ name: '', type: '恋爱', customType: '', tags: [], content: '' });\n  const [tagInput, setTagInput] = useState('');\n  const [isCustomType, setIsCustomType] = useState(false);\n  const PRESET_TYPES = ['恋爱', '玄幻', '悬疑', '职场', '科幻', '同人'];\n\n  useEffect(() => {\n    if (initialData) {\n      setFormData({\n        name: initialData.name || '',\n        type: initialData.type || '恋爱',\n        customType: '',\n        tags: initialData.tags || [],\n        content: initialData.content || '',\n      });\n      setIsCustomType(false);\n    }\n  }, [initialData]);\n\n  const handleAddTag = (e) => {\n    if (e.key === 'Enter' && tagInput.trim()) {\n      e.preventDefault();\n      if (!formData.tags.includes(tagInput.trim())) {\n        setFormData((prev) => ({ ...prev, tags: [...prev.tags, tagInput.trim()] }));\n      }\n      setTagInput('');\n    }\n  };\n\n  const handleRemoveTag = (index) => {\n    const newTags = [...formData.tags];\n    newTags.splice(index, 1);\n    setFormData((prev) => ({ ...prev, tags: newTags }));\n  };\n\n  const handleTypeSelect = (type) => {\n    setIsCustomType(false);\n    setFormData((prev) => ({ ...prev, type }));\n  };\n\n  const handleSave = () => {\n    if (!formData.name.trim()) {\n      if (typeof notify === 'function') notify('保存失败：请输入模版名称', 'error');\n      return;\n    }\n    const payload = {\n      id: initialData?.id,\n      name: formData.name.trim(),\n      type: isCustomType ? (formData.customType.trim() || formData.type) : formData.type,\n      tags: formData.tags,\n      content: formData.content,\n      refCount: initialData?.refCount ?? 0,\n      creator: initialData?.creator ?? 'Admin',\n    };\n    try {\n      onSave && onSave(payload);\n    } catch (e) {\n      if (typeof notify === 'function') notify('保存失败：请稍后重试', 'error');\n    }\n  };\n\n  return (\n    <div className=\"animate-fade-in pb-20\">\n      <div className=\"flex items-center gap-4 mb-6\">\n        <button onClick={onCancel} className=\"w-10 h-10 flex items-center justify-center bg-white rounded-full shadow-sm text-gray-500 hover:text-pink-600 transition-colors\">\n          <ChevronLeft size={20} />\n        </button>\n        <div>\n          <h2 className=\"text-2xl font-cute text-pink-900\">{initialData ? '编辑提示词模版' : '新建提示词模版'}</h2>\n          <p className=\"text-gray-400 text-xs\">定义基础 Prompt 框架</p>\n        </div>\n        <div className=\"ml-auto flex gap-3\">\n          <button onClick={onCancel} className=\"px-6 py-2.5 rounded-xl bg-white text-gray-500 font-bold text-sm shadow-sm hover:bg-gray-50\">取消</button>\n          <button onClick={handleSave} className=\"px-6 py-2.5 rounded-xl bg-gradient-to-r from-pink-500 to-pink-600 text白 font-bold text-sm shadow-lg shadow-pink-200 flex items-center gap-2\">\n            <Save size={16} /> 保存模版\n          </button>\n        </div>\n      </div>\n      <div className=\"grid grid-cols-12 gap-6\">\n        <div className=\"col-span-12 lg:col-span-8 space-y-6\">\n          <div className=\"solid-card p-8 rounded-3xl space-y-6\">\n            <h3 className=\"font-cute text-lg text-pink-900 flex items-center gap-2 mb-2\">\n              <span className=\"w-1.5 h-4 bg-yellow-400 rounded-full\"></span> 模版基础信息\n            </h3>\n            <div>\n              <label className=\"block text-xs font-bold text-pink-800 mb-2\">模版名称</label>\n              <input type=\"text\" value={formData.name} onChange={(e) => setFormData({ ...formData, name: e.target.value })} className=\"dream-input w-full px-4 py-3 rounded-xl text-sm font-bold text-gray-700 bg-gray-50/50 focus:bg-white\" placeholder=\"例如：病娇反派通用模版\" />\n            </div>\n            <div>\n              <label className=\"block text-xs font-bold text-pink-800 mb-2\">模版类型</label>\n              <div className=\"flex flex-wrap gap-2 mb-2\">\n                {PRESET_TYPES.map((type) => (\n                  <button key={type} onClick={() => handleTypeSelect(type)} className={`px-4 py-2 rounded-xl text-xs font-bold transition-all cute-font tracking-wide border ${!isCustomType && formData.type === type ? 'bg-pink-500 text白 border-pink-500 shadow-md shadow-pink-200' : 'bg白 text灰-500 border-gray-100 hover:border-pink-200'}`}>{type}</button>\n                ))}\n                <button onClick={() => setIsCustomType(true)} className={`px-4 py-2 rounded-xl text-xs font-bold transition-all cute-font tracking-wide border ${isCustomType ? 'bg-pink-500 text白 border-pink-500 shadow-md shadow-pink-200' : 'bg白 text灰-500 border-gray-100 hover:border-pink-200'}`}>自定义...</button>\n              </div>\n              {isCustomType && (\n                <div className=\"animate-fade-in mt-2\">\n                  <input type=\"text\" value={formData.customType} onChange={(e) => setFormData({ ...formData, customType: e.target.value })} placeholder=\"请输入自定义类型名称\" className=\"dream-input w-full px-4 py-2.5 rounded-xl text-sm\" />\n                </div>\n              )}\n            </div>\n            <div>\n              <label className=\"block text-xs font-bold text-pink-800 mb-2\">模版标签 (回车生成)</label>\n              <div className=\"dream-input w-full px-4 py-3 rounded-xl min-h-[50px] flex flex-wrap gap-2 items-center bg-gray-50/50 focus-within:bg-white\">\n                {formData.tags.map((tag, i) => (\n                  <span key={i} className=\"tag-pill px-3 py-1 flex items-center shadow-sm gap-1\">\n                    #{tag} <button onClick={() => handleRemoveTag(i)} className=\"hover:text-red-500 opacity-60 hover:opacity-100 transition-opacity\"><X size={12} /></button>\n                  </span>\n                ))}\n                <input value={tagInput} onChange={(e) => setTagInput(e.target.value)} onKeyDown={handleAddTag} type=\"text\" className=\"bg-transparent outline-none text-sm w-40 placeholder-gray-400 h-8\" placeholder=\"输入标签按回车...\" />\n              </div>\n            </div>\n          </div>\n          <div className=\"solid-card p-8 rounded-3xl space-y-4\">\n            <h3 className=\"font-cute text-lg text-pink-900 flex items-center gap-2 mb-2\">\n              <span className=\"w-1.5 h-4 bg-yellow-400 rounded-full\"></span> Prompt 内容配置\n            </h3>\n            <div className=\"relative\">\n              <textarea rows=\"15\" value={formData.content} onChange={(e) => setFormData({ ...formData, content: e.target.value })} className=\"dream-input w-full px-5 py-4 rounded-xl text-sm leading-relaxed font-mono text-gray-600 bg-gray-50/50 focus:bg-white resize-y\" placeholder=\"在此输入系统提示词框架（System Instruction）...&#10;可以使用 {'{{user}}'} 和 {'{{name}}'} 作为占位符。\" />\n            </div>\n          </div>\n        </div>\n        <div className=\"col-span-12 lg:col-span-4 space-y-6\">\n          <div className=\"solid-card p-6 rounded-3xl bg-gradient-to-br from-pink-500 to-pink-600 text白 shadow-xl shadow-pink-200/50\">\n            <h4 className=\"font-bold mb-3 flex items-center gap-2 text-lg font-cute\"><Sparkles size={18} className=\"text-yellow-300\" /> 编写指南</h4>\n            <ul className=\"space-y-3 text-sm opacity-90 leading-relaxed list-disc list-inside\">\n              <li>使用 <b>{'{{name}}'}</b> 代表角色姓名。</li>\n              <li>使用 <b>{'{{user}}'}</b> 代表用户昵称。</li>\n              <li>建议明确规定角色的<b>说话风格</b>、<b>禁忌事项</b>以及<b>背景设定</b>。</li>\n            </ul>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default TemplateCreateView;\n","import React, { useState, useEffect } from 'react';\nimport { Plus, Info, Edit3, Copy, CheckCircle, Star, Trash2 } from 'lucide-react';\nimport TemplateCreateView from './TemplateCreateView.jsx';\nimport { ToastProvider, useToast } from '../Toast.jsx';\nimport { templatesAPI } from '../api.js';\n\nconst TemplatesViewContent = () => {\n  const [view, setView] = useState('list');\n  const [templates, setTemplates] = useState([]);\n  const [page, setPage] = useState(1);\n  const PAGE_SIZE = 6;\n  const [editingTpl, setEditingTpl] = useState(null);\n  const [deleteTarget, setDeleteTarget] = useState(null);\n  const { showToast } = useToast();\n\n  const reload = async () => {\n    try {\n      const data = await templatesAPI.list();\n      setTemplates(data.items || []);\n    } catch {\n      showToast('加载失败：请稍后再试', 'error');\n    }\n  };\n  useEffect(() => { reload(); }, []);\n\n  const sortedTemplates = [...templates].sort((a, b) => {\n    if (a.isDefault && !b.isDefault) return -1;\n    if (!a.isDefault && b.isDefault) return 1;\n    const at = a.createdAt ? new Date(a.createdAt).getTime() : 0;\n    const bt = b.createdAt ? new Date(b.createdAt).getTime() : 0;\n    return at - bt;\n  });\n  const totalPages = Math.max(1, Math.ceil(sortedTemplates.length / PAGE_SIZE));\n  const startIdx = (page - 1) * PAGE_SIZE;\n  const pageItems = sortedTemplates.slice(startIdx, startIdx + PAGE_SIZE);\n  useEffect(() => { if (page > totalPages) setPage(totalPages); }, [templates]);\n\n  const formatDate = (ts) => {\n    if (!ts) return '-';\n    const d = new Date(ts);\n    const y = d.getFullYear();\n    const m = String(d.getMonth() + 1).padStart(2, '0');\n    const day = String(d.getDate()).padStart(2, '0');\n    const hh = String(d.getHours()).padStart(2, '0');\n    const mm = String(d.getMinutes()).padStart(2, '0');\n    return `${y}/${m}/${day} ${hh}:${mm}`;\n  };\n\n  const handleSetDefault = async (id) => {\n    try { await templatesAPI.setDefault(id); showToast('已设为默认'); reload(); } catch { showToast('操作失败', 'error'); }\n  };\n\n  const handleEdit = (tpl) => { setEditingTpl(tpl); setView('create'); };\n  const handleCopy = (tpl) => {\n    const draft = { ...tpl, id: undefined, name: `${tpl.name}_copy` };\n    setEditingTpl(draft);\n    setView('create');\n    showToast('复制成功，已进入编辑');\n  };\n  const handleDelete = async (id) => {\n    try { await templatesAPI.remove(id); } catch { throw new Error('failed'); }\n  };\n  const openDelete = (tpl) => setDeleteTarget(tpl);\n  const closeDelete = () => setDeleteTarget(null);\n  const confirmDelete = async () => {\n    if (!deleteTarget) return;\n    try { await handleDelete(deleteTarget.id); showToast('删除成功'); reload(); } catch { showToast('删除失败', 'error'); } finally { closeDelete(); }\n  };\n  const handleSave = async (data) => {\n    try {\n      if (editingTpl && editingTpl.id) { await templatesAPI.update(editingTpl.id, data); showToast('保存成功：模版已更新'); }\n      else { await templatesAPI.create(data); showToast('创建成功：模版已保存'); }\n      setEditingTpl(null); setView('list'); reload();\n    } catch { showToast('保存失败：请稍后重试', 'error'); }\n  };\n\n  if (view === 'create') {\n    return <TemplateCreateView onCancel={() => { setEditingTpl(null); setView('list'); }} initialData={editingTpl} onSave={handleSave} notify={showToast} />;\n  }\n\n  return (\n    <div className=\"space-y-6 animate-fade-in\">\n      <div className=\"flex justify-between items-center\">\n        <div>\n          <h2 className=\"text-2xl font-cute text-pink-900 flex items-center gap-2\">\n            <span className=\"w-1.5 h-6 bg-yellow-400 rounded-full inline-block\"></span>\n            提示词模版库\n          </h2>\n          <p className=\"text-gray-400 text-xs mt-1 ml-4\">管理用于生成角色的基础 Prompt</p>\n        </div>\n        <button onClick={() => { setEditingTpl(null); setView('create'); }} className=\"bg-pink-500 text-white px-5 py-2.5 rounded-xl font-bold shadow-lg shadow-pink-200 hover:bg-pink-600 transition-colors flex items-center gap-2 text-sm\"><Plus size={16} /> 新建模版</button>\n      </div>\n      <div className=\"flex items-center gap-2 bg-pink-50 p-4 rounded-2xl border border-pink-100 text-sm text-pink-700\">\n        <Info size={18} className=\"flex-shrink-0 text-pink-500\" />\n        <span>提示：用户创建角色时，默认使用当前<span className=\"font-bold\">“默认”</span>提示词模板作为参考生成角色提示词。</span>\n      </div>\n      <div className=\"glass-card rounded-3xl overflow-hidden\">\n        <table className=\"w-full text-left rounded-2xl overflow-hidden border-collapse\">\n          <thead className=\"bg-pink-100 text-pink-900 font-cute text-sm\">\n            <tr>\n              <th className=\"p-3 pl-6 w-16\">序号</th>\n              <th className=\"p-3 pl-7\">模版名称</th>\n              <th className=\"p-3\">类型</th>\n              <th className=\"p-3\">标签</th>\n              <th className=\"p-3\">创建时间</th>\n              <th className=\"p-3\">引用数</th>\n              <th className=\"p-3\">状态 / 操作</th>\n              <th className=\"p-3 text-right pr-8\">操作</th>\n            </tr>\n          </thead>\n          <tbody className=\"text-sm divide-y divide-pink-100\">\n            {pageItems.map((tpl, i) => (\n              <tr key={tpl.id} className=\"hover:bg-pink-50/30 transition-colors\">\n                <td className=\"p-3 pl-6 text-gray-500 font-mono\">{startIdx + i + 1}</td>\n                <td className=\"p-3 pl-8 font-bold text-gray-700\">{tpl.name}</td>\n                <td className=\"p-3\"><span className=\"bg-pink-100 text-pink-600 px-2.5 py-1 rounded-lg text-xs font-bold\">{tpl.type}</span></td>\n                <td className=\"p-3\"><div className=\"flex gap-1\">{tpl.tags?.map((t) => <span key={t} className=\"text-[10px] bg-white border border-pink-100 text-pink-400 px-1.5 py-0.5 rounded\">{t}</span>)}</div></td>\n                <td className=\"p-3 text-gray-500\">{formatDate(tpl.createdAt)}</td>\n                <td className=\"p-3 text-gray-500 font-mono\">{typeof tpl.refCount === 'number' ? tpl.refCount : 0}</td>\n                <td className=\"p-3\">\n                  {tpl.isDefault ? (\n                    <span className=\"inline-flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-green-100 text-green-700 text-xs font-bold border border-green-200\">\n                      <CheckCircle size={14} className=\"text-green-600\" />\n                      当前默认\n                    </span>\n                  ) : (\n                    <button onClick={() => handleSetDefault(tpl.id)} className=\"inline-flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-white border border-gray-200 text-gray-500 text-xs font-bold hover:border-pink-300 hover:text-pink-600 hover:bg-pink-50 transition-all group\">\n                      <Star size={14} className=\"group-hover:fill-pink-200\" />\n                      设为默认\n                    </button>\n                  )}\n                </td>\n                <td className=\"p-3 text-right pr-8 space-x-2\">\n                  <span className=\"relative inline-flex group\">\n                    <button onClick={() => handleEdit(tpl)} aria-label=\"编辑\" className=\"text-pink-400 hover:text-pink-600 p-1\"><Edit3 size={16} /></button>\n                    <span className=\"absolute -top-7 left-1/2 -translate-x-1/2 px-2 py-1 rounded-md text-xs bg-gray-800 text-white whitespace-nowrap opacity-0 group-hover:opacity-100\">编辑</span>\n                  </span>\n                  <span className=\"relative inline-flex group\">\n                    <button onClick={() => handleCopy(tpl)} aria-label=\"复制\" className=\"text-pink-400 hover:text-pink-600 p-1\"><Copy size={16} /></button>\n                    <span className=\"absolute -top-7 left-1/2 -translate-x-1/2 px-2 py-1 rounded-md text-xs bg-gray-800 text-white whitespace-nowrap opacity-0 group-hover:opacity-100\">复制</span>\n                  </span>\n                  <span className=\"relative inline-flex group\">\n                    <button onClick={() => openDelete(tpl)} aria-label=\"删除\" className=\"text-red-400 hover:text-red-600 p-1\"><Trash2 size={16} /></button>\n                    <span className=\"absolute -top-7 left-1/2 -translate-x-1/2 px-2 py-1 rounded-md text-xs bg-gray-800 text-white whitespace-nowrap opacity-0 group-hover:opacity-100\">删除</span>\n                  </span>\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n        <div className=\"flex items-center justify-between p-3 border-t border-pink-100\">\n          <div className=\"text-xs text-gray-500\">第 {page} / {totalPages} 页</div>\n          <div className=\"flex items-center gap-2\">\n            <button disabled={page===1} onClick={() => setPage((p)=>Math.max(1,p-1))} className={`px-3 py-1 rounded-lg text-xs font-bold ${page===1 ? 'bg-gray-100 text-gray-400' : 'bg-white border border-gray-200 text-gray-600 hover:border-pink-300 hover:text-pink-600 hover:bg-pink-50'}`}>上一页</button>\n            {Array.from({ length: totalPages }).map((_, i) => (\n              <button key={i} onClick={() => setPage(i+1)} className={`w-8 h-8 rounded-lg text-xs font-bold ${page===i+1 ? 'bg-pink-500 text-white' : 'bg-white border border-gray-200 text-gray-600 hover:border-pink-300 hover:text-pink-600 hover:bg-pink-50'}`}>{i+1}</button>\n            ))}\n            <button disabled={page===totalPages} onClick={() => setPage((p)=>Math.min(totalPages,p+1))} className={`px-3 py-1 rounded-lg text-xs font-bold ${page===totalPages ? 'bg-gray-100 text-gray-400' : 'bg-white border border-gray-200 text-gray-600 hover:border-pink-300 hover:text-pink-600 hover:bg-pink-50'}`}>下一页</button>\n          </div>\n        </div>\n      </div>\n      {deleteTarget && (\n        <>\n          <div className=\"fixed top-0 right-0 bottom-0 left-64 bg-black/30 z-50\" onClick={closeDelete}></div>\n          <div className=\"fixed top-0 right-0 bottom-0 left-64 z-50 flex items-center justify-center p-4\">\n            <div className=\"bg-white rounded-3xl border border-pink-50 p-6 w-full max-w-md shadow-2xl\">\n              <h3 className=\"font-cute text-lg text-pink-900 mb-2\">删除提示词模版</h3>\n              <p className=\"text-sm text-gray-500 mb-4\">确定删除“{deleteTarget.name}”吗？此操作不可撤回。</p>\n              <div className=\"flex justify-end gap-3\">\n                <button onClick={closeDelete} className=\"px-5 py-2 rounded-xl bg-white border border-gray-200 text-gray-600 font-bold text-sm hover:bg-gray-50\">取消</button>\n                <button onClick={confirmDelete} className=\"px-5 py-2 rounded-xl bg-red-500 text-white font-bold text-sm shadow-sm hover:bg-red-600\">确认删除</button>\n              </div>\n            </div>\n          </div>\n        </>\n      )}\n    </div>\n  );\n};\n\nconst TemplatesView = () => (\n  <ToastProvider>\n    <TemplatesViewContent />\n  </ToastProvider>\n);\n\nexport default TemplatesView;\n","import React, { useState, useRef, useEffect, useCallback } from 'react';\nimport { uploadAPI } from '../api.js';\nimport {\n    Camera,\n    Trash2,\n    Pencil,\n    X,\n    Globe,\n    RotateCw,\n    Image as ImageIcon,\n    Monitor,\n    UploadCloud,\n    ChevronLeft,\n    Move,\n    ZoomIn,\n    ZoomOut\n} from 'lucide-react';\n\nconst readFile = (file) => {\n    return new Promise((resolve) => {\n        const reader = new FileReader();\n        reader.addEventListener('load', () => resolve(reader.result), false);\n        reader.readAsDataURL(file);\n    });\n};\n\nconst createImage = (url) =>\n    new Promise((resolve, reject) => {\n        const image = new Image();\n        image.addEventListener('load', () => resolve(image));\n        image.addEventListener('error', (error) => reject(error));\n        image.setAttribute('crossOrigin', 'anonymous');\n        image.src = url;\n    });\n\nexport default function AvatarEditor({ initialImage, onSave, onCancel }) {\n    const [currentStep, setCurrentStep] = useState(initialImage ? 'main' : 'upload'); // 'main', 'upload', 'edit'\n    const [avatarUrl, setAvatarUrl] = useState(initialImage || null);\n    const [tempImage, setTempImage] = useState(null);\n\n    const handleFileChange = async (e) => {\n        if (e.target.files && e.target.files.length > 0) {\n            const file = e.target.files[0];\n            const imageDataUrl = await readFile(file);\n            setTempImage(imageDataUrl);\n            setCurrentStep('edit');\n        }\n    };\n\n    const handleSaveCrop = (croppedImageUrl) => {\n        setAvatarUrl(croppedImageUrl);\n        onSave(croppedImageUrl);\n    };\n\n    return (\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4 animate-in fade-in duration-200\">\n            <div className=\"relative w-full max-w-md bg-white rounded-3xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh] animate-in zoom-in-95 duration-200\">\n\n                {/* Header */}\n                <Header\n                    step={currentStep}\n                    onBack={() => setCurrentStep(currentStep === 'edit' ? 'upload' : 'main')}\n                    onClose={onCancel}\n                />\n\n                {/* Content Body */}\n                <div className=\"flex-1 overflow-y-auto custom-scrollbar\">\n                    {currentStep === 'main' && (\n                        <MainView\n                            avatarUrl={avatarUrl}\n                            onChangeClick={() => setCurrentStep('upload')}\n                            onRemoveClick={() => { setAvatarUrl(null); onSave(null); }}\n                        />\n                    )}\n\n                    {currentStep === 'upload' && (\n                        <UploadView onFileChange={handleFileChange} />\n                    )}\n\n                    {currentStep === 'edit' && tempImage && (\n                        <EditView\n                            imageSrc={tempImage}\n                            onSave={handleSaveCrop}\n                            onCancel={() => setCurrentStep('upload')}\n                        />\n                    )}\n                </div>\n            </div>\n        </div>\n    );\n}\n\nfunction Header({ step, onBack, onClose }) {\n    let title = \"头像设置\";\n    if (step === 'upload') title = \"更换头像\";\n    if (step === 'edit') title = \"裁剪与旋转\";\n\n    return (\n        <div className=\"flex items-center justify-between px-6 py-4 border-b border-gray-100 shrink-0 bg-white\">\n            <div className=\"flex items-center gap-2\">\n                {step !== 'main' && step !== 'upload' && ( // Simplified navigation logic\n                    <button\n                        onClick={onBack}\n                        className=\"p-2 -ml-2 rounded-full hover:bg-gray-100 text-gray-400 hover:text-pink-600 transition-colors\"\n                    >\n                        <ChevronLeft size={20} />\n                    </button>\n                )}\n                {(step === 'upload' && onBack) && ( // If we are in upload but came from main (implied by existence of onBack logic in parent, but here simplified)\n                    // Actually, if we have an avatar, 'upload' has a back button to 'main'. \n                    // If we started with no avatar, 'upload' is the first step.\n                    // For simplicity, let's just show back if step is 'edit'.\n                    null\n                )}\n                <h2 className=\"text-lg font-cute text-pink-900\">{title}</h2>\n            </div>\n            <button\n                onClick={onClose}\n                className=\"p-2 -mr-2 rounded-full hover:bg-gray-100 text-gray-400 hover:text-red-500 transition-colors\"\n            >\n                <X size={20} />\n            </button>\n        </div>\n    );\n}\n\nfunction MainView({ avatarUrl, onChangeClick, onRemoveClick }) {\n    return (\n        <div className=\"flex flex-col h-full bg-gray-50/50\">\n            <div className=\"p-8 flex flex-col items-center text-center flex-1 justify-center\">\n                <div className=\"relative group mb-8\">\n                    <div className=\"w-48 h-48 rounded-full overflow-hidden ring-8 ring-white shadow-2xl bg-gray-200 flex items-center justify-center\">\n                        {avatarUrl ? (\n                            <img\n                                src={avatarUrl}\n                                alt=\"Profile\"\n                                className=\"w-full h-full object-cover\"\n                            />\n                        ) : (\n                            <span className=\"text-6xl font-medium text-gray-400\">\n                                ?\n                            </span>\n                        )}\n                    </div>\n                </div>\n                <p className=\"text-sm text-gray-500 mb-2\">\n                    设置一个好看的头像，让角色更具吸引力\n                </p>\n            </div>\n\n            {/* Footer Actions */}\n            <div className=\"flex items-stretch border-t border-gray-100 bg-white divide-x divide-gray-100\">\n                <button\n                    onClick={onChangeClick}\n                    className=\"flex-1 py-4 flex items-center justify-center gap-2 text-pink-600 hover:bg-pink-50 transition-colors font-bold text-sm\"\n                >\n                    <Pencil size={16} />\n                    更换头像\n                </button>\n                <button\n                    onClick={onRemoveClick}\n                    className=\"flex-1 py-4 flex items-center justify-center gap-2 text-gray-400 hover:bg-red-50 hover:text-red-500 transition-colors font-bold text-sm\"\n                >\n                    <Trash2 size={16} />\n                    移除头像\n                </button>\n            </div>\n        </div>\n    );\n}\n\nfunction UploadView({ onFileChange }) {\n    const [isDragging, setIsDragging] = useState(false);\n    const fileInputRef = useRef(null);\n\n    const handleDragOver = (e) => {\n        e.preventDefault();\n        setIsDragging(true);\n    };\n\n    const handleDragLeave = (e) => {\n        e.preventDefault();\n        setIsDragging(false);\n    };\n\n    const handleDrop = (e) => {\n        e.preventDefault();\n        setIsDragging(false);\n        if (e.dataTransfer.files && e.dataTransfer.files.length > 0) {\n            onFileChange({ target: { files: e.dataTransfer.files } });\n        }\n    };\n\n    return (\n        <div className=\"flex flex-col h-full bg-white\">\n            {/* Drop Zone */}\n            <div className=\"flex-1 p-8 flex flex-col items-center justify-center\">\n                <div\n                    onDragOver={handleDragOver}\n                    onDragLeave={handleDragLeave}\n                    onDrop={handleDrop}\n                    onClick={() => fileInputRef.current.click()}\n                    className={`w-full max-w-xs aspect-square rounded-3xl flex flex-col items-center justify-center transition-all duration-300 cursor-pointer border-2 border-dashed ${isDragging\n                        ? 'bg-pink-50 border-pink-400 scale-105'\n                        : 'bg-gray-50 border-gray-200 hover:border-pink-300 hover:bg-pink-50/30'\n                        }`}\n                >\n                    <div className=\"w-20 h-20 rounded-full bg-white shadow-sm flex items-center justify-center mb-4 text-pink-500\">\n                        <UploadCloud size={32} />\n                    </div>\n                    <p className=\"text-gray-600 font-bold mb-1\">点击或拖拽上传</p>\n                    <p className=\"text-gray-400 text-xs\">支持 JPG, PNG, GIF</p>\n                </div>\n            </div>\n\n            <input\n                type=\"file\"\n                ref={fileInputRef}\n                onChange={onFileChange}\n                className=\"hidden\"\n                accept=\"image/*\"\n            />\n        </div>\n    );\n}\n\nfunction EditView({ imageSrc, onSave, onCancel }) {\n    const canvasRef = useRef(null);\n    const [imageObj, setImageObj] = useState(null);\n    const [saving, setSaving] = useState(false);\n\n    const [rotation, setRotation] = useState(0);\n    const [offset, setOffset] = useState({ x: 0, y: 0 });\n    const [isDragging, setIsDragging] = useState(false);\n    const [dragStart, setDragStart] = useState({ x: 0, y: 0 });\n    const [baseScale, setBaseScale] = useState(1);\n    const [zoom, setZoom] = useState(1);\n\n    const CANVAS_SIZE = 800;\n    const VIEWPORT_SIZE = 600;\n\n    useEffect(() => {\n        const init = async () => {\n            try {\n                const img = await createImage(imageSrc);\n                setImageObj(img);\n                const scaleX = CANVAS_SIZE / img.width;\n                const scaleY = CANVAS_SIZE / img.height;\n                const initScale = Math.max(scaleX, scaleY);\n                setBaseScale(initScale);\n                setZoom(1);\n            } catch (e) {\n                console.error(e);\n            }\n        };\n        init();\n    }, [imageSrc]);\n\n    const handleWheel = (e) => {\n        e.preventDefault();\n        const delta = e.deltaY * -0.001;\n        setZoom(prev => Math.max(0.5, Math.min(prev + delta, 3)));\n    };\n\n    const draw = useCallback(() => {\n        if (!imageObj || !canvasRef.current) return;\n        const canvas = canvasRef.current;\n        const ctx = canvas.getContext('2d');\n\n        ctx.clearRect(0, 0, CANVAS_SIZE, CANVAS_SIZE);\n\n        // Background (Dark for contrast)\n        ctx.fillStyle = '#18181b'; // zinc-900\n        ctx.fillRect(0, 0, CANVAS_SIZE, CANVAS_SIZE);\n\n        ctx.save();\n\n        ctx.translate(CANVAS_SIZE / 2, CANVAS_SIZE / 2);\n        ctx.rotate((rotation * Math.PI) / 180);\n        ctx.translate(-CANVAS_SIZE / 2, -CANVAS_SIZE / 2);\n\n        let rad = (rotation * Math.PI) / 180;\n        let localX = offset.x * Math.cos(-rad) - offset.y * Math.sin(-rad);\n        let localY = offset.x * Math.sin(-rad) + offset.y * Math.cos(-rad);\n\n        const currentScale = baseScale * zoom;\n        const imgWidth = imageObj.width * currentScale;\n        const imgHeight = imageObj.height * currentScale;\n\n        const centerX = CANVAS_SIZE / 2;\n        const centerY = CANVAS_SIZE / 2;\n\n        ctx.drawImage(\n            imageObj,\n            centerX - imgWidth / 2 + localX,\n            centerY - imgHeight / 2 + localY,\n            imgWidth,\n            imgHeight\n        );\n\n        ctx.restore();\n\n        // Overlay\n        const viewportOffset = (CANVAS_SIZE - VIEWPORT_SIZE) / 2;\n\n        ctx.fillStyle = 'rgba(0, 0, 0, 0.6)';\n        ctx.beginPath();\n        ctx.rect(0, 0, CANVAS_SIZE, CANVAS_SIZE);\n\n        // Square crop hole\n        ctx.rect(viewportOffset + VIEWPORT_SIZE, viewportOffset, -VIEWPORT_SIZE, VIEWPORT_SIZE);\n        ctx.fill('evenodd');\n        // Removed corner frame lines\n\n    }, [imageObj, rotation, offset, baseScale, zoom]);\n\n    useEffect(() => {\n        draw();\n    }, [draw]);\n\n    const handleMouseDown = (e) => {\n        setIsDragging(true);\n        const rect = canvasRef.current.getBoundingClientRect();\n        const x = e.clientX || e.touches[0].clientX;\n        const y = e.clientY || e.touches[0].clientY;\n        setDragStart({ x: x - rect.left, y: y - rect.top });\n    };\n\n    const handleMouseMove = (e) => {\n        if (!isDragging) return;\n        const rect = canvasRef.current.getBoundingClientRect();\n        const clientX = e.clientX || (e.touches ? e.touches[0].clientX : 0);\n        const clientY = e.clientY || (e.touches ? e.touches[0].clientY : 0);\n\n        const x = clientX - rect.left;\n        const y = clientY - rect.top;\n\n        const dx = x - dragStart.x;\n        const dy = y - dragStart.y;\n\n        setOffset(prev => ({ x: prev.x + dx, y: prev.y + dy }));\n        setDragStart({ x, y });\n    };\n\n    const handleMouseUp = () => {\n        setIsDragging(false);\n    };\n\n    const handleRotate = () => {\n        setRotation(prev => (prev + 90) % 360);\n    };\n\n    const handleFinalSave = async () => {\n        if (!canvasRef.current || saving) return;\n        setSaving(true);\n        try {\n            const tempCanvas = document.createElement('canvas');\n            const size = VIEWPORT_SIZE;\n            tempCanvas.width = size;\n            tempCanvas.height = size;\n            const tCtx = tempCanvas.getContext('2d');\n            const viewportOffset = (CANVAS_SIZE - VIEWPORT_SIZE) / 2;\n            tCtx.drawImage(\n                canvasRef.current,\n                viewportOffset, viewportOffset, size, size,\n                0, 0, size, size\n            );\n            const blob = await new Promise((resolve, reject) => {\n                tempCanvas.toBlob((b) => b ? resolve(b) : reject(new Error('blob_failed')), 'image/jpeg', 0.92);\n            });\n            const file = new File([blob], `avatar_${Date.now()}.jpg`, { type: 'image/jpeg' });\n            const result = await uploadAPI.avatar(file);\n            onSave(result.url);\n        } catch (e) {\n            console.error(e);\n        } finally {\n            setSaving(false);\n        }\n    };\n\n    return (\n        <div className=\"flex flex-col h-full bg-white\">\n            <div className=\"flex-1 relative flex items-center justify-center bg-gray-900 overflow-hidden\">\n                <canvas\n                    ref={canvasRef}\n                    width={CANVAS_SIZE}\n                    height={CANVAS_SIZE}\n                    onMouseDown={handleMouseDown}\n                    onMouseMove={handleMouseMove}\n                    onMouseUp={handleMouseUp}\n                    onMouseLeave={handleMouseUp}\n                    onTouchStart={handleMouseDown}\n                    onTouchMove={handleMouseMove}\n                    onTouchEnd={handleMouseUp}\n                    onWheel={handleWheel}\n                    className=\"cursor-move max-w-full max-h-full\"\n                    style={{ width: '100%', height: 'auto', maxHeight: '520px' }}\n                />\n            </div>\n\n            <div className=\"p-4 bg-white flex items-center justify-between border-t border-gray-100 gap-4\">\n                <button\n                    onClick={handleRotate}\n                    className=\"flex flex-col itemscenter gap-1 text-pink-600 hover:text-pink-700 transition text-xs font-bold px-2 py-2 rounded-xl hover:bg-pink-50 shrink-0\"\n                >\n                    <RotateCw size={20} />\n                    旋转\n                </button>\n\n                <div className=\"flex items-center gap-2 flex-1 max-w-[200px]\">\n                    <ZoomOut size={16} className=\"text-gray-400 shrink-0\" />\n                    <input\n                        type=\"range\"\n                        min=\"0.5\"\n                        max=\"3\"\n                        step=\"0.1\"\n                        value={zoom}\n                        onChange={(e) => setZoom(parseFloat(e.target.value))}\n                        className=\"w-full h-1.5 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-pink-500\"\n                    />\n                    <ZoomIn size={16} className=\"text-gray-400 shrink-0\" />\n                </div>\n\n                <div className=\"flex gap-2 shrink-0\">\n                    <button\n                        onClick={onCancel}\n                        className=\"px-4 py-2 rounded-xl text-gray-500 font-bold text-sm hover:bg-gray-100 transition-colors\"\n                    >\n                        取消\n                    </button>\n                    <button\n                        onClick={handleFinalSave}\n                        disabled={saving}\n                        className={`px-5 py-2 rounded-xl bg-gradient-to-r from-pink-500 to-pink-600 text-white font-bold text-sm shadow-lg shadow-pink-200 transition-all ${saving ? 'opacity-60 cursor-not-allowed' : 'hover:opacity-90'}`}\n                    >\n                        {saving ? '上传中...' : '完成'}\n                    </button>\n                </div>\n            </div>\n        </div>\n    );\n}\n","import React, { useEffect, useState, useRef } from 'react';\nimport { ChevronLeft, Save, Info, X, ChevronDown, RefreshCw, Wand2, FileText, HelpCircle } from 'lucide-react';\nimport { MOCK_TEMPLATES } from '../data/mock.js';\nimport { charactersAPI, templatesAPI, modelsAPI, syspromptAPI, uploadAPI } from '../api.js';\nimport AvatarEditor from '../components/AvatarEditor.jsx';\n\nconst CharacterCreateView = ({ initialData, onCancel, mode = 'new', notify }) => {\n  const [formData, setFormData] = useState({\n    name: '', gender: '男', identity: '', tagline: '', tags: [],\n    plotTheme: '', plotSummary: '', openingLine: '', styleExamples: ['', '', ''],\n    hobbies: '', experiences: '', published: false, generatedPrompt: '', personality: '',\n    relationship: '陌生人', customRelationship: '', sceneDescription: '',\n    sceneGeneratedPrompt: '', avatar: '', characterType: '原创角色', age: '', occupation: '',\n  });\n  const RELATIONSHIP_PRESETS = ['陌生人', '暧昧', '恋爱中', '冷战', '分手'];\n  const [isCustomRel, setIsCustomRel] = useState(false);\n  const [showAdvanced, setShowAdvanced] = useState(true);\n  useEffect(() => {\n    if (initialData) {\n      const isPresetRel = RELATIONSHIP_PRESETS.includes(initialData.relationship);\n      setFormData({\n        name: initialData.name || '', gender: initialData.gender || '男', identity: initialData.identity || '',\n        tagline: initialData.tagline || '', tags: initialData.tags || [],\n        plotTheme: initialData.plotTheme || '', plotSummary: initialData.plotSummary || '',\n        openingLine: initialData.openingLine || initialData.opening || '',\n        styleExamples: initialData.styleExamples || ['', '', ''], hobbies: initialData.hobbies || '',\n        experiences: initialData.experiences || '', published: initialData.status === 'published',\n        generatedPrompt: initialData.systemPrompt || '', personality: initialData.personality || '',\n        relationship: isPresetRel ? (initialData.relationship || '陌生人') : '',\n        customRelationship: !isPresetRel ? (initialData.relationship || '') : '',\n        avatar: initialData.avatar || '',\n        sceneDescription: initialData.sceneDescription || '',\n        sceneGeneratedPrompt: initialData.systemPromptScene || '',\n        templateIdScene: initialData.sceneTemplateId ? String(initialData.sceneTemplateId) : '',\n        characterType: initialData.characterType || initialData.type || '原创角色',\n        age: initialData.age || '',\n        occupation: initialData.occupation || '',\n      });\n      setIsCustomRel(!isPresetRel && !!initialData.relationship);\n      setSelectedPromptModel(initialData.promptModelId || '');\n      setPromptTemperature(typeof initialData.promptTemperature === 'number' ? initialData.promptTemperature : (initialData.promptTemperature || 0.1));\n      setSelectedSceneModel(initialData.sceneModelId || '');\n      setSceneTemperature(typeof initialData.sceneTemperature === 'number' ? initialData.sceneTemperature : (initialData.sceneTemperature || 0.1));\n    }\n  }, [initialData]);\n  const [isGeneratingMain, setIsGeneratingMain] = useState(false);\n  const [isGeneratingScene, setIsGeneratingScene] = useState(false);\n  const [showAvatarEditor, setShowAvatarEditor] = useState(false);\n  const [tagInput, setTagInput] = useState('');\n  const [isDropdownOpenScene, setIsDropdownOpenScene] = useState(false);\n  const dropdownRefScene = useRef(null);\n  const [isModelOpenMain, setIsModelOpenMain] = useState(false);\n  const [isModelOpenScene, setIsModelOpenScene] = useState(false);\n  const modelRefMain = useRef(null);\n  const modelRefScene = useRef(null);\n  const [selectedPromptModel, setSelectedPromptModel] = useState('');\n  const [selectedSceneModel, setSelectedSceneModel] = useState('');\n  const [promptTemperature, setPromptTemperature] = useState(0.1);\n  const [sceneTemperature, setSceneTemperature] = useState(0.1);\n  const [modelList, setModelList] = useState([]);\n  const [showTagModal, setShowTagModal] = useState(false);\n  const [customTagInput, setCustomTagInput] = useState('');\n  const [tplList, setTplList] = useState([]);\n  const [tplLoading, setTplLoading] = useState(false);\n\n  const availableTags = [\n    'M/M', 'M/F', 'BL', 'BG', '耽美', '百合', '责任感', '偶像', '占有欲', '霸道', '调戏', '腹黑', '温柔', '年下', '年上', '感性', '体贴', '理性', '反差', '激情', '校园', '贴心', '偏执', '疯批', '傲娇', '职场', '冷漠', '忧郁', '人夫', '养胃', '控制欲', '黏人', '可爱', '成熟', '性感'\n  ];\n  useEffect(() => {\n    const onDocClick = (e) => {\n      if (isDropdownOpenScene && dropdownRefScene.current && !dropdownRefScene.current.contains(e.target)) setIsDropdownOpenScene(false);\n      if (isModelOpenMain && modelRefMain.current && !modelRefMain.current.contains(e.target)) setIsModelOpenMain(false);\n      if (isModelOpenScene && modelRefScene.current && !modelRefScene.current.contains(e.target)) setIsModelOpenScene(false);\n    };\n    const onKey = (e) => {\n      if (e.key === 'Escape') { setIsDropdownOpenScene(false); setIsModelOpenMain(false); setIsModelOpenScene(false); }\n    };\n    document.addEventListener('mousedown', onDocClick);\n    document.addEventListener('keydown', onKey);\n    return () => {\n      document.removeEventListener('mousedown', onDocClick);\n      document.removeEventListener('keydown', onKey);\n    };\n  }, [isDropdownOpenScene, isModelOpenMain, isModelOpenScene]);\n\n  useEffect(() => {\n    (async () => {\n      try {\n        const data = await modelsAPI.list();\n        const sortKey = (m) => {\n          const nick = m.model_nickname || '';\n          const mt = nick.match(/^模型-([A-Z])$/i);\n          if (mt) return mt[1].toUpperCase();\n          return m.model_name || m.model_id || '';\n        };\n        setModelList((data.items || []).sort((a, b) => sortKey(a).localeCompare(sortKey(b))));\n      } catch { }\n    })();\n  }, []);\n\n  useEffect(() => {\n    (async () => {\n      try {\n        setTplLoading(true);\n        const data = await templatesAPI.list();\n        setTplList(data.items || []);\n      } catch { }\n      finally { setTplLoading(false); }\n    })();\n  }, []);\n\n  const getModelDisplay = (id) => {\n    const m = modelList.find(x => x.model_id === id);\n    return m ? (m.model_nickname || m.model_name || m.model_id) : '-- 请选择 --';\n  };\n  const selectedTemplateNameScene = formData.templateIdScene ? tplList.find((t) => t.id === parseInt(formData.templateIdScene))?.name : '-- 请选择 --';\n  const openTplDropdownScene = async () => {\n    const open = !isDropdownOpenScene;\n    setIsDropdownOpenScene(open);\n  };\n  const handleGeneratePrompt = async () => {\n    setIsGeneratingMain(true);\n    setFormData((prev) => ({ ...prev, generatedPrompt: '' }));\n    try {\n      const payload = {\n        model: selectedPromptModel || undefined,\n        temperature: promptTemperature === '' ? undefined : parseFloat(promptTemperature),\n        sourcePrompt: formData.sceneGeneratedPrompt || '',\n      };\n      const resp = await syspromptAPI.generateNoScene(payload);\n      setFormData((prev) => ({ ...prev, generatedPrompt: resp.prompt || '' }));\n    } catch {\n    } finally {\n      setIsGeneratingMain(false);\n    }\n  };\n  const handleAddTag = (e) => {\n    if (e.key === 'Enter' && tagInput.trim()) {\n      if (!formData.tags.includes(tagInput.trim())) {\n        setFormData((p) => ({ ...p, tags: [...p.tags, tagInput.trim()] }));\n      }\n      setTagInput('');\n    }\n  };\n  const handleTemplateSelectScene = (id) => { setFormData((prev) => ({ ...prev, templateIdScene: id })); setIsDropdownOpenScene(false); };\n  const handleRelSelect = (rel) => { setIsCustomRel(false); setFormData((prev) => ({ ...prev, relationship: rel, customRelationship: '' })); };\n  const handleCustomRelSelect = () => { setIsCustomRel(true); setFormData((prev) => ({ ...prev, relationship: '' })); };\n  const handleStyleExampleChange = (index, value) => { const newExamples = [...formData.styleExamples]; newExamples[index] = value; setFormData((prev) => ({ ...prev, styleExamples: newExamples })); };\n  return (\n    <div className=\"animate-fade-in pb-20\">\n      <div className=\"flex items-center gap-4 mb-6\">\n        <button onClick={onCancel} className=\"w-10 h-10 flex items-center justify-center bg-white rounded-full shadow-sm text-gray-500 hover:text-pink-600 transition-colors\"><ChevronLeft size={20} /></button>\n        <div>\n          <h2 className=\"text-2xl font-cute text-pink-900\">{initialData ? '编辑角色' : '创建新角色'}</h2>\n          <p className=\"text-gray-400 text-xs\">{initialData ? '修改角色设定与提示词' : '填写设定并生成专属提示词'}</p>\n        </div>\n        <div className=\"ml-auto flex gap-3\">\n          <button onClick={onCancel} className=\"px-6 py-2.5 rounded-xl bg-white text-gray-500 font-bold text-sm shadow-sm hover:bg-gray-50\">取消</button>\n          <button\n            onClick={async () => {\n              if (!formData.name || !formData.name.trim()) {\n                notify && notify('保存失败：请输入角色名称', 'error');\n                return;\n              }\n              const payload = {\n                name: formData.name.trim(),\n                gender: formData.gender,\n                sceneTemplateId: formData.templateIdScene ? parseInt(formData.templateIdScene) : (initialData?.sceneTemplateId ?? null),\n                identity: formData.identity || null,\n                tagline: formData.tagline || null,\n                personality: formData.personality || null,\n                relationship: isCustomRel ? (formData.customRelationship || null) : (formData.relationship || null),\n                plotTheme: formData.plotTheme || null,\n                plotSummary: formData.plotSummary || null,\n                openingLine: formData.openingLine || null,\n                systemPrompt: formData.generatedPrompt || null,\n                systemPromptScene: formData.sceneGeneratedPrompt || null,\n                promptModelId: selectedPromptModel || null,\n                promptTemperature: promptTemperature === '' ? null : parseFloat(promptTemperature),\n                sceneModelId: selectedSceneModel || null,\n                sceneTemperature: sceneTemperature === '' ? null : parseFloat(sceneTemperature),\n                hobbies: formData.hobbies || null,\n                experiences: formData.experiences || null,\n                status: formData.published ? 'published' : 'draft',\n                tags: formData.tags || [],\n                styleExamples: formData.styleExamples || [],\n                avatar: formData.avatar || null,\n                characterType: formData.characterType || null,\n                age: formData.age === '' ? null : parseInt(formData.age, 10),\n                occupation: formData.occupation || null,\n              };\n              try {\n                if (mode === 'edit' && initialData?.id) {\n                  await charactersAPI.update(initialData.id, payload);\n                  notify && notify('保存成功：角色已更新');\n                } else {\n                  await charactersAPI.create(payload);\n                  notify && notify('保存成功：角色已保存');\n                }\n                onCancel();\n              } catch (e) {\n                console.error('[characters.save] failed', { mode, payload, error: e });\n                notify && notify('保存失败：请稍后重试', 'error');\n              }\n            }}\n            className=\"px-6 py-2.5 rounded-xl bg-gradient-to-r from-pink-500 to-pink-600 text-white font-bold text-sm shadow-lg shadow-pink-200 flex items-center gap-2\"\n          >\n            <Save size={16} /> 保存角色\n          </button>\n        </div>\n      </div>\n      <div className=\"grid grid-cols-12 gap-6\">\n        <div className=\"col-span-12 lg:col-span-8 space-y-6\">\n          <div className=\"solid-card p-8 rounded-3xl space-y-4\">\n            <h3 className=\"font-cute text-lg text-pink-900 flex items-center gap-2 mb-2\"><span className=\"w-1.5 h-4 bg-yellow-400 rounded-full\"></span> 角色类型设置</h3>\n            <div className=\"flex flex-wrap gap-3\">\n              {['原创角色', '二次创作', '其他'].map((t) => (\n                <button\n                  key={t}\n                  onClick={() => setFormData({ ...formData, characterType: t })}\n                  className={`px-6 py-3 rounded-2xl text-sm font-bold transition-all ${formData.characterType === t ? 'bg-pink-500 text-white shadow-md' : 'bg-white text-gray-500 hover:text-pink-600'}`}\n                >\n                  {t}\n                </button>\n              ))}\n            </div>\n          </div>\n          <div className=\"solid-card p-8 rounded-3xl space-y-6\">\n            <h3 className=\"font-cute text-lg text-pink-900 flex items-center gap-2 mb-2\"><span className=\"w-1.5 h-4 bg-yellow-400 rounded-full\"></span> 基础设定</h3>\n            <div className=\"grid grid-cols-2 gap-6\">\n              <div>\n                <label className=\"block text-xs font-bold text-pink-800 mb-2\">角色名称</label>\n                <input value={formData.name} onChange={(e) => setFormData({ ...formData, name: e.target.value })} type=\"text\" className=\"dream-input w-full px-4 py-3 rounded-xl text-sm font-bold text-gray-700\" placeholder=\"角色姓名\" />\n              </div>\n              <div>\n                <label className=\"block text-xs font-bold text-pink-800 mb-2\">性别</label>\n                <div className=\"flex bg-gray-50 p-1 rounded-xl border border-gray-200\">\n                  {['男', '女', '其他'].map((g) => (\n                    <button key={g} onClick={() => setFormData({ ...formData, gender: g })} className={`flex-1 py-2 rounded-lg text-xs font-bold transition-all ${formData.gender === g ? 'bg-pink-500 text-white shadow-md' : 'text-gray-400 hover:text-pink-500'}`}>{g}</button>\n                  ))}\n                </div>\n              </div>\n              <div>\n                <label className=\"block text-xs font-bold text-pink-800 mb-2\">年龄</label>\n                <input value={formData.age} onChange={(e) => setFormData({ ...formData, age: e.target.value })} type=\"number\" min=\"0\" max=\"200\" className=\"dream-input w-full px-4 py-3 rounded-xl text-sm\" placeholder=\"年龄\" />\n              </div>\n              <div>\n                <label className=\"block text-xs font-bold text-pink-800 mb-2\">职业</label>\n                <input value={formData.occupation} onChange={(e) => setFormData({ ...formData, occupation: e.target.value })} type=\"text\" className=\"dream-input w-full px-4 py-3 rounded-xl text-sm\" placeholder=\"职业\" />\n              </div>\n            </div>\n            <div>\n              <label className=\"block text-xs font-bold text-pink-800 mb-2\">身份背景 (Identity)</label>\n              <textarea value={formData.identity} onChange={(e) => setFormData({ ...formData, identity: e.target.value })} rows=\"3\" className=\"dream-input w-full px-4 py-3 rounded-xl text-sm resize-none\" placeholder=\"角色的年龄、职业、过往经历...\"></textarea>\n            </div>\n            <div>\n              <label className=\"block text-xs font-bold text-pink-800 mb-2\">一句话人设 (Tagline)</label>\n              <input value={formData.tagline} onChange={(e) => setFormData({ ...formData, tagline: e.target.value })} className=\"dream-input w-full px-4 py-3 rounded-xl text-sm\" placeholder=\"例如：表面温柔克己实则腹黑\" />\n            </div>\n            <div>\n              <label className=\"block text-xs font-bold text-pink-800 mb-2\">性格 (Personality)</label>\n              <textarea value={formData.personality} onChange={(e) => setFormData({ ...formData, personality: e.target.value })} rows=\"2\" className=\"dream-input w-full px-4 py-3 rounded-xl text-sm resize-none\" placeholder=\"例：占有欲强，容易吃醋...\" />\n            </div>\n            <div>\n              <label className=\"block text-xs font-bold text-pink-800 mb-2\">角色标签</label>\n              <div onClick={() => setShowTagModal(true)} className=\"dream-input w-full px-3 py-2 min-h-[46px] flex flex-wrap gap-2 items-center bg-white/60 cursor-pointer hover:bg-white transition rounded-2xl border border-pink-100\">\n                {formData.tags.length === 0 && (\n                  <span className=\"text-xs text-[#B3A4C8] ml-1\">点击添加标签 (#傲娇 #高冷...)</span>\n                )}\n                {formData.tags.map((tag) => (\n                  <span key={tag} className=\"tag-pill px-2 py-1 flex items-center shadow-sm\">\n                    #{tag}\n                    <button onClick={(e) => { e.stopPropagation(); setFormData((prev) => ({ ...prev, tags: prev.tags.filter((t) => t !== tag) })); }} className=\"ml-1 opacity-60 hover:opacity-100\">\n                      <X size={12} />\n                    </button>\n                  </span>\n                ))}\n                <span className=\"ml-auto text-pink-300 text-xs\">›</span>\n              </div>\n            </div>\n            <div>\n              <label className=\"block text-xs font-bold text-pink-800 mb-2\">当下的关系</label>\n              <div className=\"flex flex-wrap gap-2 mb-2\">\n                <button onClick={handleCustomRelSelect} className={`px-4 py-2 rounded-xl text-xs font-bold transition-all border ${isCustomRel ? 'bg-pink-500 text-white shadow-md border-pink-500' : 'bg-white text-gray-500 border-gray-200 hover:border-pink-300'}`}>自定义</button>\n                {RELATIONSHIP_PRESETS.map((rel) => (\n                  <button key={rel} onClick={() => handleRelSelect(rel)} className={`px-4 py-2 rounded-xl text-xs font-bold transition-all border ${!isCustomRel && formData.relationship === rel ? 'bg-pink-500 text-white shadow-md border-pink-500' : 'bg-white text-gray-500 border-gray-200 hover:border-pink-300'}`}>{rel}</button>\n                ))}\n              </div>\n              {isCustomRel && (\n                <div className=\"animate-fade-in mt-2\">\n                  <input type=\"text\" value={formData.customRelationship} onChange={(e) => setFormData({ ...formData, customRelationship: e.target.value })} className=\"dream-input w-full px-4 py-2.5 rounded-xl text-sm\" placeholder=\"请输入自定义关系\" />\n                </div>\n              )}\n            </div>\n          </div>\n          <div className=\"solid-card p-8 rounded-3xl space-y-6\">\n            <h3 className=\"font-cute text-lg text-pink-900 flex items-center gap-2 mb-2\"><span className=\"w-1.5 h-4 bg-yellow-400 rounded-full\"></span> 第一情节</h3>\n            <div className=\"bg-pink-50 border border-pink-100 rounded-2xl p-4 flex gap-3 text-pink-700 text-sm leading-relaxed\">\n              <Info size={18} className=\"flex-shrink-0 mt-0.5 text-pink-500\" />\n              <div>第一情节的内容将被应用于和角色的第一次聊天。此外，设定第一情节并选择公开角色后，情节内容将显示在角色资料页上。</div>\n            </div>\n            <div>\n              <label className=\"block text-xs font-bold text-pink-800 mb-2\">主题</label>\n              <input value={formData.plotTheme} onChange={(e) => setFormData({ ...formData, plotTheme: e.target.value })} className=\"dream-input w-full px-4 py-3 rounded-xl text-sm\" placeholder=\"例：当温柔人夫终于爆发腹黑属性\" />\n            </div>\n            <div>\n              <label className=\"block text-xs font-bold text-pink-800 mb-2\">情节梗概</label>\n              <textarea value={formData.plotSummary} onChange={(e) => setFormData({ ...formData, plotSummary: e.target.value })} rows=\"4\" className=\"dream-input w-full px-4 py-3 rounded-xl text-sm resize-none\" placeholder=\"例：在一起这么久了，他还是一如既往的温柔体贴，从来不干涉你的个人生活。今天晚上你去酒吧玩，故意装作喝醉和他打电话，却在他应了一声后开始软声叫着别人的名字......\" />\n            </div>\n            <div>\n              <label className=\"block text-xs font-bold text-pink-800 mb-2\">开场白</label>\n              <input value={formData.openingLine} onChange={(e) => setFormData({ ...formData, openingLine: e.target.value })} className=\"dream-input w-full px-4 py-3 rounded-xl text-sm\" placeholder=\"例：“出来，我在酒吧门口”\" />\n            </div>\n          </div>\n          <div className=\"solid-card rounded-3xl overflow-hidden\">\n            <div className=\"p-8 pb-4 flex justify-between items-center cursor-pointer hover:bg-gray-50 transition-colors\" onClick={() => setShowAdvanced(!showAdvanced)}>\n              <div className=\"flex items-center gap-2\"><span className=\"w-1.5 h-4 bg-yellow-400 rounded-full\"></span><h3 className=\"font-cute text-lg text-pink-900\">进阶设定</h3><span className=\"text-[10px] px-2 py-0.5 bg-pink-100 text-pink-600 rounded\">可选</span></div>\n              <ChevronDown size={20} className={`text-gray-400 transition-transform duration-300 ${showAdvanced ? 'rotate-180' : ''}`} />\n            </div>\n            {showAdvanced && (\n              <div className=\"p-8 pt-0 space-y-6 animate-in slide-in-from-top-4 fade-in duration-300\">\n                <div>\n                  <label className=\"block text-xs font-bold text-pink-800 mb-3\">说话风格示例</label>\n                  <div className=\"space-y-3\">\n                    {[0, 1, 2].map((idx) => (\n                      <div key={idx} className=\"relative flex items-center gap-3\">\n                        <span className=\"text-xs font-bold text-pink-300 font-mono\">0{idx + 1}</span>\n                        <input type=\"text\" value={formData.styleExamples[idx] || ''} onChange={(e) => handleStyleExampleChange(idx, e.target.value)} className=\"dream-input flex-1 px-4 py-3 rounded-xl text-sm\" placeholder={idx === 0 ? '例：哼，别以为我会感谢你。' : idx === 1 ? '例：今晚月色真美，不一起走走吗？' : '例：再靠近一步，我就不客气了。'} />\n                      </div>\n                    ))}\n                  </div>\n                </div>\n                <div>\n                  <label className=\"block text-xs font-bold text-pink-800 mb-2\">爱好</label>\n                  <textarea value={formData.hobbies} onChange={(e) => setFormData({ ...formData, hobbies: e.target.value })} rows=\"3\" className=\"dream-input w-full px-4 py-3 rounded-xl text-sm resize-none\" placeholder=\"例：喜欢看书、收集古董怀表...\" />\n                </div>\n                <div>\n                  <label className=\"block text-xs font-bold text-pink-800 mb-2\">经历</label>\n                  <textarea value={formData.experiences} onChange={(e) => setFormData({ ...formData, experiences: e.target.value })} rows=\"4\" className=\"dream-input w-full px-4 py-3 rounded-xl text-sm resize-none\" placeholder=\"请填写角色个人经历或你们的共同经历\" />\n                </div>\n              </div>\n            )}\n          </div>\n          <div className=\"solid-card p-8 rounded-3xl relative overflow-visible bg-gradient-to-r from-pink-50 to-pink-100 border-pink-100\">\n            <h3 className=\"font-cute text-lg text-pink-900 mb-4 flex items-center gap-2\"><span className=\"w-1.5 h-4 bg-yellow-400 rounded-full\"></span> 角色提示词配置（带场景描述）</h3>\n            <div className=\"mb-4\">\n              <label className=\"block text-xs font-bold text-pink-800 mb-2\">角色提示词AI模型（场景）</label>\n              <div className=\"flex items-center gap-4\">\n                <div className=\"relative z-50 flex-1\" ref={modelRefScene}>\n                  <button onClick={() => setIsModelOpenScene(!isModelOpenScene)} className={`dream-input w-full px-4 py-3 rounded-xl text-sm text-left font-bold transition-all bg-white flex justify-between items-center ${isModelOpenScene ? 'border-pink-500 ring-4 ring-pink-100/50' : ''}`}>\n                    <span className={`${selectedSceneModel ? 'text-gray-700' : 'text-gray-400 font-normal'}`}>{getModelDisplay(selectedSceneModel)}</span>\n                    <div className={`text-pink-400 transition-transform ${isModelOpenScene ? 'rotate-180' : ''}`}>▼</div>\n                  </button>\n                  {isModelOpenScene && (\n                    <ul className=\"absolute top-full mt-1 w-full bg-white border border-pink-200 rounded-xl shadow-xl max-h-48 overflow-y-auto z-50\">\n                      {modelList.length === 0 ? (\n                        <li className=\"px-4 py-3 text-sm text-gray-400\">暂无模型</li>\n                      ) : (\n                        modelList.map(m => (\n                          <li key={m.id} onClick={() => { setSelectedSceneModel(m.model_id); setIsModelOpenScene(false); }} className={`px-4 py-3 text-sm text-gray-700 hover:bg-pink-50 cursor-pointer transition-colors ${selectedSceneModel === m.model_id ? 'bg-pink-100 font-bold text-pink-700' : ''}`}>{m.model_nickname || m.model_name || m.model_id}</li>\n                        ))\n                      )}\n                    </ul>\n                  )}\n                </div>\n                <div className=\"flex items-center gap-2 min-w-[140px] justify-end\">\n                  <input type=\"number\" min=\"0\" max=\"2\" step=\"0.05\" value={sceneTemperature} onChange={(e) => setSceneTemperature(e.target.value)} className=\"dream-input w-24 px-2 py-3 rounded-xl text-sm font-bold text-center\" />\n                  <div className=\"relative group\">\n                    <HelpCircle size={18} className=\"text-pink-400 cursor-help\" />\n                    <div className=\"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 w-48 p-3 bg-white/90 backdrop-blur-sm border border-pink-100 text-pink-900 text-xs rounded-xl shadow-xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50 pointer-events-none text-center\">\n                      温度：高数值输出随机，低数值输出集中。\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n            <div className=\"flex gap-4 items-end mt-4\">\n              <div className=\"flex-1\">\n                <label className=\"block text-xs font-bold text-pink-800 mb-2\">选择基础模版</label>\n                <div className=\"relative z-20 flex-1\" ref={dropdownRefScene}>\n                  <button onClick={openTplDropdownScene} className={`dream-input w-full px-4 py-3 rounded-xl text-sm text-left font-bold transition-all bg-white flex justify-between items-center ${isDropdownOpenScene ? 'border-pink-500 ring-4 ring-pink-100/50' : ''}`}>\n                    <span className={`${formData.templateIdScene ? 'text-gray-700' : 'text-gray-400 font-normal'}`}>{selectedTemplateNameScene}</span>\n                    <div className={`text-pink-400 transition-transform ${isDropdownOpenScene ? 'rotate-180' : ''}`}>▼</div>\n                  </button>\n                  {isDropdownOpenScene && (\n                    <ul className=\"absolute top-full mt-1 w-full bg-white border border-pink-200 rounded-xl shadow-xl max-h-48 overflow-y-auto z-50\">\n                      <li onClick={() => handleTemplateSelectScene('')} className=\"px-4 py-3 text-sm text-gray-400 hover:bg-pink-50 cursor-pointer border-b border-pink-50\">-- 请选择 --</li>\n                      {tplLoading ? (\n                        <li className=\"px-4 py-3 text-sm text-gray-400\">加载中...</li>\n                      ) : (\n                        tplList.map((tpl) => (\n                          <li key={tpl.id} onClick={() => handleTemplateSelectScene(tpl.id.toString())} className={`px-4 py-3 text-sm text-gray-700 hover:bg-pink-50 cursor-pointer transition-colors ${formData.templateIdScene == tpl.id ? 'bg-pink-100 font-bold text-pink-700' : ''}`}>{tpl.name} ({tpl.type})</li>\n                        ))\n                      )}\n                    </ul>\n                  )}\n                </div>\n              </div>\n              <button onClick={async () => {\n                if (!formData.templateIdScene) return alert('请先选择一个提示词模版');\n                setIsGeneratingScene(true);\n                setFormData((prev) => ({ ...prev, sceneGeneratedPrompt: '' }));\n                try {\n                  const selectedTemplate = tplList.find((t) => t.id === parseInt(formData.templateIdScene));\n                  const payload = {\n                    templateContent: selectedTemplate?.content || '',\n                    model: selectedSceneModel || undefined,\n                    temperature: sceneTemperature === '' ? undefined : parseFloat(sceneTemperature),\n                    name: formData.name,\n                    gender: formData.gender,\n                    age: formData.age,\n                    occupation: formData.occupation,\n                    identity: formData.identity,\n                    tagline: formData.tagline,\n                    tags: formData.tags,\n                    personality: formData.personality,\n                    relationship: isCustomRel ? formData.customRelationship : formData.relationship,\n                    styleExamples: formData.styleExamples,\n                    hobbies: formData.hobbies,\n                    experiences: formData.experiences,\n                  };\n                  const resp = await syspromptAPI.generate(payload);\n                  setFormData((prev) => ({ ...prev, sceneGeneratedPrompt: resp.prompt || '' }));\n                } catch {\n                } finally {\n                  setIsGeneratingScene(false);\n                }\n              }} disabled={isGeneratingScene} className=\"px-6 py-3 rounded-xl bg-pink-600 text-white font-bold text-sm shadow-lg shadow-pink-200 hover:bg-pink-700 transition-all flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed min-w-[140px] justify-center z-0\">\n                {isGeneratingScene ? <span className=\"animate-spin\"><RefreshCw size={16} /></span> : <Wand2 size={16} className=\"text-yellow-300\" />}\n                {isGeneratingScene ? '生成中...' : '生成提示词'}\n              </button>\n            </div>\n            <p className=\"text-xs text-pink-400 mt-2 ml-1\">* 将根据上方填写的设定，自动填充到模版占位符中</p>\n            <div className=\"mt-4 relative\">\n              <textarea rows=\"12\" value={formData.sceneGeneratedPrompt} onChange={(e) => setFormData({ ...formData, sceneGeneratedPrompt: e.target.value })} className=\"dream-input w-full px-5 py-4 rounded-xl text-sm leading-relaxed font-mono text-gray-700 bg-white focus:bg-white resize-y shadow-inner\" placeholder=\"点击上方“生成提示词”按钮，或在此直接编写 Prompt...\"></textarea>\n              {!formData.sceneGeneratedPrompt && (\n                <div className=\"absolute inset-0 flex items-center justify-center pointer-events-none opacity-30\">\n                  <div className=\"text-center\"><FileText size={48} className=\"mx-auto mb-2 text-pink-300\" /><p className=\"text-sm font-bold text-pink-400\">等待生成...</p></div>\n                </div>\n              )}\n            </div>\n          </div>\n          <div className=\"solid-card p-8 rounded-3xl relative overflow-visible bg-gradient-to-r from-pink-50 to-pink-100 border-pink-100\">\n            <h3 className=\"font-cute text-lg text-pink-900 mb-4 flex items-center gap-2\"><span className=\"w-1.5 h-4 bg-yellow-400 rounded-full\"></span> 角色提示词配置</h3>\n            <div className=\"mb-4\">\n              <label className=\"block text-xs font-bold text-pink-800 mb-2\">角色提示词AI模型</label>\n              <div className=\"flex items-center gap-4\">\n                <div className=\"relative z-50 flex-1\" ref={modelRefMain}>\n                  <button onClick={() => setIsModelOpenMain(!isModelOpenMain)} className={`dream-input w-full px-4 py-3 rounded-xl text-sm text-left font-bold transition-all bg-white flex justify-between items-center ${isModelOpenMain ? 'border-pink-500 ring-4 ring-pink-100/50' : ''}`}>\n                    <span className={`${selectedPromptModel ? 'text-gray-700' : 'text-gray-400 font-normal'}`}>{getModelDisplay(selectedPromptModel)}</span>\n                    <div className={`text-pink-400 transition-transform ${isModelOpenMain ? 'rotate-180' : ''}`}>▼</div>\n                  </button>\n                  {isModelOpenMain && (\n                    <ul className=\"absolute top-full mt-1 w-full bg-white border border-pink-200 rounded-xl shadow-xl max-h-48 overflow-y-auto z-50\">\n                      {modelList.length === 0 ? (\n                        <li className=\"px-4 py-3 text-sm text-gray-400\">暂无模型</li>\n                      ) : (\n                        modelList.map(m => (\n                          <li key={m.id} onClick={() => { setSelectedPromptModel(m.model_id); setIsModelOpenMain(false); }} className={`px-4 py-3 text-sm text-gray-700 hover:bg-pink-50 cursor-pointer transition-colors ${selectedPromptModel === m.model_id ? 'bg-pink-100 font-bold text-pink-700' : ''}`}>{m.model_nickname || m.model_name || m.model_id}</li>\n                        ))\n                      )}\n                    </ul>\n                  )}\n                </div>\n                <div className=\"flex items-center gap-2 min-w-[140px] justify-end\">\n                  <input type=\"number\" min=\"0\" max=\"2\" step=\"0.05\" value={promptTemperature} onChange={(e) => setPromptTemperature(e.target.value)} className=\"dream-input w-24 px-2 py-3 rounded-xl text-sm font-bold text-center\" />\n                  <div className=\"relative group\">\n                    <HelpCircle size={18} className=\"text-pink-400 cursor-help\" />\n                    <div className=\"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 w-48 p-3 bg-white/90 backdrop-blur-sm border border-pink-100 text-pink-900 text-xs rounded-xl shadow-xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50 pointer-events-none text-center\">\n                      温度：高数值输出随机，低数值输出集中。\n                    </div>\n                  </div>\n                </div>\n                <button onClick={handleGeneratePrompt} disabled={isGeneratingMain} className=\"px-6 py-3 rounded-xl bg-pink-600 text-white font-bold text-sm shadow-lg shadow-pink-200 hover:bg-pink-700 transition-all flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed min-w-[140px] justify-center z-0\">\n                  {isGeneratingMain ? <span className=\"animate-spin\"><RefreshCw size={16} /></span> : <Wand2 size={16} className=\"text-yellow-300\" />}\n                  {isGeneratingMain ? '生成中...' : '生成提示词'}\n                </button>\n              </div>\n            </div>\n            <p className=\"text-xs text-pink-400 mt-2 ml-1\">* 将根据上方输出的提示词，进行二次生成不带场景描述的提示词。</p>\n            <div className=\"mt-4 relative\">\n              <textarea rows=\"12\" value={formData.generatedPrompt} onChange={(e) => setFormData({ ...formData, generatedPrompt: e.target.value })} className=\"dream-input w-full px-5 py-4 rounded-xl text-sm leading-relaxed font-mono text-gray-700 bg-white focus:bg-white resize-y shadow-inner\" placeholder=\"点击上方“生成提示词”按钮，或在此直接编写 Prompt...\"></textarea>\n              {!formData.generatedPrompt && (\n                <div className=\"absolute inset-0 flex items-center justify-center pointer-events-none opacity-30\">\n                  <div className=\"text-center\"><FileText size={48} className=\"mx-auto mb-2 text-pink-300\" /><p className=\"text-sm font-bold text-pink-400\">等待生成...</p></div>\n                </div>\n              )}\n            </div>\n          </div>\n\n        </div>\n        <div className=\"col-span-12 lg:col-span-4 space-y-6\">\n          <div className=\"glass-card p-6 rounded-3xl flex flex-col items-center text-center\">\n            <h3 className=\"font-cute text-pink-900 mb-4 w-full text-left border-b border-pink-100 pb-2\">头像预览</h3>\n            <div onClick={() => setShowAvatarEditor(true)} className=\"w-32 h-32 rounded-full bg-gray-100 border-4 border-white shadow-xl flex items-center justify-center mb-4 relative group cursor-pointer overflow-hidden\">\n              {formData.avatar ? <img src={formData.avatar} alt=\"Avatar\" className=\"w-full h-full object-cover\" /> : <div className=\"text-4xl text-gray-300 font-bold\">{formData.name ? formData.name[0] : '?'}</div>}\n              <div className=\"absolute inset-0 bg-black/30 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity text-white text-xs font-bold\">更换头像</div>\n            </div>\n            <div className=\"w-full\">\n              <label className=\"flex items-center justify-between p-4 bg-white/50 rounded-xl cursor-pointer hover:bg-white transition-colors border border-pink-50\">\n                <span className=\"text-sm font-bold text-gray-700\">发布到广场</span>\n                <div onClick={() => setFormData({ ...formData, published: !formData.published })} className={`w-12 h-6 rounded-full p-1 transition-colors duration-300 ${formData.published ? 'bg-pink-500' : 'bg-gray-300'}`}> \n                  <div className={`w-4 h-4 rounded-full bg-white shadow-sm transform transition-transform duration-300 ${formData.published ? 'translate-x-6' : ''}`}></div>\n                </div>\n              </label>\n              <p className=\"text-xs text-left text-gray-400 mt-2 px-1\">开启后，该角色将出现在公共广场，所有用户可见。</p>\n            </div>\n          </div>\n          <div className=\"glass-card p-6 rounded-3xl bg-gradient-to-br from-pink-500 to-pink-600 text-white\"><h4 className=\"font-bold mb-2 flex items-center gap-2\"><span className=\"inline-block\"><Wand2 size={16} className=\"text-yellow-300\" /></span> 提示</h4><p className=\"text-xs opacity-90 leading-relaxed\">好的 Prompt 决定了角色的灵魂。建议生成后仔细检查，补充更多细节。</p></div>\n        </div>\n      </div>\n      {showTagModal && (\n        <>\n          <div className=\"fixed top-0 right-0 bottom-0 left-64 bg-black/30 z-50\" onClick={() => setShowTagModal(false)}></div>\n          <div className=\"fixed top-0 right-0 bottom-0 left-64 z-50 flex items-center justify-center p-4\">\n            <div className=\"w-full max-w-4xl rounded-3xl bg-white p-6 shadow-2xl border border-pink-50\">\n              <div className=\"flex justify-between items-center mb-4\">\n                <button onClick={() => setShowTagModal(false)} className=\"w-8 h-8 rounded-full bg-pink-50 text-pink-800 flex items-center justify-center\">‹</button>\n                <h3 className=\"text-lg font-bold font-cute text-pink-900\">添加 #标签</h3>\n                <button onClick={() => setShowTagModal(false)} className=\"text-sm font-bold text-pink-600 bg-pink-50 px-3 py-1 rounded-full\">完成</button>\n              </div>\n              <div className=\"space-y-6 max-h-[70vh] overflow-y-auto\">\n                <div>\n                  <div className=\"text-xs font-bold text-gray-400 mb-2 ml-1\">选定的标签</div>\n                  <div className=\"flex flex-wrap gap-2 min-h-[46px] bg-pink-50/50 p-3 rounded-xl border border-pink-100 border-dashed\">\n                    {formData.tags.length === 0 ? (\n                      <span className=\"text-xs text-gray-400\">暂无标签</span>\n                    ) : (\n                      formData.tags.map((tag) => (\n                        <button key={tag} onClick={() => setFormData((prev) => ({ ...prev, tags: prev.tags.filter((t) => t !== tag) }))} className=\"bg-pink-500 text-white px-3 py-1.5 rounded-xl text-xs font-bold shadow-sm flex items-center gap-1\">\n                          #{tag} <span className=\"text-[10px] ml-1 opacity-80\">×</span>\n                        </button>\n                      ))\n                    )}\n                  </div>\n                </div>\n                <div>\n                  <div className=\"text-xs font-bold text-gray-400 mb-2 ml-1\">直接添加 (自定义)</div>\n                  <div className=\"flex gap-2\">\n                    <input value={customTagInput} onChange={(e) => setCustomTagInput(e.target.value)} onKeyDown={(e) => { if (e.key === 'Enter') { e.preventDefault(); const val = customTagInput.trim(); if (val) setFormData((prev) => (prev.tags.includes(val) ? prev : { ...prev, tags: [...prev.tags, val] })); setCustomTagInput(''); } }} type=\"text\" placeholder=\"输入标签，不用加#\" className=\"dream-input flex-1 px-4 py-2 text-sm bg-white rounded-xl\" />\n                    <button onClick={() => { const val = customTagInput.trim(); if (val) setFormData((prev) => (prev.tags.includes(val) ? prev : { ...prev, tags: [...prev.tags, val] })); setCustomTagInput(''); }} className=\"bg-gradient-to-r from-pink-400 to-pink-500 text-white px-4 rounded-xl font-bold text-sm shadow-md active:scale-95 transition\">添加</button>\n                  </div>\n                </div>\n                <div>\n                  <div className=\"text-xs font-bold text-gray-400 mb-2 ml-1\">标签选择</div>\n                  <div className=\"grid grid-cols-4 gap-2\">\n                    {availableTags.map((tag) => (\n                      <button key={tag} onClick={() => setFormData((prev) => ({ ...prev, tags: prev.tags.includes(tag) ? prev.tags.filter((t) => t !== tag) : [...prev.tags, tag] }))} className={`tag-select-btn flex items-center justify-center ${formData.tags.includes(tag) ? 'active' : ''}`}>#{tag}</button>\n                    ))}\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </>\n      )}\n      {showAvatarEditor && (\n        <AvatarEditor\n          initialImage={formData.avatar || null}\n          onSave={async (dataUrl) => {\n            try {\n              const r = await uploadAPI.avatar(dataUrl);\n              setFormData((p) => ({ ...p, avatar: r.url }));\n            } catch { }\n            setShowAvatarEditor(false);\n          }}\n          onCancel={() => setShowAvatarEditor(false)}\n        />\n      )}\n      {showAvatarEditor && (\n        <AvatarEditor\n          initialImage={formData.avatar}\n          onSave={(newAvatar) => { setFormData(prev => ({ ...prev, avatar: newAvatar })); setShowAvatarEditor(false); }}\n          onCancel={() => setShowAvatarEditor(false)}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default CharacterCreateView;\n","import React, { useState, useEffect } from 'react';\nimport { Plus, Edit3, Copy, Archive, Send, X } from 'lucide-react';\nimport CharacterCreateView from './CharacterCreateView.jsx';\nimport { ToastProvider, useToast } from '../Toast.jsx';\nimport { charactersAPI } from '../api.js';\n\nconst CharacterManagementInner = ({ creatorRole }) => {\n  const [view, setView] = useState('list');\n  const [editingChar, setEditingChar] = useState(null);\n  const [characterList, setCharacterList] = useState([]);\n  const [mode, setMode] = useState('new');\n  const { showToast } = useToast();\n  const [deleteTarget, setDeleteTarget] = useState(null);\n  const CARD_HEIGHT = 220;\n  const TAG_MAX_W = 300;\n  const reload = async () => {\n    try {\n      const params = creatorRole ? { creator_role: creatorRole } : {};\n      const d = await charactersAPI.list(params);\n      setCharacterList(d.items || []);\n    } catch {\n      showToast('加载失败', 'error');\n    }\n  };\n  useEffect(() => { reload(); }, [creatorRole]);\n  const handleEdit = (char) => { setEditingChar(char); setMode('edit'); setView('create'); };\n  const handleCreateNew = () => { setEditingChar(null); setMode('new'); setView('create'); };\n  const handleCopy = (char) => { const copiedChar = { ...char, id: undefined, name: `${char.name}_copy`, status: 'draft' }; setEditingChar(copiedChar); setMode('copy'); setView('create'); showToast('复制成功，已进入编辑'); };\n  const handleToggleStatus = async (id, current) => { try { await charactersAPI.setStatus(id, current === 'published' ? 'draft' : 'published'); await reload(); } catch { showToast('操作失败', 'error'); } };\n  const openDelete = (char) => setDeleteTarget(char);\n  const closeDelete = () => setDeleteTarget(null);\n  const confirmDelete = async () => { if (!deleteTarget) return; try { await charactersAPI.remove(deleteTarget.id); showToast('删除成功'); await reload(); } catch { showToast('删除失败', 'error'); } finally { closeDelete(); } };\n  if (view === 'create') return <CharacterCreateView initialData={editingChar} onCancel={() => { setView('list'); reload(); }} mode={mode} notify={showToast} />;\n  return (\n    <div className=\"space-y-6 animate-fade-in\">\n      <div className=\"flex justify-between items-center\">\n        <div>\n          <h2 className=\"text-2xl font-cute text-pink-900 flex items-center gap-2\">\n            <span className=\"w-1.5 h-6 bg-yellow-400 rounded-full inline-block\"></span>\n            {creatorRole === 'user_role' ? '用户角色' : '官方角色'}\n          </h2>\n          <p className=\"text-gray-400 text-xs mt-1 ml-4\">\n            {creatorRole === 'user_role' ? '查看用户创建的角色' : '管理官方发布的 AI 角色'}\n          </p>\n        </div>\n        {creatorRole !== 'user_role' && (\n          <button onClick={handleCreateNew} className=\"bg-gradient-to-r from-pink-500 to-pink-600 text-white px-5 py-2.5 rounded-xl font-bold shadow-lg shadow-pink-200 hover:opacity-90 transition-all flex items-center gap-2 text-sm\">\n            <Plus size={16} /> 创建角色\n          </button>\n        )}\n      </div>\n      <div className=\"grid gap-6\" style={{ gridTemplateColumns: 'repeat(auto-fit, minmax(320px, 360px))' }}>\n        {characterList.map((char) => (\n          <div key={char.id} className=\"relative w-full\">\n            <div className=\"glass-card p-4 rounded-3xl hover:shadow-xl transition-all group relative overflow-hidden h-[220px] flex flex-col\">\n              <div className={`absolute top-4 right-4 text-xs px-2 py-0.5 rounded-md font-bold ${char.status === 'published' ? 'bg-green-100 text-green-600' : 'bg-gray-100 text-gray-500'}`}>{char.status === 'published' ? '已发布' : '草稿'}</div>\n              <div className=\"flex items-start gap-4\">\n                <div className=\"w-20 h-20 rounded-2xl bg-gradient-to-br from-pink-200 to-pink-300 flex items-center justify-center text-white text-xl font-bold shadow-inner border-2 border-white overflow-hidden flex-shrink-0\">\n                  {char.avatar ? (\n                    <img src={char.avatar} alt=\"avatar\" className=\"w-full h-full object-cover\" />\n                  ) : (\n                    <span>{char.name ? (char.name[0]) : '?'}</span>\n                  )}\n                </div>\n                <div className=\"flex-1 min-w-0\">\n                  <div className=\"flex items-baseline gap-2\">\n                    <h3 className=\"font-bold text-lg text-gray-800 truncate\">{char.name}</h3>\n                    <div className=\"text-xs text-gray-400 truncate\">\n                      {(char.age != null && char.age !== '') ? `${char.age}岁` : ''}\n                      {char.occupation ? `${(char.age != null && char.age !== '') ? ' · ' : ''}${char.occupation}` : ''}\n                    </div>\n                  </div>\n                  <div className=\"flex gap-1 mt-2 flex-nowrap whitespace-nowrap overflow-hidden\" style={{ maxWidth: TAG_MAX_W }}>\n                    {char.tags.map((t) => (\n                      <span key={t} className=\"text-[10px] bg-pink-50 text-pink-600 px-1.5 py-0.5 rounded border border-pink-100\">#{t}</span>\n                    ))}\n                  </div>\n                  {/* 人设文案移动到头像下方，完整换行显示 */}\n                </div>\n              </div>\n              <div className=\"mt-3\">\n                <p className=\"text-gray-600 text-sm leading-relaxed break-words\">\n                  {char.tagline || '暂无一句话人设'}\n                </p>\n              </div>\n              <div className=\"mt-auto flex gap-2 pt-3 border-t border-white/50\">\n                <button onClick={() => handleEdit(char)} className=\"flex-1 py-2 text-xs font-bold text-pink-600 bg-pink-50 hover:bg-pink-100 rounded-lg transition-colors flex items-center justify-center gap-1 mx-1\"><Edit3 size={12} /> 编辑</button>\n                <button onClick={() => handleCopy(char)} className=\"flex-1 py-2 text-xs font-bold text-blue-600 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors flex items-center justify-center gap-1 mx-1\"><Copy size={12} /> 复制</button>\n                {char.status === 'published' ? (\n                  <button onClick={() => handleToggleStatus(char.id, char.status)} className=\"flex-1 py-2 text-xs font-bold text-red-600 bg-red-50 hover:bg-red-100 rounded-lg transition-colors flex items-center justify-center gap-1 mx-1\"><Archive size={12} /> 回收</button>\n                ) : (\n                  <button onClick={() => handleToggleStatus(char.id, char.status)} className=\"flex-1 py-2 text-xs font-bold text-green-600 bg-green-50 hover:bg-green-100 rounded-lg transition-colors flex items-center justify-center gap-1 mx-1\"><Send size={12} /> 发布</button>\n                )}\n              </div>\n            </div>\n            <button onClick={() => openDelete(char)} className=\"absolute -top-2 -right-2 z-10 w-8 h-8 rounded-full bg-white/60 backdrop-blur-md shadow-lg border border-pink-100 flex items-center justify-center text-gray-400 hover:text-red-500 transition\">\n              <X size={12} />\n            </button>\n          </div>\n        ))}\n      </div>\n      {deleteTarget && (\n        <>\n          <div className=\"fixed top-0 right-0 bottom-0 left-64 bg-black/30 z-50\" onClick={closeDelete}></div>\n          <div className=\"fixed top-0 right-0 bottom-0 left-64 z-50 flex items-center justify-center p-4\">\n            <div className=\"bg-white rounded-3xl border border-pink-50 p-6 w-full max-w-md shadow-2xl\">\n              <h3 className=\"font-cute text-lg text-pink-900 mb-2\">删除角色</h3>\n              <p className=\"text-sm text-gray-500 mb-4\">确定删除“{deleteTarget.name}”吗？此操作不可撤回。</p>\n              <div className=\"flex justify-end gap-3\">\n                <button onClick={closeDelete} className=\"px-5 py-2 rounded-xl bg-white border border-gray-200 text-gray-600 font-bold text-sm hover:bg-gray-50\">取消</button>\n                <button onClick={confirmDelete} className=\"px-5 py-2 rounded-xl bg-red-500 text-white font-bold text-sm shadow-sm hover:bg-red-600\">确认删除</button>\n              </div>\n            </div>\n          </div>\n        </>\n      )}\n    </div>\n  );\n};\n\nconst CharacterManagement = ({ creatorRole }) => (\n  <ToastProvider>\n    <CharacterManagementInner creatorRole={creatorRole} />\n  </ToastProvider>\n);\n\nexport default CharacterManagement;\n","import React, { useState } from 'react';\nimport { CheckCircle, Edit3, Trash2 } from 'lucide-react';\n\nconst UserRow = ({ user, onSaveLimit, onDelete, onChangePwd }) => {\n  const [currentLimit, setCurrentLimit] = useState(user.chatLimit);\n  const isDirty = currentLimit !== user.chatLimit;\n  const handleSave = () => { onSaveLimit(user.id, currentLimit); };\n  return (\n    <tr className=\"hover:bg-pink-50/30 transition-colors\">\n      <td className=\"p-5 pl-8\">\n        <img src={user.avatar || '/uploads/avatars/default_avatar.jpg'} alt={user.username} className=\"w-10 h-10 rounded-full object-cover shadow-sm\" />\n      </td>\n      <td className=\"p-5 font-mono text-gray-500\">{user.id.toString().padStart(4, '0')}</td>\n      <td className=\"p-5\">\n        <div className=\"font-bold text-gray-700\">{user.username}</div>\n        <div className=\"text-xs text-gray-400\">{user.email}</div>\n      </td>\n      <td className=\"p-5\">\n        <div className=\"text-xs text-gray-700\">{user.nickname || '-'}</div>\n      </td>\n      <td className=\"p-5\"><span className=\"font-mono text-pink-600 font-bold\">{user.used}</span> 次</td>\n      <td className=\"p-5\">\n        <div className=\"flex items-center gap-2\">\n          <input type=\"number\" value={currentLimit} onChange={(e) => setCurrentLimit(parseInt(e.target.value) || 0)} className=\"dream-input w-24 px-4 py-2 rounded-2xl text-sm text-center\" min=\"0\" />\n        </div>\n      </td>\n      <td className=\"p-5 text-right pr-8\">\n        <div className=\"space-x-2\">\n          <span className=\"relative inline-flex group\">\n            <button\n              onClick={handleSave}\n              disabled={!isDirty}\n              className={`p-1 rounded ${isDirty ? 'text-green-600 hover:text-green-700' : 'text-gray-300 cursor-not-allowed'}`}\n              aria-label=\"保存设置\"\n            >\n              <CheckCircle size={16} />\n            </button>\n            <span className={`absolute -top-7 left-1/2 -translate-x-1/2 px-2 py-1 rounded-md text-xs bg-gray-800 text-white whitespace-nowrap transition-opacity ${isDirty ? 'opacity-0 group-hover:opacity-100' : 'hidden'}`}>保存设置</span>\n          </span>\n          <span className=\"relative inline-flex group\">\n            <button\n              onClick={onChangePwd}\n              className=\"p-1 rounded text-pink-400 hover:text-pink-600\"\n              aria-label=\"修改密码\"\n            >\n              <Edit3 size={16} />\n            </button>\n            <span className=\"absolute -top-7 left-1/2 -translate-x-1/2 px-2 py-1 rounded-md text-xs bg-gray-800 text-white whitespace-nowrap opacity-0 group-hover:opacity-100\">修改密码</span>\n          </span>\n          <span className=\"relative inline-flex group\">\n            <button\n              onClick={onDelete}\n              className=\"p-1 rounded text-red-400 hover:text-red-600\"\n              aria-label=\"删除\"\n            >\n              <Trash2 size={16} />\n            </button>\n            <span className=\"absolute -top-7 left-1/2 -translate-x-1/2 px-2 py-1 rounded-md text-xs bg-gray-800 text-white whitespace-nowrap opacity-0 group-hover:opacity-100\">删除</span>\n          </span>\n        </div>\n      </td>\n    </tr>\n  );\n};\n\nexport default UserRow;\n","import React, { useState } from 'react';\nimport { ChevronLeft, Plus } from 'lucide-react';\n\nconst UserCreateView = ({ onCancel, onSave, notify }) => {\n  const [formData, setFormData] = useState({ username: '', nickname: '', email: '', password: '', chatLimit: 0 });\n  const handleChange = (e) => { const { name, value } = e.target; setFormData((prev) => ({ ...prev, [name]: name === 'chatLimit' ? parseInt(value) || 0 : value })); };\n  const handleSave = () => {\n    if (!formData.username || !formData.password) { notify && notify('创建失败：请填写用户名和密码', 'error'); return; }\n    const newUser = { username: formData.username, nickname: formData.nickname || null, email: formData.email || `${formData.username.toLowerCase()}@example.com`, password: formData.password, chatLimit: formData.chatLimit };\n    onSave(newUser);\n  };\n  return (\n    <div className=\"animate-fade-in pb-10\">\n      <div className=\"flex items-center gap-4 mb-6\">\n        <button onClick={onCancel} className=\"w-10 h-10 flex items-center justify-center bg-white rounded-full shadow-sm text-gray-500 hover:text-pink-600 transition-colors\"><ChevronLeft size={20} /></button>\n        <div>\n          <h2 className=\"text-2xl font-cute text-pink-900\">添加新用户</h2>\n          <p className=\"text-gray-400 text-xs\">分配后台登录权限和聊天额度</p>\n        </div>\n        <div className=\"ml-auto flex gap-3\">\n          <button onClick={onCancel} className=\"px-6 py-2.5 rounded-xl bg-white text-gray-500 font-bold text-sm shadow-sm hover:bg-gray-50\">取消</button>\n          <button onClick={handleSave} className=\"px-6 py-2.5 rounded-xl bg-gradient-to-r from-pink-500 to-pink-600 text白 font-bold text-sm shadow-lg shadow-pink-200 flex items-center gap-2\"><Plus size={16} /> 创建用户</button>\n        </div>\n      </div>\n      <div className=\"solid-card p-8 rounded-3xl space-y-6 max-w-2xl mx-auto\">\n        <h3 className=\"font-cute text-lg text-pink-900 flex items-center gap-2 mb-2\"><span className=\"w-1.5 h-4 bg-yellow-400 rounded-full\"></span> 用户基础信息</h3>\n        <div>\n          <label className=\"block text-xs font-bold text-pink-800 mb-2\">用户名</label>\n          <input type=\"text\" name=\"username\" value={formData.username} onChange={handleChange} className=\"dream-input w-full px-4 py-3 rounded-xl text-sm font-bold text-gray-700\" placeholder=\"为新用户设置一个用户名\" />\n        </div>\n        <div>\n          <label className=\"block text-xs font-bold text-pink-800 mb-2\">昵称</label>\n          <input type=\"text\" name=\"nickname\" value={formData.nickname} onChange={handleChange} className=\"dream-input w-full px-4 py-3 rounded-xl text-sm font-bold text-gray-700\" placeholder=\"显示名称（可选）\" />\n        </div>\n        <div>\n          <label className=\"block text-xs font-bold text-pink-800 mb-2\">邮箱</label>\n          <input type=\"email\" name=\"email\" value={formData.email} onChange={handleChange} className=\"dream-input w-full px-4 py-3 rounded-xl text-sm font-bold text-gray-700\" placeholder=\"用于联系与通知（可选）\" />\n        </div>\n        <div>\n          <label className=\"block text-xs font-bold text-pink-800 mb-2\">密码 (初始密码)</label>\n          <input type=\"password\" name=\"password\" value={formData.password} onChange={handleChange} className=\"dream-input w-full px-4 py-3 rounded-xl text-sm font-bold text-gray-700\" placeholder=\"设置初始密码\" />\n        </div>\n        <div>\n          <label className=\"block text-xs font-bold text-pink-800 mb-2\">聊天额度 (次数)</label>\n          <input type=\"number\" name=\"chatLimit\" value={formData.chatLimit} onChange={handleChange} className=\"dream-input w-full px-4 py-3 rounded-xl text-sm font-bold text-gray-700\" placeholder=\"0 表示默认无额度\" min=\"0\" />\n          <p className=\"text-xs text-gray-400 mt-1\">设置用户默认可用的聊天次数，0 次表示用户初始无额度。</p>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default UserCreateView;\n","import React, { useState, useEffect } from 'react';\nimport { Search, Plus } from 'lucide-react';\nimport UserRow from './UserRow.jsx';\nimport UserCreateView from './UserCreateView.jsx';\nimport { ToastProvider, useToast } from '../Toast.jsx';\nimport { usersAPI } from '../api.js';\n\nconst UsersViewContent = () => {\n  const [users, setUsers] = useState([]);\n  const [view, setView] = useState('list');\n  const [searchTerm, setSearchTerm] = useState('');\n  const [pwdUser, setPwdUser] = useState(null);\n  const [pwd1, setPwd1] = useState('');\n  const [pwd2, setPwd2] = useState('');\n  const [deleteUser, setDeleteUser] = useState(null);\n  const { showToast } = useToast();\n  useEffect(() => { usersAPI.list().then(setUsers).catch(() => {}); }, []);\n  const handleAddUser = async (newUser) => {\n    try {\n      const { id } = await usersAPI.create(newUser);\n      setUsers((prev) => [...prev, { ...newUser, id, used: 0 }]);\n      showToast(`用户 ${newUser.username} 创建成功`);\n      setView('list');\n    } catch { showToast('创建失败', 'error'); }\n  };\n  const handleLimitSave = async (id, newLimit) => {\n    try {\n      await usersAPI.update(id, { chatLimit: newLimit });\n      setUsers((prev) => prev.map((user) => (user.id === id ? { ...user, chatLimit: newLimit } : user)));\n      const u = users.find((x) => x.id === id);\n      showToast(`用户 ${u?.username ?? id} 限额已更新`);\n    } catch { showToast('保存失败', 'error'); }\n  };\n  const handleDelete = async (id) => {\n    try { await usersAPI.remove(id); setUsers((prev) => prev.filter(u => u.id !== id)); showToast('用户已删除'); }\n    catch { showToast('删除失败', 'error'); }\n  };\n  const confirmDeleteModal = deleteUser && (\n    <div className=\"fixed inset-0 z-50 bg-black/40 flex items-center justify-center\">\n      <div className=\"bg-white rounded-2xl p-6 w-80\">\n        <div className=\"font-bold mb-3\">确认删除该用户？</div>\n        <p className=\"text-sm text-gray-500 mb-5\">此操作不可恢复。</p>\n        <div className=\"flex gap-2 justify-end\">\n          <button className=\"px-4 py-2 rounded-xl bg-gray-100 text-gray-600\" onClick={() => setDeleteUser(null)}>取消</button>\n          <button className=\"px-4 py-2 rounded-xl bg-red-500 text-white\" onClick={() => { const id = deleteUser.id; setDeleteUser(null); handleDelete(id); }}>删除</button>\n        </div>\n      </div>\n    </div>\n  );\n  const changePwdModal = pwdUser && (\n    <div className=\"fixed inset-0 z-50 bg-black/40 flex items-center justify-center\">\n      <div className=\"bg-white rounded-2xl p-6 w-96\">\n        <div className=\"font-bold mb-3\">为用户 {pwdUser.username} 修改密码</div>\n        <div className=\"space-y-3\">\n          <input type=\"password\" placeholder=\"输入新密码\" className=\"dream-input w-full px-4 py-3 rounded-2xl text-sm font-bold text-gray-700\" value={pwd1} onChange={e => setPwd1(e.target.value)} />\n          <input type=\"password\" placeholder=\"再次输入新密码\" className=\"dream-input w-full px-4 py-3 rounded-2xl text-sm font-bold text-gray-700\" value={pwd2} onChange={e => setPwd2(e.target.value)} />\n        </div>\n        <div className=\"flex gap-2 justify-end mt-5\">\n          <button className=\"px-4 py-2 rounded-xl bg-gray-100 text-gray-600\" onClick={() => { setPwdUser(null); setPwd1(''); setPwd2(''); }}>取消</button>\n          <button className=\"px-4 py-2 rounded-xl bg-pink-500 text-white\" onClick={async () => {\n            if (!pwd1 || pwd1 !== pwd2) { showToast('两次输入密码不一致', 'error'); return; }\n            try { await usersAPI.changePassword(pwdUser.id, pwd1); showToast('密码已更新'); } catch { showToast('更新失败', 'error'); }\n            setPwdUser(null); setPwd1(''); setPwd2('');\n          }}>确认修改</button>\n        </div>\n      </div>\n    </div>\n  );\n  const filteredUsers = users.filter((user) => (\n    user.username?.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    (user.nickname ? user.nickname.toLowerCase().includes(searchTerm.toLowerCase()) : false) ||\n    user.email?.toLowerCase().includes(searchTerm.toLowerCase())\n  ));\n  if (view === 'create') return <UserCreateView onCancel={() => setView('list')} onSave={handleAddUser} notify={showToast} />;\n  return (\n    <div className=\"space-y-6 animate-fade-in\">\n      {confirmDeleteModal}\n      {changePwdModal}\n      <div className=\"flex justify-between items-center\">\n        <div>\n          <h2 className=\"text-2xl font-cute text-pink-900 flex items-center gap-2\"><span className=\"w-1.5 h-6 bg-yellow-400 rounded-full inline-block\"></span> 用户管理</h2>\n          <p className=\"text-gray-400 text-xs mt-1 ml-4\">监控用户使用情况与限额</p>\n        </div>\n        <div className=\"flex gap-3\">\n          <div className=\"relative\">\n            <input type=\"text\" placeholder=\"搜索用户名/邮箱...\" className=\"dream-input pl-10 pr-4 py-2 rounded-xl text-sm w-64\" value={searchTerm} onChange={(e) => setSearchTerm(e.target.value)} />\n            <Search size={16} className=\"absolute left-3 top-1/2 -translate-y-1/2 text-pink-300\" />\n          </div>\n          <button onClick={() => setView('create')} className=\"bg-pink-500 text-white px-5 py-2.5 rounded-xl font-bold shadow-lg shadow-pink-200 hover:bg-pink-600 transition-colors flex items-center gap-2 text-sm\"><Plus size={16} /> 添加用户</button>\n        </div>\n      </div>\n      <div className=\"glass-card rounded-3xl overflow-hidden\">\n        <table className=\"w-full text-left\">\n          <thead className=\"bg-pink-50/50 text-pink-900 font-cute text-sm\">\n            <tr>\n              <th className=\"p-5 pl-8\">头像</th>\n              <th className=\"p-5\">用户 ID</th>\n              <th className=\"p-5\">用户名 / 邮箱</th>\n              <th className=\"p-5\">昵称</th>\n              <th className=\"p-5\">已用次数</th>\n              <th className=\"p-5\">剩余额度</th>\n              <th className=\"p-5 text-right pr-8\">操作</th>\n            </tr>\n          </thead>\n          <tbody className=\"text-sm divide-y divide-pink-50\">\n            {filteredUsers.length > 0 ? filteredUsers.map((user) => (\n              <UserRow key={user.id} user={user} onSaveLimit={handleLimitSave} onDelete={() => setDeleteUser(user)} onChangePwd={() => setPwdUser(user)} />\n            )) : (\n              <tr>\n                <td colSpan=\"5\" className=\"p-10 text-center text-gray-400\">未找到匹配的用户。</td>\n              </tr>\n            )}\n          </tbody>\n        </table>\n      </div>\n    </div>\n  );\n};\n\nconst UsersView = () => (\n  <ToastProvider>\n    <UsersViewContent />\n  </ToastProvider>\n);\n\nexport default UsersView;\n","import React, { useState, useRef, useEffect } from 'react';\nimport { Save, HelpCircle } from 'lucide-react';\nimport { ToastProvider, useToast } from '../Toast.jsx';\nimport { modelsAPI, settingsAPI } from '../api.js';\n\nconst TemperatureInput = ({ value, onChange }) => (\n  <div className=\"flex items-center gap-2\">\n    <input type=\"number\" min=\"0\" max=\"2\" step=\"0.05\" value={value} onChange={(e) => onChange(e.target.value)} className=\"dream-input w-24 px-2 py-3 rounded-xl text-sm font-bold text-center\" />\n    <div className=\"relative group\">\n      <HelpCircle size={18} className=\"text-pink-400 cursor-help\" />\n      <div className=\"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 w-48 p-3 bg-white/90 backdrop-blur-sm border border-pink-100 text-pink-900 text-xs rounded-xl shadow-xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50 pointer-events-none text-center\">温度：高数值输出随机，低数值输出集中。</div>\n    </div>\n  </div>\n);\n\nconst Content = () => {\n  const [modelList, setModelList] = useState([]);\n  const [selectedModel, setSelectedModel] = useState('');\n  const [isDropdownOpen, setIsDropdownOpen] = useState(false);\n  const ddRef = useRef(null);\n  const [selectedChatModel, setSelectedChatModel] = useState('');\n  const [isChatOpen, setIsChatOpen] = useState(false);\n  const chatRef = useRef(null);\n  const [selectedStoryModel, setSelectedStoryModel] = useState('');\n  const [isStoryOpen, setIsStoryOpen] = useState(false);\n  const storyRef = useRef(null);\n  const [temperature, setTemperature] = useState(0.1);\n  const [chatTemperature, setChatTemperature] = useState(0.1);\n  const [storyTemperature, setStoryTemperature] = useState(0.1);\n  const [defaultTemplateId, setDefaultTemplateId] = useState(null);\n  const { showToast } = useToast();\n\n  const getModelLabel = (id) => {\n    const m = modelList.find((x) => x.model_id === id);\n    return m ? (m.model_name || m.model_id) : '-- 请选择 --';\n  };\n\n  const fetchModels = async () => {\n    try { const data = await modelsAPI.list(); setModelList(data.items || []); }\n    catch { showToast('模型列表加载失败', 'error'); }\n  };\n\n  useEffect(() => {\n    fetchModels();\n    (async () => {\n      try {\n        const s = await settingsAPI.get();\n        setSelectedModel(s.selected_model);\n        setSelectedChatModel(s.selected_chat_model);\n        setSelectedStoryModel(s.selected_story_model);\n        setTemperature(Number(s.model_temperature || 0.1));\n        setChatTemperature(Number(s.chat_temperature || 0.1));\n        setStoryTemperature(Number(s.story_temperature || 0.1));\n        setDefaultTemplateId(s.default_template_id || null);\n      } catch { showToast('加载设置失败', 'error'); }\n    })();\n  }, []);\n\n  useEffect(() => {\n    const onDoc = (e) => {\n      if (isDropdownOpen && ddRef.current && !ddRef.current.contains(e.target)) setIsDropdownOpen(false);\n      if (isChatOpen && chatRef.current && !chatRef.current.contains(e.target)) setIsChatOpen(false);\n      if (isStoryOpen && storyRef.current && !storyRef.current.contains(e.target)) setIsStoryOpen(false);\n    };\n    document.addEventListener('mousedown', onDoc);\n    return () => document.removeEventListener('mousedown', onDoc);\n  }, [isDropdownOpen, isChatOpen, isStoryOpen]);\n\n  const sortedByName = [...modelList].sort((a,b) => (a.model_name || a.model_id).localeCompare(b.model_name || b.model_id));\n  const labelText = getModelLabel(selectedModel);\n  const chatLabelText = getModelLabel(selectedChatModel);\n  const storyLabelText = getModelLabel(selectedStoryModel);\n\n  const saveAll = async () => {\n    try {\n      await settingsAPI.save({\n        selected_model: selectedModel,\n        selected_chat_model: selectedChatModel,\n        selected_story_model: selectedStoryModel,\n        model_temperature: Number(temperature),\n        chat_temperature: Number(chatTemperature),\n        story_temperature: Number(storyTemperature),\n        default_template_id: defaultTemplateId,\n      });\n      showToast('设置已保存');\n    } catch { showToast('保存失败', 'error'); }\n  };\n\n  return (\n    <div className=\"space-y-6 animate-fade-in\">\n      <div className=\"flex justify-between items-center\">\n        <div>\n          <h2 className=\"text-2xl font-cute text-pink-900 flex items-center gap-2\"><span className=\"w-1.5 h-6 bg-yellow-400 rounded-full inline-block\"></span>模型设置</h2>\n          <p className=\"text-gray-400 text-xs mt-1 ml-4\">配置全局模型与温度参数</p>\n        </div>\n      </div>\n\n      <div className=\"solid-card p-8 rounded-3xl\">\n        <h3 className=\"font-cute text-lg text-pink-900 flex items-center gap-2 mb-4\"><span className=\"w-1.5 h-4 bg-yellow-400 rounded-full\"></span>模型配置</h3>\n        <div className=\"space-y-5\">\n          <div>\n            <label className=\"block text-xs font-bold text-pink-800 mb-2\">角色提示词AI模型</label>\n            <div className=\"flex items-center gap-4\">\n              <div className=\"relative w-full max-w-md\" ref={ddRef}>\n                <button onClick={() => setIsDropdownOpen(!isDropdownOpen)} className={`dream-input w-full px-4 py-3 rounded-xl text-sm text-left font-bold transition-all bg-white flex justify-between items-center ${isDropdownOpen ? 'border-pink-500 ring-4 ring-pink-100/50' : ''}`}>\n                  <span className={`${selectedModel ? 'text-gray-700' : 'text-gray-400 font-normal'}`}>{labelText}</span>\n                  <div className={`text-pink-400 transition-transform ${isDropdownOpen ? 'rotate-180' : ''}`}>▼</div>\n                </button>\n                {isDropdownOpen && (\n                  <ul className=\"absolute top-full mt-1 w-full bg-white border border-pink-200 rounded-xl shadow-xl max-h-48 overflow-y-auto z-50\">\n                    {(sortedByName.length === 0) ? (\n                      <li className=\"px-4 py-3 text-sm text-gray-400\">暂无模型，请先添加</li>\n                    ) : (\n                      sortedByName.map(opt => (\n                        <li key={opt.id} onClick={() => { setSelectedModel(opt.model_id); setIsDropdownOpen(false); }} className={`px-4 py-3 text-sm text-gray-700 hover:bg-pink-50 cursor-pointer transition-colors ${selectedModel === opt.model_id ? 'bg-pink-100 font-bold text-pink-700' : ''}`}>{opt.model_name || opt.model_id}</li>\n                      ))\n                    )}\n                  </ul>\n                )}\n              </div>\n              <TemperatureInput value={temperature} onChange={setTemperature} />\n              <button onClick={saveAll} className=\"px-6 py-3 rounded-xl bg-gradient-to-r from-pink-500 to-pink-600 text-white font-bold text-sm shadow-lg shadow-pink-200 hover:bg-pink-700 transition-all flex items-center gap-2\"><Save size={16} /> 确认</button>\n            </div>\n          </div>\n\n          <div>\n            <label className=\"block text-xs font-bold text-pink-800 mb-2\">角色聊天AI模型</label>\n            <div className=\"flex items-center gap-4\">\n              <div className=\"relative w-full max-w-md\" ref={chatRef}>\n                <button onClick={() => setIsChatOpen(!isChatOpen)} className={`dream-input w-full px-4 py-3 rounded-xl text-sm text-left font-bold transition-all bg-white flex justify-between items-center ${isChatOpen ? 'border-pink-500 ring-4 ring-pink-100/50' : ''}`}>\n                  <span className={`${selectedChatModel ? 'text-gray-700' : 'text-gray-400 font-normal'}`}>{chatLabelText}</span>\n                  <div className={`text-pink-400 transition-transform ${isChatOpen ? 'rotate-180' : ''}`}>▼</div>\n                </button>\n                {isChatOpen && (\n                  <ul className=\"absolute top-full mt-1 w-full bg-white border border-pink-200 rounded-xl shadow-xl max-h-48 overflow-y-auto z-50\">\n                    {(sortedByName.length === 0) ? (\n                      <li className=\"px-4 py-3 text-sm text-gray-400\">暂无模型，请先添加</li>\n                    ) : (\n                      sortedByName.map(opt => (\n                        <li key={opt.id} onClick={() => { setSelectedChatModel(opt.model_id); setIsChatOpen(false); }} className={`px-4 py-3 text-sm text-gray-700 hover:bg-pink-50 cursor-pointer transition-colors ${selectedChatModel === opt.model_id ? 'bg-pink-100 font-bold text-pink-700' : ''}`}>{opt.model_name || opt.model_id}</li>\n                      ))\n                    )}\n                  </ul>\n                )}\n              </div>\n              <TemperatureInput value={chatTemperature} onChange={setChatTemperature} />\n              <button onClick={saveAll} className=\"px-6 py-3 rounded-xl bg-gradient-to-r from-pink-500 to-pink-600 text-white font-bold text-sm shadow-lg shadow-pink-200 hover:bg-pink-700 transition-all flex items-center gap-2\"><Save size={16} /> 确认</button>\n            </div>\n          </div>\n\n          <div>\n            <label className=\"block text-xs font-bold text-pink-800 mb-2\">故事生成AI模型</label>\n            <div className=\"flex items-center gap-4\">\n              <div className=\"relative w-full max-w-md\" ref={storyRef}>\n                <button onClick={() => setIsStoryOpen(!isStoryOpen)} className={`dream-input w-full px-4 py-3 rounded-xl text-sm text-left font-bold transition-all bg-white flex justify-between items-center ${isStoryOpen ? 'border-pink-500 ring-4 ring-pink-100/50' : ''}`}>\n                  <span className={`${selectedStoryModel ? 'text-gray-700' : 'text-gray-400 font-normal'}`}>{storyLabelText}</span>\n                  <div className={`text-pink-400 transition-transform ${isStoryOpen ? 'rotate-180' : ''}`}>▼</div>\n                </button>\n                {isStoryOpen && (\n                  <ul className=\"absolute top-full mt-1 w-full bg-white border border-pink-200 rounded-xl shadow-xl max-h-48 overflow-y-auto z-50\">\n                    {(sortedByName.length === 0) ? (\n                      <li className=\"px-4 py-3 text-sm text-gray-400\">暂无模型，请先添加</li>\n                    ) : (\n                      sortedByName.map(opt => (\n                        <li key={opt.id} onClick={() => { setSelectedStoryModel(opt.model_id); setIsStoryOpen(false); }} className={`px-4 py-3 text-sm text-gray-700 hover:bg-pink-50 cursor-pointer transition-colors ${selectedStoryModel === opt.model_id ? 'bg-pink-100 font-bold text-pink-700' : ''}`}>{opt.model_name || opt.model_id}</li>\n                      ))\n                    )}\n                  </ul>\n                )}\n              </div>\n              <TemperatureInput value={storyTemperature} onChange={setStoryTemperature} />\n              <button onClick={saveAll} className=\"px-6 py-3 rounded-xl bg-gradient-to-r from-pink-500 to-pink-600 text-white font-bold text-sm shadow-lg shadow-pink-200 hover:bg-pink-700 transition-all flex items-center gap-2\"><Save size={16} /> 确认</button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nconst ModelSettingsView = () => (\n  <ToastProvider>\n    <Content />\n  </ToastProvider>\n);\n\nexport default ModelSettingsView;\n","import React, { useState, useEffect } from 'react';\nimport { Plus, X, Trash2 } from 'lucide-react';\nimport { ToastProvider, useToast } from '../Toast.jsx';\nimport { modelsAPI } from '../api.js';\n\nconst Content = () => {\n  const { showToast } = useToast();\n  const [modelList, setModelList] = useState([]);\n  const [modelPage, setModelPage] = useState(1);\n  const MODEL_PAGE_SIZE = 6;\n  const [isModelModalOpen, setIsModelModalOpen] = useState(false);\n  const [newModel, setNewModel] = useState({ model_id: '', model_name: '', model_nickname: '' });\n  const [deleteTarget, setDeleteTarget] = useState(null);\n\n  const fetchModels = async () => {\n    try { const data = await modelsAPI.list(); setModelList(data.items || []); }\n    catch { showToast('模型列表加载失败', 'error'); }\n  };\n\n  useEffect(() => { fetchModels(); }, []);\n\n  const formatDate = (ts) => {\n    if (!ts) return '-';\n    const d = new Date(ts);\n    const y = d.getFullYear();\n    const m = String(d.getMonth() + 1).padStart(2, '0');\n    const day = String(d.getDate()).padStart(2, '0');\n    const hh = String(d.getHours()).padStart(2, '0');\n    const mm = String(d.getMinutes()).padStart(2, '0');\n    return `${y}/${m}/${day} ${hh}:${mm}`;\n  };\n\n  const totalModelPages = Math.max(1, Math.ceil(modelList.length / MODEL_PAGE_SIZE));\n  const modelStartIdx = (modelPage - 1) * MODEL_PAGE_SIZE;\n  const modelPageItems = modelList.slice(modelStartIdx, modelStartIdx + MODEL_PAGE_SIZE);\n  useEffect(() => { if (modelPage > totalModelPages) setModelPage(totalModelPages); }, [modelList]);\n\n  const handleSaveModel = async () => {\n    if (!newModel.model_id || !newModel.model_name) { showToast('请填写完整信息', 'error'); return; }\n    try {\n      await modelsAPI.create(newModel);\n      showToast('模型添加成功');\n      setIsModelModalOpen(false);\n      setNewModel({ model_id: '', model_name: '', model_nickname: '' });\n      fetchModels();\n    } catch { showToast('添加失败', 'error'); }\n  };\n\n  return (\n    <div className=\"space-y-6 animate-fade-in\">\n      <div className=\"flex justify-between items-center\">\n        <div>\n          <h2 className=\"text-2xl font-cute text-pink-900 flex items-center gap-2\"><span className=\"w-1.5 h-6 bg-yellow-400 rounded-full inline-block\"></span>模型管理</h2>\n          <p className=\"text-gray-400 text-xs mt-1 ml-4\">维护可用的模型列表</p>\n        </div>\n        <button onClick={() => setIsModelModalOpen(true)} className=\"bg-pink-500 text-white px-4 py-2 rounded-xl font-bold shadow-lg shadow-pink-200 hover:bg-pink-600 transition-colors flex items-center gap-2 text-xs\"><Plus size={14} /> 添加模型</button>\n      </div>\n\n      <div className=\"glass-card rounded-2xl overflow-hidden border border-pink-100\">\n        <table className=\"w-full text-left border-collapse\">\n          <thead className=\"bg-pink-100 text-pink-900 font-cute text-sm\">\n            <tr>\n              <th className=\"p-3 pl-6 w-16\">序号</th>\n              <th className=\"p-3\">模型名称</th>\n              <th className=\"p-3\">模型ID</th>\n              <th className=\"p-3\">盲测模型昵称</th>\n              <th className=\"p-3\">添加时间</th>\n              <th className=\"p-3 text-right pr-6\">操作</th>\n            </tr>\n          </thead>\n          <tbody className=\"text-sm divide-y divide-pink-100\">\n            {modelPageItems.map((model, index) => (\n              <tr key={model.id} className=\"hover:bg-pink-50/30 transition-colors\">\n                <td className=\"p-3 pl-6 text-gray-500 font-mono\">{modelStartIdx + index + 1}</td>\n                <td className=\"p-3 font-bold text-pink-700\">{model.model_name}</td>\n                <td className=\"p-3 font-mono text-gray-600\">{model.model_id}</td>\n                <td className=\"p-3 text-gray-600\">{model.model_nickname || '-'}</td>\n                <td className=\"p-3 text-gray-500\">{formatDate(model.created_at)}</td>\n                <td className=\"p-3 text-right pr-6\">\n                  <button onClick={() => setDeleteTarget(model)} className=\"text-red-400 hover:text-red-600 p-1\"><Trash2 size={16} /></button>\n                </td>\n              </tr>\n            ))}\n            {modelList.length === 0 && (\n              <tr>\n                <td colSpan=\"5\" className=\"p-8 text-center text-gray-400 text-sm\">暂无模型数据</td>\n              </tr>\n            )}\n          </tbody>\n        </table>\n        <div className=\"flex items-center justify-between p-3\">\n          <div className=\"text-xs text-gray-500\">第 {modelPage} / {totalModelPages} 页</div>\n          <div className=\"flex items-center gap-2\">\n            <button disabled={modelPage===1} onClick={() => setModelPage((p)=>Math.max(1,p-1))} className={`px-3 py-1 rounded-lg text-xs font-bold ${modelPage===1 ? 'bg-gray-100 text-gray-400' : 'bg-white border border-gray-200 text-gray-600 hover:border-pink-300 hover:text-pink-600 hover:bg-pink-50'}`}>上一页</button>\n            {Array.from({ length: totalModelPages }).map((_, i) => (\n              <button key={i} onClick={() => setModelPage(i+1)} className={`w-8 h-8 rounded-lg text-xs font-bold ${modelPage===i+1 ? 'bg-pink-500 text-white' : 'bg-white border border-gray-200 text-gray-600 hover:border-pink-300 hover:text-pink-600 hover:bg-pink-50'}`}>{i+1}</button>\n            ))}\n            <button disabled={modelPage===totalModelPages} onClick={() => setModelPage((p)=>Math.min(totalModelPages,p+1))} className={`px-3 py-1 rounded-lg text-xs font-bold ${modelPage===totalModelPages ? 'bg-gray-100 text-gray-400' : 'bg-white border border-gray-200 text-gray-600 hover:border-pink-300 hover:text-pink-600 hover:bg-pink-50'}`}>下一页</button>\n          </div>\n        </div>\n      </div>\n\n      {deleteTarget && (\n        <>\n          <div className=\"fixed inset-0 bg-black/30 z-50\" onClick={() => setDeleteTarget(null)}></div>\n          <div className=\"fixed top-0 right-0 bottom-0 left-0 z-50 flex items-center justify-center p-4\">\n            <div className=\"bg白 rounded-3xl border border-pink-100 p-6 w-full max-w-md shadow-2xl\">\n              <h3 className=\"font-cute text-lg text-pink-900 mb-2\">删除模型</h3>\n              <p className=\"text-sm text-gray-500 mb-4\">确定删除“{deleteTarget.model_name}”吗？此操作不可撤回。</p>\n              <div className=\"flex justify-end gap-3\">\n                <button onClick={() => setDeleteTarget(null)} className=\"px-5 py-2 rounded-xl bg-white border border-gray-200 text-gray-600 font-bold text-sm hover:bg-gray-50\">取消</button>\n                <button onClick={async () => { try { await modelsAPI.remove(deleteTarget.id); showToast('删除成功'); setDeleteTarget(null); fetchModels(); } catch { showToast('删除失败', 'error'); } }} className=\"px-5 py-2 rounded-xl bg-red-500 text-white font-bold text-sm shadow-sm hover:bg-red-600\">确认删除</button>\n              </div>\n            </div>\n          </div>\n        </>\n      )}\n\n      {isModelModalOpen && (\n        <>\n          <div className=\"fixed top-0 right-0 bottom-0 left-64 bg-black/30 z-50 backdrop-blur-sm\" onClick={() => setIsModelModalOpen(false)}></div>\n          <div className=\"fixed top-0 right-0 bottom-0 left-64 z-50 flex items-center justify-center p-4\">\n            <div className=\"bg白 rounded-3xl border border-pink-100 shadow-2xl p-6 animate-fade-in w-full max-w-md\">\n              <div className=\"flex justify-between items-center mb-6\">\n                <h3 className=\"font-cute text-xl text-pink-900\">添加新模型</h3>\n                <button onClick={() => setIsModelModalOpen(false)} className=\"text-gray-400 hover:text-gray-600 transition-colors\"><X size={20} /></button>\n              </div>\n              <div className=\"space-y-4\">\n                <div>\n                  <label className=\"block text-xs font-bold text-pink-800 mb-1.5\">模型ID <span className=\"text-red-400\">*</span></label>\n                  <input type=\"text\" value={newModel.model_id} onChange={(e) => setNewModel({ ...newModel, model_id: e.target.value })} placeholder=\"例如: gpt-4-turbo\" className=\"dream-input w-full px-4 py-2.5 rounded-xl text-sm\" />\n                </div>\n                <div>\n                  <label className=\"block text-xs font-bold text-pink-800 mb-1.5\">模型名称 <span className=\"text-red-400\">*</span></label>\n                  <input type=\"text\" value={newModel.model_name} onChange={(e) => setNewModel({ ...newModel, model_name: e.target.value })} placeholder=\"例如: GPT-4 Turbo\" className=\"dream-input w-full px-4 py-2.5 rounded-xl text-sm\" />\n                </div>\n                <div>\n                  <label className=\"block text-xs font-bold text-pink-800 mb-1.5\">盲测模型昵称</label>\n                  <input type=\"text\" value={newModel.model_nickname} onChange={(e) => setNewModel({ ...newModel, model_nickname: e.target.value })} placeholder=\"例如: 智慧之星\" className=\"dream-input w-full px-4 py-2.5 rounded-xl text-sm\" />\n                </div>\n              </div>\n              <div className=\"flex justify-end gap-3 mt-8\">\n                <button onClick={() => setIsModelModalOpen(false)} className=\"px-5 py-2.5 rounded-xl bg-gray-50 text-gray-600 font-bold text-sm hover:bg-gray-100 transition-colors\">取消</button>\n                <button onClick={handleSaveModel} className=\"px-6 py-2.5 rounded-xl bg-pink-500 text白 font-bold text-sm shadow-lg shadow-pink-200 hover:bg-pink-600 transition-all\">保存模型</button>\n              </div>\n            </div>\n          </div>\n        </>\n      )}\n    </div>\n  );\n};\n\nconst ModelManageView = () => (\n  <ToastProvider>\n    <Content />\n  </ToastProvider>\n);\n\nexport default ModelManageView;\n","import React, { useEffect, useState } from 'react';\nimport { ToastProvider, useToast } from '../Toast.jsx';\nimport { adminsAPI } from '../api.js';\nimport { Plus, X } from 'lucide-react';\n\nconst Content = () => {\n  const { showToast } = useToast();\n  const [admins, setAdmins] = useState([]);\n  const [view, setView] = useState('list');\n  const [newAdmin, setNewAdmin] = useState({ username: '', email: '', password: '' });\n  const [pwdTarget, setPwdTarget] = useState(null);\n  const [newPwd, setNewPwd] = useState('');\n\n  const reload = async () => {\n    try { const rows = await adminsAPI.list(); setAdmins(rows); }\n    catch { showToast('加载失败', 'error'); }\n  };\n  useEffect(() => { reload(); }, []);\n\n  const handleAdd = async () => {\n    if (!newAdmin.username || !newAdmin.password) { showToast('请填写必填项', 'error'); return; }\n    try {\n      const { id } = await adminsAPI.create(newAdmin);\n      setAdmins(prev => [...prev, { id, username: newAdmin.username, email: newAdmin.email || '', isActive: 1 }]);\n      setView('list');\n      setNewAdmin({ username: '', email: '', password: '' });\n      showToast('管理员添加成功');\n    } catch { showToast('添加失败', 'error'); }\n  };\n\n  const handleDisable = async (id, next) => {\n    try {\n      await adminsAPI.update(id, { isActive: next });\n      setAdmins(prev => prev.map(a => a.id === id ? { ...a, isActive: next } : a));\n      showToast(next ? '已启用' : '已禁用');\n    } catch { showToast('更新失败', 'error'); }\n  };\n\n  const handleDelete = async (id) => {\n    try { await adminsAPI.remove(id); setAdmins(prev => prev.filter(a => a.id !== id)); showToast('删除成功'); }\n    catch { showToast('删除失败', 'error'); }\n  };\n\n  const handleChangePwd = async () => {\n    if (!newPwd) { showToast('请输入新密码', 'error'); return; }\n    try { await adminsAPI.changePassword(pwdTarget.id, newPwd); setPwdTarget(null); setNewPwd(''); showToast('密码已更新'); }\n    catch { showToast('更新失败', 'error'); }\n  };\n\n  if (view === 'create') {\n    return (\n      <div className=\"animate-fade-in pb-10\">\n        <div className=\"flex items-center gap-4 mb-6\">\n          <button onClick={() => setView('list')} className=\"px-5 py-2.5 rounded-xl bg-white text-gray-600 font-bold text-sm shadow-sm hover:bg-gray-50\">返回</button>\n          <div>\n            <h2 className=\"text-2xl font-cute text-pink-900\">添加管理员</h2>\n            <p className=\"text-gray-400 text-xs\">创建新的后台管理员账号</p>\n          </div>\n          <div className=\"ml-auto flex gap-3\">\n            <button onClick={() => setView('list')} className=\"px-6 py-2.5 rounded-xl bg-white text-gray-500 font-bold text-sm shadow-sm hover:bg-gray-50\">取消</button>\n            <button onClick={handleAdd} className=\"px-6 py-2.5 rounded-xl bg-gradient-to-r from-pink-500 to-pink-600 text-white font-bold text-sm shadow-lg shadow-pink-200 flex items-center gap-2\"><Plus size={16} /> 创建管理员</button>\n          </div>\n        </div>\n        <div className=\"solid-card p-8 rounded-3xl space-y-6 max-w-2xl mx-auto\">\n          <h3 className=\"font-cute text-lg text-pink-900 flex items-center gap-2 mb-2\"><span className=\"w-1.5 h-4 bg-yellow-400 rounded-full\"></span> 管理员信息</h3>\n          <div>\n            <label className=\"block text-xs font-bold text-pink-800 mb-2\">用户名</label>\n            <input type=\"text\" value={newAdmin.username} onChange={e => setNewAdmin({ ...newAdmin, username: e.target.value })} className=\"dream-input w-full px-4 py-2.5 rounded-xl text-sm\" />\n          </div>\n          <div>\n            <label className=\"block text-xs font-bold text-pink-800 mb-2\">邮箱</label>\n            <input type=\"email\" value={newAdmin.email} onChange={e => setNewAdmin({ ...newAdmin, email: e.target.value })} className=\"dream-input w-full px-4 py-2.5 rounded-xl text-sm\" />\n          </div>\n          <div>\n            <label className=\"block text-xs font-bold text-pink-800 mb-2\">初始密码</label>\n            <input type=\"password\" value={newAdmin.password} onChange={e => setNewAdmin({ ...newAdmin, password: e.target.value })} className=\"dream-input w-full px-4 py-2.5 rounded-xl text-sm\" />\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6 animate-fade-in\">\n      <div className=\"flex justify-between items-center\">\n        <div>\n          <h2 className=\"text-2xl font-cute text-pink-900 flex items-center gap-2\"><span className=\"w-1.5 h-6 bg-yellow-400 rounded-full inline-block\"></span>管理员账号</h2>\n          <p className=\"text-gray-400 text-xs mt-1 ml-4\">管理后台管理员列表、禁用与密码修改</p>\n        </div>\n        <button onClick={() => setView('create')} className=\"bg-pink-500 text-white px-4 py-2 rounded-xl font-bold shadow-lg shadow-pink-200 hover:bg-pink-600 transition-colors flex items-center gap-2 text-xs\"><Plus size={14} /> 添加管理员</button>\n      </div>\n\n      <div className=\"glass-card rounded-2xl overflow-hidden border border-pink-100\">\n        <table className=\"w-full text-left border-collapse\">\n          <thead className=\"bg-pink-100 text-pink-900 font-cute text-sm\">\n            <tr>\n              <th className=\"p-3 pl-6 w-20\">头像</th>\n              <th className=\"p-3 w-20\">ID</th>\n              <th className=\"p-3\">用户名</th>\n              <th className=\"p-3\">昵称</th>\n              <th className=\"p-3\">邮箱</th>\n              <th className=\"p-3\">状态</th>\n              <th className=\"p-3 text-right pr-6\">操作</th>\n            </tr>\n          </thead>\n          <tbody className=\"text-sm divide-y divide-pink-100\">\n            {admins.map(a => (\n              <tr key={a.id} className=\"hover:bg-pink-50/30 transition-colors\">\n                <td className=\"p-3 pl-6\"><img src={a.avatar || '/uploads/avatars/default_admin.jpg'} alt={a.username} className=\"w-8 h-8 rounded-full object-cover shadow-sm\" /></td>\n                <td className=\"p-3 text-gray-500 font-mono\">{a.id.toString().padStart(4, '0')}</td>\n                <td className=\"p-3 font-bold text-pink-700\">{a.username}</td>\n                <td className=\"p-3 text-gray-700\">{a.nickname || '-'}</td>\n                <td className=\"p-3 text-gray-600\">{a.email || '-'}</td>\n                <td className=\"p-3\">{a.isActive === 1 ? '启用' : '禁用'}</td>\n                <td className=\"p-3 text-right pr-6\">\n                  <div className=\"flex items-center gap-2 justify-end\">\n                    <button onClick={() => setPwdTarget(a)} className=\"px-3 py-1 rounded bg-white border border-gray-200 text-gray-600 text-xs hover:bg-gray-50\">改密</button>\n                    <button onClick={() => handleDisable(a.id, a.isActive === 1 ? 0 : 1)} className={`px-3 py-1 rounded text-xs font-bold ${a.isActive === 1 ? 'bg-yellow-100 text-yellow-700' : 'bg-green-100 text-green-700'}`}>{a.isActive === 1 ? '禁用' : '启用'}</button>\n                    <button onClick={() => handleDelete(a.id)} className=\"px-3 py-1 rounded bg-red-500 text-white text-xs hover:bg-red-600\">删除</button>\n                  </div>\n                </td>\n              </tr>\n            ))}\n            {admins.length === 0 && (\n              <tr>\n                <td colSpan=\"5\" className=\"p-8 text-center text-gray-400 text-sm\">暂无管理员</td>\n              </tr>\n            )}\n          </tbody>\n        </table>\n      </div>\n\n      {pwdTarget && (\n        <>\n          <div className=\"fixed inset-0 bg-black/30 z-50\" onClick={() => setPwdTarget(null)}></div>\n          <div className=\"fixed top-0 right-0 bottom-0 left-0 z-50 flex items-center justify-center p-4\">\n            <div className=\"bg-white rounded-3xl border border-pink-100 p-6 w-full max-w-md shadow-2xl\">\n              <div className=\"flex justify-between items-center mb-6\">\n                <h3 className=\"font-cute text-lg text-pink-900\">修改密码</h3>\n                <button onClick={() => setPwdTarget(null)} className=\"text-gray-400 hover:text-gray-600 transition-colors\"><X size={20} /></button>\n              </div>\n              <div className=\"space-y-4\">\n                <div>\n                  <label className=\"block text-xs font-bold text-pink-800 mb-1.5\">新密码</label>\n                  <input type=\"password\" value={newPwd} onChange={e => setNewPwd(e.target.value)} className=\"dream-input w-full px-4 py-2.5 rounded-xl text-sm\" />\n                </div>\n              </div>\n              <div className=\"flex justify-end gap-3 mt-8\">\n                <button onClick={() => setPwdTarget(null)} className=\"px-5 py-2.5 rounded-xl bg-gray-50 text-gray-600 font-bold text-sm hover:bg-gray-100 transition-colors\">取消</button>\n                <button onClick={handleChangePwd} className=\"px-6 py-2.5 rounded-xl bg-pink-500 text-white font-bold text-sm shadow-lg shadow-pink-200 hover:bg-pink-600 transition-all\">确认修改</button>\n              </div>\n            </div>\n          </div>\n        </>\n      )}\n    </div>\n  );\n};\n\nconst AdminAccountsView = () => (\n  <ToastProvider>\n    <Content />\n  </ToastProvider>\n);\n\nexport default AdminAccountsView;\n","import React, { useState, useRef, useEffect, useCallback } from 'react';\nimport { uploadAPI } from '../api.js';\nimport { ChevronLeft, X, RotateCw, ZoomIn, ZoomOut, UploadCloud } from 'lucide-react';\n\nconst readFile = (file) => new Promise((resolve) => {\n  const reader = new FileReader();\n  reader.addEventListener('load', () => resolve(reader.result), false);\n  reader.readAsDataURL(file);\n});\n\nconst createImage = (url) => new Promise((resolve, reject) => {\n  const image = new Image();\n  image.addEventListener('load', () => resolve(image));\n  image.addEventListener('error', (error) => reject(error));\n  image.setAttribute('crossOrigin', 'anonymous');\n  image.src = url;\n});\n\nexport default function CoverEditor({ initialImage, onSave, onCancel }) {\n  const [step, setStep] = useState(initialImage ? 'edit' : 'upload');\n  const [tempImage, setTempImage] = useState(initialImage || null);\n\n  const handleFileChange = async (e) => {\n    if (e.target.files && e.target.files.length > 0) {\n      const file = e.target.files[0];\n      const dataUrl = await readFile(file);\n      setTempImage(dataUrl);\n      setStep('edit');\n    }\n  };\n\n  return (\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4 animate-in fade-in duration-200\">\n      <div className=\"relative w-full max-w-2xl bg-white rounded-3xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh] animate-in zoom-in-95 duration-200\">\n        <Header step={step} onBack={() => setStep('upload')} onClose={onCancel} />\n        <div className=\"flex-1 overflow-y-auto\">\n          {step === 'upload' && (\n            <UploadView onFileChange={handleFileChange} />\n          )}\n          {step === 'edit' && tempImage && (\n            <EditView imageSrc={tempImage} onSave={onSave} onCancel={() => setStep('upload')} />\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction Header({ step, onBack, onClose }) {\n  const title = step === 'upload' ? '上传封面' : '裁剪封面';\n  return (\n    <div className=\"flex items-center justify-between px-6 py-4 border-b border-gray-100 bg-white\">\n      <div className=\"flex items-center gap-2\">\n        {step === 'edit' && (\n          <button onClick={onBack} className=\"p-2 -ml-2 rounded-full hover:bg-gray-100 text-gray-400 hover:text-pink-600 transition-colors\">\n            <ChevronLeft size={20} />\n          </button>\n        )}\n        <h2 className=\"text-lg font-cute text-pink-900\">{title}</h2>\n      </div>\n      <button onClick={onClose} className=\"p-2 -mr-2 rounded-full hover:bg-gray-100 text-gray-400 hover:text-red-500 transition-colors\">\n        <X size={20} />\n      </button>\n    </div>\n  );\n}\n\nfunction UploadView({ onFileChange }) {\n  const [isDragging, setIsDragging] = useState(false);\n  const fileInputRef = useRef(null);\n  return (\n    <div className=\"flex flex-col h-full bg-white\">\n      <div className=\"flex-1 p-8 flex flex-col items-center justify-center\">\n        <div\n          onDragOver={(e) => { e.preventDefault(); setIsDragging(true); }}\n          onDragLeave={(e) => { e.preventDefault(); setIsDragging(false); }}\n          onDrop={(e) => { e.preventDefault(); setIsDragging(false); if (e.dataTransfer.files && e.dataTransfer.files.length > 0) onFileChange({ target: { files: e.dataTransfer.files } }); }}\n          onClick={() => fileInputRef.current.click()}\n          className={`w-full max-w-xl aspect-[2/1] rounded-3xl flex flex-col items-center justify-center transition-all duration-300 cursor-pointer border-2 border-dashed ${isDragging ? 'bg-pink-50 border-pink-400 scale-105' : 'bg-gray-50 border-gray-200 hover:border-pink-300 hover:bg-pink-50/30'}`}\n        >\n          <div className=\"w-20 h-20 rounded-full bg-white shadow-sm flex items-center justify-center mb-4 text-pink-500\">\n            <UploadCloud size={32} />\n          </div>\n          <p className=\"text-gray-600 font-bold mb-1\">点击或拖拽上传封面</p>\n          <p className=\"text-gray-400 text-xs\">输出尺寸 800×400，比例 2:1</p>\n        </div>\n      </div>\n      <input type=\"file\" ref={fileInputRef} onChange={onFileChange} className=\"hidden\" accept=\"image/*\" />\n    </div>\n  );\n}\n\nfunction EditView({ imageSrc, onSave, onCancel }) {\n  const canvasRef = useRef(null);\n  const [imageObj, setImageObj] = useState(null);\n  const [saving, setSaving] = useState(false);\n  const [rotation, setRotation] = useState(0);\n  const [offset, setOffset] = useState({ x: 0, y: 0 });\n  const [isDragging, setIsDragging] = useState(false);\n  const [dragStart, setDragStart] = useState({ x: 0, y: 0 });\n  const [baseScale, setBaseScale] = useState(1);\n  const [zoom, setZoom] = useState(1);\n\n  const CANVAS_SIZE = 800; // square working area\n  const VIEWPORT_W = 800;\n  const VIEWPORT_H = 400; // 2:1\n\n  useEffect(() => {\n    const init = async () => {\n      try {\n        const img = await createImage(imageSrc);\n        setImageObj(img);\n        const scaleX = CANVAS_SIZE / img.width;\n        const scaleY = CANVAS_SIZE / img.height;\n        const initScale = Math.max(scaleX, scaleY);\n        setBaseScale(initScale);\n        setZoom(1);\n      } catch {}\n    };\n    init();\n  }, [imageSrc]);\n\n  const handleWheel = (e) => { e.preventDefault(); const delta = e.deltaY * -0.001; setZoom(prev => Math.max(0.5, Math.min(prev + delta, 3))); };\n\n  const draw = useCallback(() => {\n    if (!imageObj || !canvasRef.current) return;\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext('2d');\n\n    ctx.clearRect(0, 0, CANVAS_SIZE, CANVAS_SIZE);\n    ctx.fillStyle = '#18181b';\n    ctx.fillRect(0, 0, CANVAS_SIZE, CANVAS_SIZE);\n\n    ctx.save();\n    ctx.translate(CANVAS_SIZE / 2, CANVAS_SIZE / 2);\n    ctx.rotate((rotation * Math.PI) / 180);\n    ctx.translate(-CANVAS_SIZE / 2, -CANVAS_SIZE / 2);\n\n    const rad = (rotation * Math.PI) / 180;\n    const localX = offset.x * Math.cos(-rad) - offset.y * Math.sin(-rad);\n    const localY = offset.x * Math.sin(-rad) + offset.y * Math.cos(-rad);\n\n    const currentScale = baseScale * zoom;\n    const imgWidth = imageObj.width * currentScale;\n    const imgHeight = imageObj.height * currentScale;\n\n    const centerX = CANVAS_SIZE / 2;\n    const centerY = CANVAS_SIZE / 2;\n\n    ctx.drawImage(imageObj, centerX - imgWidth / 2 + localX, centerY - imgHeight / 2 + localY, imgWidth, imgHeight);\n    ctx.restore();\n\n    // Overlay with 2:1 hole (full width)\n    const topOffset = (CANVAS_SIZE - VIEWPORT_H) / 2;\n    ctx.fillStyle = 'rgba(0, 0, 0, 0.6)';\n    ctx.beginPath();\n    ctx.rect(0, 0, CANVAS_SIZE, CANVAS_SIZE);\n    ctx.rect(0, topOffset, VIEWPORT_W, VIEWPORT_H);\n    ctx.fill('evenodd');\n  }, [imageObj, rotation, offset, baseScale, zoom]);\n\n  useEffect(() => { draw(); }, [draw]);\n\n  const handleMouseDown = (e) => {\n    setIsDragging(true);\n    const rect = canvasRef.current.getBoundingClientRect();\n    const x = e.clientX || e.touches?.[0]?.clientX;\n    const y = e.clientY || e.touches?.[0]?.clientY;\n    setDragStart({ x: x - rect.left, y: y - rect.top });\n  };\n  const handleMouseMove = (e) => {\n    if (!isDragging) return;\n    const rect = canvasRef.current.getBoundingClientRect();\n    const clientX = e.clientX || (e.touches ? e.touches[0].clientX : 0);\n    const clientY = e.clientY || (e.touches ? e.touches[0].clientY : 0);\n    const x = clientX - rect.left;\n    const y = clientY - rect.top;\n    const dx = x - dragStart.x;\n    const dy = y - dragStart.y;\n    setOffset(prev => ({ x: prev.x + dx, y: prev.y + dy }));\n    setDragStart({ x, y });\n  };\n  const handleMouseUp = () => setIsDragging(false);\n  const handleRotate = () => setRotation(prev => (prev + 90) % 360);\n\n  const handleFinalSave = async () => {\n    if (!canvasRef.current || saving) return;\n    setSaving(true);\n    try {\n      const tempCanvas = document.createElement('canvas');\n      tempCanvas.width = VIEWPORT_W;\n      tempCanvas.height = VIEWPORT_H;\n      const tCtx = tempCanvas.getContext('2d');\n      const topOffset = (CANVAS_SIZE - VIEWPORT_H) / 2;\n      tCtx.drawImage(canvasRef.current, 0, topOffset, VIEWPORT_W, VIEWPORT_H, 0, 0, VIEWPORT_W, VIEWPORT_H);\n      const blob = await new Promise((resolve, reject) => {\n        tempCanvas.toBlob((b) => b ? resolve(b) : reject(new Error('blob_failed')), 'image/jpeg', 0.92);\n      });\n      const file = new File([blob], `cover_${Date.now()}.jpg`, { type: 'image/jpeg' });\n      const result = await uploadAPI.cover(file);\n      onSave(result.url);\n    } catch (e) {\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  return (\n    <div className=\"flex flex-col h-full bg-white\">\n      <div className=\"flex-1 relative flex items-center justify-center bg-gray-900 overflow-hidden\">\n        <canvas\n          ref={canvasRef}\n          width={CANVAS_SIZE}\n          height={CANVAS_SIZE}\n          onMouseDown={handleMouseDown}\n          onMouseMove={handleMouseMove}\n          onMouseUp={handleMouseUp}\n          onMouseLeave={handleMouseUp}\n          onTouchStart={handleMouseDown}\n          onTouchMove={handleMouseMove}\n          onTouchEnd={handleMouseUp}\n          onWheel={handleWheel}\n          className=\"cursor-move max-w-full max-h-full\"\n          style={{ width: '100%', height: 'auto', maxHeight: '520px' }}\n        />\n      </div>\n      <div className=\"p-4 bg-white flex items-center justify-between border-t border-gray-100 gap-4\">\n        <button onClick={handleRotate} className=\"px-2 py-2 rounded-xl text-pink-600 hover:text-pink-700 text-xs font-bold hover:bg-pink-50\">\n          <RotateCw size={20} />\n        </button>\n        <div className=\"flex items-center gap-2 flex-1 max-w-[240px]\">\n          <ZoomOut size={16} className=\"text-gray-400\" />\n          <input type=\"range\" min=\"0.5\" max=\"3\" step=\"0.1\" value={zoom} onChange={(e) => setZoom(parseFloat(e.target.value))} className=\"w-full h-1.5 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-pink-500\" />\n          <ZoomIn size={16} className=\"text-gray-400\" />\n        </div>\n        <div className=\"flex gap-2\">\n          <button onClick={onCancel} className=\"px-4 py-2 rounded-xl text-gray-500 font-bold text-sm hover:bg-gray-100\">取消</button>\n          <button onClick={handleFinalSave} disabled={saving} className={`px-5 py-2 rounded-xl bg-gradient-to-r from-pink-500 to-pink-600 text-white font-bold text-sm shadow-lg shadow-pink-200 ${saving ? 'opacity-60 cursor-not-allowed' : 'hover:opacity-90'}`}>{saving ? '上传中...' : '完成'}</button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n","import React, { useEffect, useState } from 'react'\nimport { ChevronLeft, Save } from 'lucide-react'\nimport { storiesAPI, charactersAPI } from '../api.js'\nimport CoverEditor from '../components/CoverEditor.jsx'\n\nconst StoryCreateView = ({ initialData, onCancel, notify }) => {\n  const [form, setForm] = useState({\n    title: '', description: '', image: '', tags: [], author: '', likes: '', content: '', publishDate: ''\n  })\n  const [selectedChars, setSelectedChars] = useState([])\n  const [charOptions, setCharOptions] = useState([])\n  const [isDropdownOpen, setIsDropdownOpen] = useState(false)\n  const ddRef = React.useRef(null)\n  useEffect(() => {\n    if (initialData) {\n      setForm({\n        title: initialData.title || '',\n        description: initialData.description || '',\n        image: initialData.image || '',\n        tags: Array.isArray(initialData.tags) ? initialData.tags : [],\n        author: initialData.author || '',\n        likes: initialData.likes || '',\n        content: initialData.content || '',\n        publishDate: initialData.publish_date || ''\n      })\n      if (Array.isArray(initialData.character_ids)) setSelectedChars(initialData.character_ids.map(id => Number(id)))\n    }\n  }, [initialData])\n  useEffect(() => {\n    (async () => {\n      try {\n        const res = await charactersAPI.list({ creator_role: 'admin_role' })\n        const items = Array.isArray(res?.items) ? res.items : []\n        const published = items.filter(it => it.status === 'published')\n        setCharOptions(published.map(it => ({ id: Number(it.id), name: it.name })))\n      } catch {}\n    })()\n  }, [])\n  useEffect(() => {\n    const onDoc = (e) => { if (isDropdownOpen && ddRef.current && !ddRef.current.contains(e.target)) setIsDropdownOpen(false) }\n    document.addEventListener('mousedown', onDoc)\n    return () => document.removeEventListener('mousedown', onDoc)\n  }, [isDropdownOpen])\n  const [tagInput, setTagInput] = useState('')\n  const [showCoverEditor, setShowCoverEditor] = useState(false)\n  const addTag = () => { const v = tagInput.trim(); if (!v) return; setForm(p => ({ ...p, tags: p.tags.includes(v) ? p.tags : [...p.tags, v] })); setTagInput('') }\n  const removeTag = (t) => setForm(p => ({ ...p, tags: p.tags.filter(x => x !== t) }))\n  const save = async () => {\n    if (!form.title.trim() || !form.content.trim()) { notify && notify('请输入标题与内容', 'error'); return }\n    const payload = {\n      title: form.title.trim(), description: form.description || null, image: form.image || null,\n      author: form.author || null, likes: form.likes || null, content: form.content,\n      tags: form.tags, character_ids: selectedChars\n    }\n    try {\n      if (initialData?.id) { await storiesAPI.update(initialData.id, payload); notify && notify('保存成功：故事已更新') }\n      else { await storiesAPI.create(payload); notify && notify('保存成功：故事已创建') }\n      onCancel && onCancel()\n    } catch { notify && notify('保存失败', 'error') }\n  }\n  return (\n    <div className=\"animate-fade-in pb-20\">\n      <div className=\"flex items-center gap-4 mb-6\">\n        <button onClick={onCancel} className=\"w-10 h-10 flex items-center justify-center bg-white rounded-full shadow-sm text-gray-500 hover:text-pink-600 transition-colors\"><ChevronLeft size={20} /></button>\n        <div>\n          <h2 className=\"text-2xl font-cute text-pink-900\">{initialData ? '编辑故事' : '创建故事'}</h2>\n          <p className=\"text-gray-400 text-xs\">填写并保存故事内容</p>\n        </div>\n      <div className=\"ml-auto\">\n        <button onClick={save} className=\"px-6 py-2.5 rounded-xl bg-gradient-to-r from-pink-500 to-pink-600 text-white font-bold text-sm shadow-lg shadow-pink-200 flex items-center gap-2\"><Save size={16} /> 保存</button>\n      </div>\n      </div>\n      <div className=\"grid grid-cols-12 gap-6\">\n        <div className=\"col-span-12 lg:col-span-8 space-y-6\">\n          <div className=\"solid-card p-8 rounded-3xl space-y-6\">\n            \n            <div>\n              <label className=\"block text-xs font-bold text-pink-800 mb-2\">标题</label>\n              <input value={form.title} onChange={e=>setForm({...form, title:e.target.value})} className=\"dream-input w-full px-4 py-3 rounded-xl text-sm\"/>\n            </div>\n            <div>\n              <label className=\"block text-xs font-bold text-pink-800 mb-2\">描述</label>\n              <textarea value={form.description} onChange={e=>setForm({...form, description:e.target.value})} rows=\"3\" className=\"dream-input w-full px-4 py-3 rounded-xl text-sm resize-none\"/>\n            </div>\n            <div>\n              <label className=\"block text-xs font-bold text-pink-800 mb-2\">封面图片</label>\n              <div className=\"space-y-3\">\n                <div onClick={() => setShowCoverEditor(true)} className=\"w-full aspect-[2/1] bg-gray-100 rounded-2xl overflow-hidden border-4 border-white shadow-xl cursor-pointer\">\n                  {form.image ? (\n                    <img src={form.image} alt=\"cover\" className=\"w-full h-full object-cover\" />\n                  ) : (\n                    <div className=\"w-full h-full flex items-center justify-center text-gray-300 font-bold\">点击上传并裁剪 (800×400)</div>\n                  )}\n                </div>\n                <input value={form.image} onChange={e=>setForm({...form, image:e.target.value})} className=\"dream-input w-full px-4 py-3 rounded-xl text-sm\" placeholder=\"或直接粘贴图片 URL\"/>\n              </div>\n            </div>\n            <div className=\"grid grid-cols-2 gap-6\">\n              <div>\n                <label className=\"block text-xs font-bold text-pink-800 mb-2\">作者</label>\n                <input value={form.author} onChange={e=>setForm({...form, author:e.target.value})} className=\"dream-input w-full px-4 py-3 rounded-xl text-sm\"/>\n              </div>\n              <div>\n                <label className=\"block text-xs font-bold text-pink-800 mb-2\">点赞数（文本）</label>\n                <input value={form.likes} onChange={e=>setForm({...form, likes:e.target.value})} className=\"dream-input w-full px-4 py-3 rounded-xl text-sm\"/>\n              </div>\n            </div>\n            <div>\n              <label className=\"block text-xs font-bold text-pink-800 mb-2\">标签</label>\n              <div className=\"flex gap-2\">\n                <input value={tagInput} onChange={e=>setTagInput(e.target.value)} onKeyDown={e=>{if(e.key==='Enter'){e.preventDefault();addTag();}}} className=\"dream-input flex-1 px-4 py-3 rounded-xl text-sm\" placeholder=\"输入标签并回车\"/>\n                <button onClick={addTag} className=\"px-4 rounded-xl bg-pink-500 text-white text-sm font-bold\">添加</button>\n              </div>\n              <div className=\"flex flex-wrap gap-2 mt-2\">\n                {form.tags.map(t=> (\n                  <button key={t} onClick={()=>removeTag(t)} className=\"bg-pink-50 text-pink-600 px-3 py-1.5 rounded-xl text-xs font-bold border border-pink-100\">#{t} ×</button>\n                ))}\n              </div>\n            </div>\n            <div>\n              <label className=\"block text-xs font-bold text-pink-800 mb-2\">正文</label>\n              <textarea value={form.content} onChange={e=>setForm({...form, content:e.target.value})} rows=\"14\" className=\"dream-input w-full px-5 py-4 rounded-xl text-sm leading-relaxed font-mono text-gray-700 bg-white focus:bg-white resize-y shadow-inner\"/>\n            </div>\n            \n          </div>\n        </div>\n        <div className=\"col-span-12 lg:col-span-4 space-y-6\">\n          <div className=\"glass-card p-6 rounded-3xl text-sm text-gray-500\">在右侧填写故事信息并点击保存。</div>\n          <div className=\"solid-card p-6 rounded-3xl space-y-4\">\n            <div className=\"text-xs font-bold text-pink-800\">登场角色（管理员且已发布）</div>\n            <div className=\"flex items-center gap-2\">\n              <div className=\"relative w-full max-w-md\" ref={ddRef}>\n                <button onClick={() => setIsDropdownOpen(!isDropdownOpen)} className={`dream-input w-full px-4 py-3 rounded-xl text-sm text-left font-bold transition-all bg-white flex justify-between items-center ${isDropdownOpen ? 'border-pink-500 ring-4 ring-pink-100/50' : ''}`}>\n                  <span className={`text-gray-700`}>选择角色</span>\n                  <div className={`text-pink-400 transition-transform ${isDropdownOpen ? 'rotate-180' : ''}`}>▼</div>\n                </button>\n                {isDropdownOpen && (\n                  <ul className=\"absolute top-full mt-1 w-full bg-white border border-pink-200 rounded-xl shadow-xl max-h-48 overflow-y-auto z-50\">\n                    {charOptions.filter(opt => !selectedChars.includes(opt.id)).length === 0 ? (\n                      <li className=\"px-4 py-3 text-sm text-gray-400\">暂无可选角色</li>\n                    ) : (\n                      charOptions.filter(opt => !selectedChars.includes(opt.id)).map(opt => (\n                        <li key={opt.id} onClick={() => { setSelectedChars(prev => prev.includes(opt.id) ? prev : [...prev, opt.id]); setIsDropdownOpen(false); }} className={`px-4 py-3 text-sm text-gray-700 hover:bg-pink-50 cursor-pointer transition-colors`}>{opt.name}</li>\n                      ))\n                    )}\n                  </ul>\n                )}\n              </div>\n              <button className=\"px-3 py-2 bg-pink-500 text-white rounded-xl text-xs font-bold\" onClick={() => setIsDropdownOpen(true)}>添加</button>\n            </div>\n            <div className=\"flex flex-wrap gap-2\">\n              {selectedChars.map(cid => {\n                const nm = charOptions.find(o => o.id === cid)?.name || cid\n                return (\n                  <span key={cid} className=\"bg-pink-50 text-pink-600 px-3 py-1.5 rounded-xl text-xs font-bold border border-pink-100\">\n                    {nm}\n                    <button className=\"ml-2 text-pink-500\" onClick={() => setSelectedChars(prev => prev.filter(x => x !== cid))}>×</button>\n                  </span>\n                )\n              })}\n            </div>\n          </div>\n        </div>\n      </div>\n      {showCoverEditor && (\n        <CoverEditor\n          initialImage={form.image || null}\n          onSave={async (url) => { setForm(p => ({ ...p, image: url })); setShowCoverEditor(false); }}\n          onCancel={() => setShowCoverEditor(false)}\n        />\n      )}\n    </div>\n  )\n}\n\nexport default StoryCreateView\n","import React, { useEffect, useState } from 'react'\nimport { Plus, Edit3, X, Archive, Send } from 'lucide-react'\nimport { ToastProvider, useToast } from '../Toast.jsx'\nimport { storiesAPI } from '../api.js'\nimport StoryCreateView from './StoryCreateView.jsx'\n\nconst StoryManagementInner = () => {\n  const [view, setView] = useState('list')\n  const [editing, setEditing] = useState(null)\n  const { showToast } = useToast()\n  const [list, setList] = useState([])\n  const [deleteTarget, setDeleteTarget] = useState(null)\n  const reload = async () => { try { const d = await storiesAPI.list(); setList(d.items || []) } catch { showToast('加载失败', 'error') } }\n  useEffect(() => { reload() }, [])\n  const onCreate = () => { setEditing(null); setView('create') }\n  const onEdit = (item) => { setEditing(item); setView('create') }\n  const onDelete = async (id) => { try { await storiesAPI.remove(id); showToast('删除成功'); reload() } catch { showToast('删除失败', 'error') } }\n  const handleToggleStatus = async (id, current) => {\n    try {\n      await storiesAPI.setStatus(id, current === 'published' ? 'draft' : 'published')\n      showToast(current === 'published' ? '已回收为草稿' : '已发布')\n      reload()\n    } catch { showToast('操作失败', 'error') }\n  }\n  if (view === 'create') return <StoryCreateView initialData={editing} onCancel={() => { setView('list'); reload() }} notify={showToast} />\n  return (\n    <div className=\"space-y-6 animate-fade-in\">\n      <div className=\"flex justify-between items-center\">\n        <div>\n          <h2 className=\"text-2xl font-cute text-pink-900 flex items-center gap-2\"><span className=\"w-1.5 h-6 bg-yellow-400 rounded-full inline-block\"></span> 故事管理</h2>\n          <p className=\"text-gray-400 text-xs mt-1 ml-4\">查看与编辑故事内容</p>\n        </div>\n        <button onClick={onCreate} className=\"bg-gradient-to-r from-pink-500 to-pink-600 text-white px-5 py-2.5 rounded-xl font-bold shadow-lg shadow-pink-200 hover:opacity-90 transition-all flex items-center gap-2 text-sm\"><Plus size={16}/> 创建故事</button>\n      </div>\n      <div className=\"grid gap-6\" style={{ gridTemplateColumns: 'repeat(auto-fit, minmax(320px, 360px))' }}>\n        {list.map(st => (\n          <div key={st.id} className=\"relative w-full\">\n            <div className=\"glass-card p-4 rounded-3xl hover:shadow-xl transition-all group relative overflow-hidden h-[220px] flex flex-col\">\n              <div className={`absolute top-4 right-4 text-xs px-2 py-0.5 rounded-md font-bold ${st.status === 'published' ? 'bg-green-100 text-green-600' : 'bg-gray-100 text-gray-500'}`}>{st.status === 'published' ? '已发布' : '草稿'}</div>\n              <div className=\"flex items-start gap-4\">\n                <div className=\"w-20 h-20 rounded-2xl bg-gradient-to-br from-pink-200 to-pink-300 flex items-center justify-center text-white text-xl font-bold shadow-inner border-2 border-white overflow-hidden flex-shrink-0\">\n                  {st.image ? (<img src={st.image} alt=\"cover\" className=\"w-full h-full object-cover\" />) : (<span>{st.title ? st.title[0] : '?'}</span>)}\n                </div>\n                <div className=\"flex-1 min-w-0\">\n                  <div className=\"flex items-baseline gap-2\">\n                    <h3 className=\"font-bold text-lg text-gray-800 truncate\">{st.title}</h3>\n                    <div className=\"text-xs text-gray-400 truncate\">{st.author || ''}</div>\n                  </div>\n                  <div className=\"flex gap-1 mt-2 flex-nowrap whitespace-nowrap overflow-hidden\" style={{ maxWidth: 300 }}>\n                    {(st.tags || []).map(t => (<span key={t} className=\"text-[10px] bg-pink-50 text-pink-600 px-1.5 py-0.5 rounded border border-pink-100\">#{t}</span>))}\n                  </div>\n                </div>\n              </div>\n              <div className=\"mt-3\"><p className=\"text-gray-600 text-sm leading-relaxed break-words\">{st.description || '暂无描述'}</p></div>\n              <div className=\"mt-auto flex gap-2 pt-3 border-t border-white/50\">\n                <button onClick={() => onEdit(st)} className=\"flex-1 py-2 text-xs font-bold text-pink-600 bg-pink-50 hover:bg-pink-100 rounded-lg transition-colors flex items-center justify-center gap-1 mx-1\"><Edit3 size={12}/> 编辑</button>\n                {st.status === 'published' ? (\n                  <button onClick={() => handleToggleStatus(st.id, st.status)} className=\"flex-1 py-2 text-xs font-bold text-red-600 bg-red-50 hover:bg-red-100 rounded-lg transition-colors flex items-center justify-center gap-1 mx-1\"><Archive size={12}/> 回收</button>\n                ) : (\n                  <button onClick={() => handleToggleStatus(st.id, st.status)} className=\"flex-1 py-2 text-xs font-bold text-green-600 bg-green-50 hover:bg-green-100 rounded-lg transition-colors flex items-center justify-center gap-1 mx-1\"><Send size={12}/> 发布</button>\n                )}\n              </div>\n            </div>\n            <button onClick={() => setDeleteTarget(st)} className=\"absolute -top-2 -right-2 z-10 w-8 h-8 rounded-full bg-white/60 backdrop-blur-md shadow-lg border border-pink-100 flex items-center justify-center text-gray-400 hover:text-red-500 transition\"><X size={12}/></button>\n          </div>\n        ))}\n      </div>\n      {deleteTarget && (\n        <>\n          <div className=\"fixed top-0 right-0 bottom-0 left-64 bg-black/30 z-50\" onClick={() => setDeleteTarget(null)}></div>\n          <div className=\"fixed top-0 right-0 bottom-0 left-64 z-50 flex items-center justify-center p-4\">\n            <div className=\"bg-white rounded-3xl border border-pink-50 p-6 w-full max-w-md shadow-2xl\">\n              <h3 className=\"font-cute text-lg text-pink-900 mb-2\">删除故事</h3>\n              <p className=\"text-sm text-gray-500 mb-4\">确定删除“{deleteTarget.title}”吗？此操作不可撤回。</p>\n              <div className=\"flex justify-end gap-3\">\n                <button onClick={() => setDeleteTarget(null)} className=\"px-5 py-2 rounded-xl bg-white border border-gray-200 text-gray-600 font-bold text-sm hover:bg-gray-50\">取消</button>\n                <button onClick={() => { onDelete(deleteTarget.id); setDeleteTarget(null) }} className=\"px-5 py-2 rounded-xl bg-red-500 text-white font-bold text-sm shadow-sm hover:bg-red-600\">确认删除</button>\n              </div>\n            </div>\n          </div>\n        </>\n      )}\n    </div>\n  )\n}\n\nconst StoryManagement = () => (\n  <ToastProvider>\n    <StoryManagementInner />\n  </ToastProvider>\n)\n\nexport default StoryManagement\n","import React, { useState, useEffect } from 'react';\nimport { Sparkles } from 'lucide-react';\nimport { adminsAPI } from './api.js';\nimport StyleInjector from './components/StyleInjector.jsx';\nimport LoginPage from './components/LoginPage.jsx';\nimport { ToastProvider } from './Toast.jsx';\nimport Sidebar from './components/Sidebar.jsx';\nimport TemplatesView from './templates/TemplatesView.jsx';\nimport CharacterManagement from './characters/CharacterManagement.jsx';\nimport UsersView from './users/UsersView.jsx';\nimport ModelSettingsView from './settings/ModelSettingsView.jsx';\nimport ModelManageView from './settings/ModelManageView.jsx';\nimport AdminAccountsView from './settings/AdminAccountsView.jsx';\nimport StoryManagement from './story/StoryManagement.jsx';\n\nconst AdminDashboard = () => {\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n  const [activeTab, setActiveTab] = useState('templates');\n  const [username, setUsername] = useState('');\n  const [showEdit, setShowEdit] = useState(false);\n  const [newNickname, setNewNickname] = useState('');\n  const [pwd1, setPwd1] = useState('');\n  const [pwd2, setPwd2] = useState('');\n  const submitEdit = async () => {\n    const payload = {};\n    if (newNickname && newNickname.trim()) payload.nickname = newNickname.trim();\n    if (pwd1) {\n      if (pwd1 !== pwd2) return;\n      payload.password = pwd1;\n    }\n    try { await adminsAPI.updateMe(payload); setShowEdit(false); setNewNickname(''); setPwd1(''); setPwd2(''); } catch {}\n  };\n\n  const navigate = (path) => {\n    if (window.history && window.history.replaceState) {\n      window.history.replaceState(null, '', path);\n    }\n  };\n\n  useEffect(() => {\n    const token = localStorage.getItem('admin_access_token');\n    const user = localStorage.getItem('admin_username');\n    const path = window.location.pathname;\n    if (token) {\n      setIsLoggedIn(true);\n      if (user) setUsername(user);\n      setActiveTab('templates');\n      if (path !== '/super-admin/sysprompt') navigate('/super-admin/sysprompt');\n    } else {\n      setIsLoggedIn(false);\n      if (path !== '/super-admin/login') navigate('/super-admin/login');\n    }\n  }, []);\n\n  if (!isLoggedIn) {\n    return (\n      <>\n        <StyleInjector />\n        <ToastProvider>\n          <LoginPage onLogin={() => {\n            setIsLoggedIn(true);\n            const user = localStorage.getItem('admin_username');\n            if (user) setUsername(user);\n            setActiveTab('templates');\n            navigate('/super-admin/sysprompt');\n          }} />\n        </ToastProvider>\n      </>\n    );\n  }\n  return (\n    <div className=\"flex min-h-screen bg-white\">\n      <StyleInjector />\n      <Sidebar\n        activeTab={activeTab}\n        setActiveTab={(tab) => {\n          setActiveTab(tab);\n          if (tab === 'templates') navigate('/super-admin/sysprompt');\n        }}\n        onLogout={() => {\n          setIsLoggedIn(false);\n          localStorage.removeItem('admin_access_token');\n          localStorage.removeItem('admin_refresh_token');\n          localStorage.removeItem('admin_username');\n          navigate('/super-admin/login');\n        }}\n        username={username}\n        onEditProfile={() => setShowEdit(true)}\n      />\n      <main className=\"flex-1 ml-16 xl:ml-56 p-8 relative z-10 transition-all duration-300 h-screen overflow-y-auto\">\n        <div className=\"absolute top-0 right-0 p-4 pointer-events-none opacity-20\">\n          <Sparkles size={120} className=\"text-pink-300\" />\n        </div>\n        {activeTab === 'templates' && <TemplatesView />}\n        {activeTab === 'stories' && <StoryManagement />}\n        {(activeTab === 'characters' || activeTab === 'official_characters') && <CharacterManagement creatorRole=\"admin_role\" />}\n        {activeTab === 'user_characters' && <CharacterManagement creatorRole=\"user_role\" />}\n        {activeTab === 'users' && <UsersView />}\n        {activeTab === 'model_settings' && <ModelSettingsView />}\n        {activeTab === 'model_manage' && username === 'admin' && <ModelManageView />}\n        {activeTab === 'admin_accounts' && username === 'admin' && <AdminAccountsView />}\n      </main>\n      <div className=\"ambient-bg\"></div>\n      {showEdit && (\n        <div className=\"fixed inset-0 z-[200] flex items-center justify-center bg-black/40\">\n          <div className=\"bg-white rounded-2xl p-6 w-96 shadow-2xl\">\n            <div className=\"font-bold mb-4 text-pink-900\">修改资料</div>\n            <div className=\"space-y-3\">\n              <div>\n                <input type=\"text\" placeholder={`昵称（当前：${username}）`} value={newNickname} onChange={e => setNewNickname(e.target.value)} className=\"dream-input w-full px-4 py-3 rounded-2xl text-sm font-bold text-gray-700\" />\n              </div>\n              <div>\n                <input type=\"password\" placeholder=\"新密码\" value={pwd1} onChange={e => setPwd1(e.target.value)} className=\"dream-input w-full px-4 py-3 rounded-2xl text-sm font-bold text-gray-700\" />\n              </div>\n              <div>\n                <input type=\"password\" placeholder=\"再次输入新密码\" value={pwd2} onChange={e => setPwd2(e.target.value)} className=\"dream-input w-full px-4 py-3 rounded-2xl text-sm font-bold text-gray-700\" />\n              </div>\n            </div>\n            <div className=\"flex gap-2 justify-end mt-5\">\n              <button className=\"px-4 py-2 rounded-xl bg-gray-100 text-gray-600\" onClick={() => { setShowEdit(false); setNewNickname(''); setPwd1(''); setPwd2(''); }}>取消</button>\n              <button className=\"px-4 py-2 rounded-xl bg-pink-500 text-white\" onClick={submitEdit} disabled={!newNickname.trim() && !pwd1}>保存</button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default AdminDashboard;\n"],"names":["__iconNode","Archive","createLucideIcon","Bot","CircleQuestionMark","CloudUpload","Copy","Database","FileText","PenLine","RefreshCw","RotateCw","Save","Search","Settings","Shield","Sparkles","Star","UserCog","Users","WandSparkles","ZoomIn","ZoomOut","BASE_URL","getToken","getRefresh","saveTokens","access","refresh","logout","url","authHeaders","refreshingPromise","refreshOnce","rt","r","data","request","path","options","opts","isFormData","baseHeaders","jsonHeader","res","baseHeaders2","jsonHeader2","body","templatesAPI","payload","id","charactersAPI","params","qs","status","modelsAPI","settingsAPI","storiesAPI","syspromptAPI","uploadAPI","file","fd","usersAPI","q","username","nickname","email","password","chatLimit","adminsAPI","StyleInjector","jsx","ToastContext","createContext","useToast","useContext","ToastProvider","children","toasts","setToasts","useState","showToast","useCallback","message","type","prev","t","LoginPage","onLogin","setUsername","setPassword","handleLogin","b64","bin","c","key","enc","encB64","e","jsxs","LogOut","Sidebar","activeTab","setActiveTab","onLogout","onEditProfile","expandedMenus","setExpandedMenus","menuItems","User","Cpu","useEffect","activeParent","_a","item","sub","toggleMenu","x","handleMouseEnter","handleMouseLeave","i","handleItemClick","showEdit","setShowEdit","newNickname","setNewNickname","pwd1","setPwd1","pwd2","setPwd2","submitEdit","ChevronDown","ChevronRight","SidebarAvatar","avatar","setAvatar","mounted","TemplateCreateView","onCancel","initialData","onSave","notify","formData","setFormData","tagInput","setTagInput","isCustomType","setIsCustomType","PRESET_TYPES","handleAddTag","handleRemoveTag","index","newTags","handleTypeSelect","handleSave","ChevronLeft","tag","X","TemplatesViewContent","view","setView","templates","setTemplates","page","setPage","PAGE_SIZE","editingTpl","setEditingTpl","deleteTarget","setDeleteTarget","reload","sortedTemplates","a","b","at","bt","totalPages","startIdx","pageItems","formatDate","ts","d","y","m","day","hh","mm","handleSetDefault","handleEdit","tpl","handleCopy","draft","handleDelete","openDelete","closeDelete","confirmDelete","Plus","Info","CheckCircle","Edit3","Trash2","p","_","Fragment","TemplatesView","readFile","resolve","reader","createImage","reject","image","error","AvatarEditor","initialImage","currentStep","setCurrentStep","avatarUrl","setAvatarUrl","tempImage","setTempImage","handleFileChange","imageDataUrl","handleSaveCrop","croppedImageUrl","Header","MainView","UploadView","EditView","step","onBack","onClose","title","onChangeClick","onRemoveClick","Pencil","onFileChange","isDragging","setIsDragging","fileInputRef","useRef","handleDragOver","handleDragLeave","handleDrop","UploadCloud","imageSrc","canvasRef","imageObj","setImageObj","saving","setSaving","rotation","setRotation","offset","setOffset","dragStart","setDragStart","baseScale","setBaseScale","zoom","setZoom","CANVAS_SIZE","VIEWPORT_SIZE","img","scaleX","scaleY","initScale","handleWheel","delta","draw","ctx","rad","localX","localY","currentScale","imgWidth","imgHeight","centerX","centerY","viewportOffset","handleMouseDown","rect","handleMouseMove","clientX","clientY","dx","dy","handleMouseUp","handleRotate","handleFinalSave","tempCanvas","size","tCtx","blob","result","CharacterCreateView","mode","RELATIONSHIP_PRESETS","isCustomRel","setIsCustomRel","showAdvanced","setShowAdvanced","isPresetRel","setSelectedPromptModel","setPromptTemperature","setSelectedSceneModel","setSceneTemperature","isGeneratingMain","setIsGeneratingMain","isGeneratingScene","setIsGeneratingScene","showAvatarEditor","setShowAvatarEditor","isDropdownOpenScene","setIsDropdownOpenScene","dropdownRefScene","isModelOpenMain","setIsModelOpenMain","isModelOpenScene","setIsModelOpenScene","modelRefMain","modelRefScene","selectedPromptModel","selectedSceneModel","promptTemperature","sceneTemperature","modelList","setModelList","showTagModal","setShowTagModal","customTagInput","setCustomTagInput","tplList","setTplList","tplLoading","setTplLoading","availableTags","onDocClick","onKey","sortKey","mt","getModelDisplay","selectedTemplateNameScene","openTplDropdownScene","handleGeneratePrompt","resp","handleTemplateSelectScene","handleRelSelect","rel","handleCustomRelSelect","handleStyleExampleChange","value","newExamples","g","idx","HelpCircle","selectedTemplate","Wand2","val","dataUrl","newAvatar","CharacterManagementInner","creatorRole","editingChar","setEditingChar","characterList","setCharacterList","setMode","TAG_MAX_W","char","handleCreateNew","copiedChar","handleToggleStatus","current","Send","CharacterManagement","UserRow","user","onSaveLimit","onDelete","onChangePwd","currentLimit","setCurrentLimit","isDirty","UserCreateView","handleChange","name","newUser","UsersViewContent","users","setUsers","searchTerm","setSearchTerm","pwdUser","setPwdUser","deleteUser","setDeleteUser","handleAddUser","handleLimitSave","newLimit","u","confirmDeleteModal","changePwdModal","filteredUsers","_b","UsersView","TemperatureInput","onChange","Content","selectedModel","setSelectedModel","isDropdownOpen","setIsDropdownOpen","ddRef","selectedChatModel","setSelectedChatModel","isChatOpen","setIsChatOpen","chatRef","selectedStoryModel","setSelectedStoryModel","isStoryOpen","setIsStoryOpen","storyRef","temperature","setTemperature","chatTemperature","setChatTemperature","storyTemperature","setStoryTemperature","defaultTemplateId","setDefaultTemplateId","getModelLabel","fetchModels","s","onDoc","sortedByName","labelText","chatLabelText","storyLabelText","saveAll","opt","ModelSettingsView","modelPage","setModelPage","MODEL_PAGE_SIZE","isModelModalOpen","setIsModelModalOpen","newModel","setNewModel","totalModelPages","modelStartIdx","modelPageItems","handleSaveModel","model","ModelManageView","admins","setAdmins","newAdmin","setNewAdmin","pwdTarget","setPwdTarget","newPwd","setNewPwd","rows","handleAdd","handleDisable","next","handleChangePwd","AdminAccountsView","CoverEditor","setStep","VIEWPORT_W","VIEWPORT_H","topOffset","_d","_c","StoryCreateView","form","setForm","selectedChars","setSelectedChars","charOptions","setCharOptions","React","published","it","showCoverEditor","setShowCoverEditor","addTag","v","removeTag","save","cid","nm","o","StoryManagementInner","editing","setEditing","list","setList","onCreate","onEdit","st","StoryManagement","AdminDashboard","isLoggedIn","setIsLoggedIn","navigate","token","tab"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20]}