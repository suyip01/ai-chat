import{r as a,j as e}from"./index-DiMvcmcb.js";import{f as X,a as me,b as $e,U as ze}from"./UserCharacterSettings-BltZ7qea.js";import{A as W,m as I,f as Me,l as Fe,g as Re,c as J,a as oe,M as ce}from"./App-Bl6Z-21V.js";import{C as xe}from"./chevron-left-B3HkbiML.js";import{P as Ae}from"./plus-Bz3dnY0B.js";import{C as ue}from"./circle-check-big-IblmQXOf.js";import{A as Ve}from"./arrow-left-D36-7upH.js";import{c as fe}from"./createLucideIcon-CiU7U1is.js";import{S as Oe}from"./send-BX7jbBow.js";import{X as Le}from"./x-CKT7hpuC.js";import{U as Ue}from"./user-DjmimaIa.js";import{C as de}from"./chevron-right-jr0esStd.js";import{C as De}from"./cpu-DXFdudmA.js";import"./ImageCropper-u3NJns5t.js";import"./check-CIfsadPx.js";import"./pencil-DPfzMC3o.js";/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],Ke=fe("ellipsis-vertical",qe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],He=fe("message-square",Be),Je=l=>l==="男"?"male":l==="女"?"female":"secret",Xe=({isOpen:l,currentPersona:v,onClose:p,onAdd:_,onSelect:h})=>{const[w,N]=a.useState([]),[C,g]=a.useState(null);a.useEffect(()=>{l&&(async()=>{try{const f=await Me();N(f)}catch{}})()},[l]),a.useEffect(()=>{if(v){const i=w.find(f=>f.name===v.name);i&&g(i.id)}},[w,v]);const j=i=>{g(i.id);const f={name:i.name||"",gender:Je(i.gender),age:i.age?String(i.age):"",profession:i.profession||"",basicInfo:i.basic_info||"",personality:i.personality||"",avatar:i.avatar||void 0};try{localStorage.setItem("user_chat_role_id",String(i.id))}catch{}h(f,i.id),p()};return e.jsx("div",{className:`fixed inset-0 z-[90] ${l?"":"pointer-events-none"}`,children:e.jsx(W,{children:l&&e.jsxs(e.Fragment,{children:[e.jsx(I.div,{className:"absolute inset-0 bg-black/30 will-change-opacity",onClick:p,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:X},"backdrop"),e.jsx(I.div,{className:"absolute bottom-0 left-0 right-0 bg-transparent will-change-transform transform-gpu",initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:me,children:e.jsxs("div",{className:"mx-auto w-full max-w-md bg-white rounded-t-2xl shadow-[0_-10px_30px_rgba(0,0,0,0.08)]",children:[e.jsxs("div",{className:"sticky top-0 bg-white/95 backdrop-blur-md p-3 border-b border-slate-100 flex justify-between items-center z-10",children:[e.jsxs("button",{onClick:p,className:"flex items-center gap-2",children:[e.jsx(xe,{className:"w-6 h-6"}),e.jsx("span",{className:"font-bold text-lg",children:"我的多重个人资料"})]}),e.jsx("button",{onClick:_,className:"w-9 h-9 rounded-full bg-purple-50 text-[#A855F7] flex items-center justify-center active:scale-90 transition-transform",children:e.jsx(Ae,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"p-4 flex flex-col gap-3 max-h-[70vh] overflow-y-auto",children:[w.map(i=>e.jsxs("div",{onClick:()=>j(i),className:`p-4 bg白 rounded-xl shadow-sm border border-slate-100 flex items-center gap-3 active:scale-[0.98] transition-transform ${C===i.id?"border-[#A855F7] bg-[#FBF5FF]":""}`,children:[e.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden bg-slate-200 flex items-center justify-center text-slate-600 font-bold",children:i.avatar?e.jsx("img",{src:i.avatar,alt:i.name,className:"w-full h-full object-cover"}):(i.name||"我")[0]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-bold text-slate-800 truncate",children:i.name}),e.jsxs("div",{className:"text-xs text-slate-500 truncate",children:[i.profession||"",i.age?` · ${i.age}`:""]})]}),C===i.id&&e.jsx(ue,{className:"w-5 h-5 text-[#A855F7]"})]},i.id)),!w.length&&e.jsxs("div",{className:"p-6 text-center text-slate-500",children:[e.jsx("div",{className:"text-sm",children:"暂无角色"}),e.jsx("div",{className:"mt-3",children:e.jsx("button",{onClick:_,className:"px-3 py-1.5 bg-[#A855F7] text-white rounded-lg text-sm font-bold",children:"添加角色"})})]})]})]})},"sheet")]})})})},We=({isOpen:l,currentModelId:v,onClose:p,onSelect:_,temperature:h,onTempChange:w})=>{const[N,C]=a.useState([]),[g,j]=a.useState(v),[i,f]=a.useState(typeof h=="number"?h:.1);return a.useEffect(()=>{j(v)},[v]),a.useEffect(()=>{typeof h=="number"&&f(h)},[h]),a.useEffect(()=>{if(!l)return;(async()=>{try{const T=[...await Fe()].sort((S,$)=>(S.nickname||S.id).localeCompare($.nickname||$.id,"zh-CN",{sensitivity:"base"}));C(T)}catch{}})()},[l]),e.jsx("div",{className:`fixed inset-0 z-[90] ${l?"":"pointer-events-none"}`,children:e.jsx(W,{children:l&&e.jsxs(e.Fragment,{children:[e.jsx(I.div,{className:"absolute inset-0 bg-black/30 will-change-opacity",onClick:p,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:X},"backdrop"),e.jsxs(I.div,{className:"absolute bottom-0 left-0 right-0 bg-white rounded-t-2xl shadow-[0_-10px_30px_rgba(0,0,0,0.08)] will-change-transform transform-gpu",initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:me,children:[e.jsxs("div",{className:"sticky top-0 bg-white/95 backdrop-blur-md p-3 border-b border-slate-100 flex justify-between items-center z-10",children:[e.jsxs("button",{onClick:p,className:"flex items-center gap-2",children:[e.jsx(xe,{className:"w-6 h-6"}),e.jsx("span",{className:"font-bold text-lg",children:"我的模型"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-bold text-slate-700",children:"温度"}),e.jsx("input",{value:i,onChange:n=>{const x=parseFloat(n.target.value||"0");f(isNaN(x)?0:x),w==null||w(isNaN(x)?0:x)},type:"number",step:"0.1",min:"0",max:"2",className:"w-16 px-2 py-1 border border-slate-200 rounded-lg text-sm"})]})]}),e.jsxs("div",{className:"p-4 flex flex-col gap-3 max-h-[70vh] overflow-y-auto",children:[N.map(n=>e.jsxs("div",{onClick:()=>{j(n.id),_(n.id,n.nickname),p()},className:`relative p-4 rounded-xl shadow-sm border active:scale-[0.98] transition-transform flex items-center justify-center ${g===n.id?"bg-[#F3E8FF] border-[#A855F7]":"bg-white border-slate-100"}`,children:[e.jsx("div",{className:"w-full text-center font-bold text-slate-800 truncate",children:n.nickname||n.id}),g===n.id&&e.jsx(ue,{className:"w-5 h-5 text-[#A855F7] absolute right-4 top-1/2 -translate-y-1/2"})]},n.id)),!N.length&&e.jsx("div",{className:"p-6 text-center text-slate-500",children:e.jsx("div",{className:"text-sm",children:"暂无模型"})})]})]},"sheet")]})})})},mt=({character:l,initialMessages:v,userPersona:p,onBack:_,onUpdateLastMessage:h,onOpenUserSettings:w,onShowProfile:N,onUpdateUserPersona:C})=>{const[g,j]=a.useState(v),[i,f]=a.useState("scene"),[n,x]=a.useState("（）"),[T,S]=a.useState(!1),[$,E]=a.useState(!1),[pe,A]=a.useState(!1),[he,z]=a.useState(!1),[ge,G]=a.useState(!1),[P,V]=a.useState(void 0),[Q,M]=a.useState(.1),[be,Y]=a.useState(void 0),[ve,Z]=a.useState(!1),[we,ee]=a.useState(!1),[O,te]=a.useState(void 0),[ye,je]=a.useState(!1),[Ne,Se]=a.useState(!1),se=a.useRef(null),b=a.useRef(null),ke=a.useRef(null),[Ie,L]=a.useState(null),y=a.useRef(null),F=(()=>{try{return localStorage.getItem("user_id")||"0"}catch{return"0"}})(),ae=`chat_history_${F}_${l.id}`,U=`chat_config_${l.id}`,D=`chat_model_${l.id}`,R=`chat_temp_${l.id}`,ie=`chat_model_name_${l.id}`,u=a.useMemo(()=>{if(O)return O;try{const t=localStorage.getItem("user_nickname")||"",s=localStorage.getItem("user_avatar")||"";if(t||s)return{name:t||"我",gender:"secret",age:"",profession:"",basicInfo:"",personality:"",avatar:s||void 0}}catch{}},[O]),q=(t,s,r)=>{j(d=>{const c=[...d];for(let m=c.length-1;m>=0;m--)if(c[m].senderId==="user"&&!c[m].read){c[m]={...c[m],read:!0};break}const o={id:(Date.now()+1).toString(),senderId:l.id,text:t,quote:s,timestamp:new Date,type:ce.TEXT};c.push(o);try{setTimeout(()=>h(o),0)}catch{}return c}),r&&typeof r.chunkIndex=="number"&&typeof r.chunkTotal=="number"?S(r.chunkIndex<r.chunkTotal):S(!1)},le=()=>{var t;b.current?b.current.scrollTop=b.current.scrollHeight:(t=se.current)==null||t.scrollIntoView({behavior:"smooth"})};a.useEffect(()=>{le()},[g,T]);const[_e,Ce]=a.useState({height:"100%",top:0});a.useEffect(()=>{const t=()=>{window.visualViewport&&(Ce({height:`${window.visualViewport.height}px`,top:`${window.visualViewport.offsetTop}px`}),b.current&&(b.current.scrollTop=b.current.scrollHeight))};window.visualViewport&&(window.visualViewport.addEventListener("resize",t),window.visualViewport.addEventListener("scroll",t),t());const s=()=>{window.visualViewport||(b.current?b.current.scrollTop=b.current.scrollHeight:le())};return window.addEventListener("resize",s),()=>{window.visualViewport&&(window.visualViewport.removeEventListener("resize",t),window.visualViewport.removeEventListener("scroll",t)),window.removeEventListener("resize",s)}},[]),a.useEffect(()=>{try{const t=`chat_history_${l.id}`,s=localStorage.getItem(ae)||(F==="0"?localStorage.getItem(t):null);if(s){const d=JSON.parse(s).map(c=>({id:c.id,senderId:c.senderId,text:c.text,timestamp:new Date(c.ts),type:c.type,quote:c.quote,read:c.read}));d.length&&j(d)}}catch{}},[l.id]),a.useEffect(()=>{try{const t=g.map(s=>{var r,d;return{id:s.id,senderId:s.senderId,text:s.text,ts:(d=(r=s.timestamp)==null?void 0:r.getTime)!=null&&d.call(r)?s.timestamp.getTime():Date.now(),type:s.type,quote:s.quote,read:s.read}});localStorage.setItem(ae,JSON.stringify(t))}catch{}},[g]),a.useEffect(()=>{try{const t=localStorage.getItem(U);if(t){const o=JSON.parse(t);((o==null?void 0:o.chatMode)==="daily"||(o==null?void 0:o.chatMode)==="scene")&&(f(o.chatMode),x(o.chatMode==="scene"?"（）":"")),o!=null&&o.persona&&te(o.persona)}const s=localStorage.getItem(D)||void 0,r=localStorage.getItem(R),d=r?parseFloat(r):void 0;s&&(V(s),Z(!0)),typeof d=="number"&&!isNaN(d)&&(M(d),ee(!0));const c=localStorage.getItem(ie)||void 0;c&&Y(c)}catch{}},[l.id]),a.useEffect(()=>{const t=`chat_session_${F}_${l.id}`,s=localStorage.getItem(t)||localStorage.getItem(`chat_session_${l.id}`);return(async()=>{var d;if(s){if(L(s),!localStorage.getItem(t))try{localStorage.setItem(t,s)}catch{}try{const o=await Re(s);if((o==null?void 0:o.temperature)!==void 0){M(o.temperature);try{localStorage.setItem(R,String(o.temperature))}catch{}}}catch{}const c=J(s,(o,m,k)=>{q(o,m,k)});y.current=c;return}try{const c=localStorage.getItem("user_chat_role_id"),o=c?parseInt(c):void 0,m=await oe(l.id,typeof o=="number"?o:void 0),k=m.sessionId;if(localStorage.setItem(t,k),L(k),(d=m.model)!=null&&d.id){V(m.model.id);try{localStorage.setItem(D,m.model.id)}catch{}}if(typeof m.temperature=="number"){M(m.temperature);try{localStorage.setItem(R,String(m.temperature))}catch{}}const K=J(k,(B,H,Te)=>{q(B,H,Te)});y.current=K}catch{}})(),()=>{var d;(d=y.current)==null||d.close(),y.current=null}},[l.id]);const ne=t=>{f(t),t==="scene"?!n.includes("（")&&!n.includes("(")?x(s=>`（）${s}`):n===""&&x("（）"):(n==="（）"||n==="()")&&x("");try{localStorage.setItem(U,JSON.stringify({chatMode:t,persona:p||void 0}))}catch{}},re=async()=>{var s,r;if(!n.trim()||n.trim()==="（）"||n.trim()==="()")return;const t={id:Date.now().toString(),senderId:"user",text:n,timestamp:new Date,type:ce.TEXT,read:!1};j(d=>[...d,t]);try{setTimeout(()=>h(t),0)}catch{}x(i==="scene"?"（）":""),S(!0);try{if(!Ie){const d=localStorage.getItem("user_chat_role_id"),c=d?parseInt(d):void 0,m=(await oe(l.id,typeof c=="number"?c:void 0)).sessionId;localStorage.setItem(`chat_session_${F}_${l.id}`,m),L(m);const k=J(m,(K,B,H)=>{q(K,B,H)});y.current=k}(s=y.current)==null||s.sendText(t.text,i,u,ve?P:void 0,we?Q:void 0),(r=y.current)==null||r.sendTyping(!1)}catch(d){console.error(d),S(!1)}},Ee=t=>t.toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit",hour12:!1});return e.jsx(I.div,{className:"fixed inset-0 bg-primary-50 z-50",style:{..._e,overscrollBehavior:"none",position:"fixed"},initial:{x:(navigator==null?void 0:navigator.maxTouchPoints)>0?"100%":0},animate:{x:0},exit:{x:(navigator==null?void 0:navigator.maxTouchPoints)>0?"100%":0},transition:{duration:(navigator==null?void 0:navigator.maxTouchPoints)>0?.3:0,ease:"linear"},children:e.jsxs("div",{className:"mx-auto w-full max-w-md h-full flex flex-col relative bg-white shadow-2xl rounded-none md:rounded-3xl md:overflow-hidden",children:[e.jsx("div",{className:"bg-primary-50/95 backdrop-blur-md pt-[env(safe-area-inset-top)] shadow-none z-10 border-b border-white/50 flex-shrink-0",children:e.jsxs("div",{className:"px-4 h-12 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:_,className:"p-2 -ml-2 text-slate-800 hover:bg-black/5 rounded-full transition-colors",children:e.jsx(Ve,{size:24})}),e.jsx("div",{className:"flex items-center cursor-pointer active:opacity-70 transition-opacity",onClick:N,children:e.jsx("h2",{className:"font-bold text-slate-800 text-lg",children:T?"对方正在输入中...":l.name})})]}),e.jsx("button",{onClick:()=>E(!0),className:"p-2 text-slate-800 hover:text-primary-600 rounded-full hover:bg-black/5 transition-all",children:e.jsx(Ke,{size:24})})]})}),e.jsxs("div",{ref:b,className:"flex-1 overflow-y-auto p-4 space-y-4 no-scrollbar bg-primary-50",style:{overflowAnchor:"none"},children:[e.jsx("div",{className:"flex justify-center my-4",children:e.jsx("span",{className:"bg-black/10 text-white text-[10px] px-3 py-1 rounded-full font-medium",children:"今天"})}),g.map((t,s)=>{const r=t.senderId==="user";return e.jsxs("div",{className:`flex w-full ${r?"justify-end":"justify-start"} mb-4 group`,children:[!r&&e.jsx("div",{className:"flex-shrink-0 mr-3 flex flex-col items-center gap-1",children:e.jsx("div",{onClick:N,className:"w-10 h-10 rounded-full overflow-hidden bg-blue-100 flex items-center justify-center text-blue-500 font-bold border border-white cursor-pointer active:scale-95 transition-transform",children:!ye&&l.avatar?e.jsx("img",{src:l.avatar,alt:l.name,className:"w-full h-full object-cover",onError:()=>je(!0)}):l.name[0]})}),e.jsxs("div",{className:`flex flex-col ${r?"items-end":"items-start"} max-w-[75%]`,children:[e.jsx("div",{className:`
                      px-4 py-3 text-[15px] shadow-sm leading-relaxed relative
                      ${r?"bg-[#A855F7] text-white rounded-[20px] rounded-tr-sm":"bg-white text-slate-800 rounded-[20px] rounded-tl-sm border border-slate-100"}
                    `,children:t.text}),!r&&t.quote&&e.jsx("div",{className:"mt-1 max-w-full",children:e.jsx("div",{className:"inline-block bg-slate-100 text-slate-500 text-xs leading-tight rounded-[12px] px-2 py-1 border border-slate-200",children:t.quote})}),e.jsxs("div",{className:`flex items-center gap-2 mt-1 ${r?"mr-1":"ml-1"}`,children:[r&&t.read&&e.jsx("span",{className:"text-[10px] text-slate-400",children:"已读"}),e.jsx("span",{className:"text-[10px] text-slate-400",children:Ee(t.timestamp)})]})]}),r&&e.jsx("div",{className:"flex-shrink-0 ml-3",children:e.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden bg-pink-200 flex items-center justify-center text-pink-600 font-bold border border-white shadow-sm",children:!Ne&&(u!=null&&u.avatar)?e.jsx("img",{src:u.avatar,alt:(u==null?void 0:u.name)||"我",className:"w-full h-full object-cover",onError:()=>Se(!0)}):u!=null&&u.name?u.name[0]:"我"})})]},t.id)}),e.jsx("div",{ref:se})]}),e.jsx("div",{className:"bg-white p-3 pb-3 border-t border-slate-100 shadow-[0_-4px_20px_rgba(0,0,0,0.02)] pb-[env(safe-area-inset-bottom)] mb-3 flex-shrink-0",children:e.jsxs("div",{className:"flex items-center gap-2 bg-white rounded-[24px] px-3 py-2 border border-slate-100 shadow-[0_12px_28px_rgba(0,0,0,0.12)] transition-shadow focus-within:shadow-[0_16px_40px_rgba(0,0,0,0.16)]",children:[e.jsx("div",{className:"flex-1 flex items-center pl-2",children:e.jsx("textarea",{ref:ke,value:n,onChange:t=>{var s;x(t.target.value),(s=y.current)==null||s.sendTyping(!0)},onKeyDown:t=>{t.key==="Enter"&&!t.shiftKey&&(t.preventDefault(),re())},onBlur:()=>{var t;return(t=y.current)==null?void 0:t.sendTyping(!1)},placeholder:"",className:"w-full bg-transparent border-none outline-none focus:ring-0 text-slate-700 text-sm p-0 resize-none max-h-24 overflow-y-auto leading-5 placeholder:text-slate-400",rows:1,style:{minHeight:"22px"}})}),e.jsx("button",{onClick:re,disabled:!n.trim()||n.trim()==="（）",className:`p-2 rounded-full transition-all duration-300 flex-shrink-0 flex items-center justify-center ${n.trim()&&n.trim()!=="（）"?"bg-[#A855F7] text-white shadow-md active:scale-95":"bg-transparent text-[#A855F7]"}`,children:e.jsx(Oe,{size:20,className:n.trim()&&n.trim()!=="（）"?"ml-0.5":""})})]})}),e.jsx(W,{initial:!1,children:$&&e.jsxs(e.Fragment,{children:[e.jsx(I.div,{className:"absolute inset-0 bg-black/20 z-[60] will-change-opacity",onClick:()=>E(!1),initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:X}),e.jsxs(I.div,{className:"absolute top-0 right-0 h-full w-3/4 bg-white z-[70] shadow-2xl will-change-transform transform-gpu",initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:$e,children:[e.jsxs("div",{className:"p-5 border-b border-slate-100 flex justify-between items-center",children:[e.jsx("h3",{className:"font-bold text-lg text-slate-800",children:"聊天设置"}),e.jsx("button",{onClick:()=>E(!1),className:"text-slate-400 hover:text-slate-600",children:e.jsx(Le,{size:24})})]}),e.jsxs("div",{className:"p-2",children:[e.jsxs("button",{onClick:()=>{E(!1),z(!0)},className:"w-full flex items-center justify-between p-4 hover:bg-slate-50 rounded-xl transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3 text-slate-700",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-purple-50 flex items-center justify-center text-purple-600",children:e.jsx(Ue,{size:18})}),e.jsx("span",{className:"font-bold text-sm",children:"我的角色设置"})]}),e.jsx(de,{size:16,className:"text-slate-300"})]}),e.jsx("div",{className:"h-[1px] bg-slate-50 mx-4"}),e.jsxs("button",{onClick:()=>{E(!1),G(!0)},className:"w-full flex items-center justify-between p-4 hover:bg-slate-50 rounded-xl transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3 text-slate-700",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-purple-50 flex items-center justify-center text-purple-600",children:e.jsx(De,{size:18})}),e.jsx("span",{className:"font-bold text-sm",children:"模型"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-slate-500",children:be||"默认"}),e.jsx(de,{size:16,className:"text-slate-300"})]})]}),e.jsx("div",{className:"h-[1px] bg-slate-50 mx-4"}),e.jsxs("div",{className:"w-full flex items-center justify-between p-4 hover:bg-slate-50 rounded-xl transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3 text-slate-700",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-purple-50 flex items-center justify-center text-purple-600",children:e.jsx(He,{size:18})}),e.jsx("span",{className:"font-bold text-sm",children:"聊天模式"})]}),e.jsxs("div",{className:"flex bg-slate-100 p-1 rounded-lg",children:[e.jsx("button",{onClick:()=>ne("daily"),className:`px-3 py-1 text-xs font-bold rounded-md transition-all ${i==="daily"?"bg-white text-slate-800 shadow-sm":"text-slate-400"}`,children:"日常"}),e.jsx("button",{onClick:()=>ne("scene"),className:`px-3 py-1 text-xs font-bold rounded-md transition-all ${i==="scene"?"bg-white text-purple-600 shadow-sm":"text-slate-400"}`,children:"场景"})]})]})]})]})]})}),pe&&e.jsx(ze,{currentPersona:void 0,onBack:()=>A(!1),onSave:t=>{A(!1),z(!0)},withinContainer:!0}),e.jsx(Xe,{isOpen:he,currentPersona:p,onClose:()=>z(!1),onAdd:()=>{z(!1),A(!0)},onSelect:t=>{te(t);try{localStorage.setItem(U,JSON.stringify({chatMode:i,persona:t}))}catch{}}}),e.jsx(We,{isOpen:ge,currentModelId:P,onClose:()=>G(!1),onSelect:(t,s)=>{V(t),Z(!0),Y(s);try{localStorage.setItem(D,t),s&&localStorage.setItem(ie,s)}catch{}},temperature:Q,onTempChange:t=>{M(t),ee(!0);try{localStorage.setItem(R,String(t))}catch{}}})]})})};export{mt as ChatDetail};
//# sourceMappingURL=ChatDetail-BZDXr-dx.js.map
