import{r as n,j as e}from"./index-DiMvcmcb.js";import{S as $,a as N}from"./AdminDashboard-D62DCIkd.js";import{F as w}from"./file-text-CyCg3Fb5.js";import{c as r}from"./createLucideIcon-CiU7U1is.js";import{U as M}from"./user-DjmimaIa.js";import{C as q}from"./cpu-DXFdudmA.js";import{C as L}from"./chevron-down-C8dX3bVB.js";import{C as P}from"./chevron-right-jr0esStd.js";import{L as U}from"./log-out-9e2S_i2i.js";/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],H=r("bot",V);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],F=r("database",D);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],B=r("settings",R);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Y=r("shield",O);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=[["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m14.305 16.53.923-.382",key:"1itpsq"}],["path",{d:"m15.228 13.852-.923-.383",key:"eplpkm"}],["path",{d:"m16.852 12.228-.383-.923",key:"13v3q0"}],["path",{d:"m16.852 17.772-.383.924",key:"1i8mnm"}],["path",{d:"m19.148 12.228.383-.923",key:"1q8j1v"}],["path",{d:"m19.53 18.696-.382-.924",key:"vk1qj3"}],["path",{d:"m20.772 13.852.924-.383",key:"n880s0"}],["path",{d:"m20.772 16.148.924.383",key:"1g6xey"}],["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],J=r("user-cog",G);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Q=r("users",K),ie=({activeTab:a,setActiveTab:c,onLogout:h,username:l,onEditProfile:d})=>{const[g,o]=n.useState(["characters","settings"]),f=[{id:"stories",label:"故事管理",icon:w},{id:"templates",label:"提示词模版",icon:w},{id:"characters",label:"角色管理",icon:Q,subItems:[{id:"official_characters",label:"官方角色",icon:H},{id:"user_characters",label:"用户角色",icon:M}]},{id:"users",label:"用户管理",icon:J},{id:"settings",label:"系统设置",icon:B,subItems:[{id:"model_settings",label:"模型设置",icon:q},...l==="admin"?[{id:"model_manage",label:"模型管理",icon:F},{id:"admin_accounts",label:"管理员账号",icon:Y}]:[]]}];n.useEffect(()=>{const s=f.find(t=>{var i;return(i=t.subItems)==null?void 0:i.some(m=>m.id===a)});s&&o(t=>t.includes(s.id)?t:[...t,s.id])},[a]);const C=s=>{o(t=>t.includes(s)?t.filter(i=>i!==s):[...t,s])},_=s=>{o(t=>t.includes(s)?t:[...t,s])},I=s=>{var m;const t=f.find(u=>u.id===s);((m=t==null?void 0:t.subItems)==null?void 0:m.some(u=>u.id===a))||o(u=>u.filter(E=>E!==s))},z=s=>{s.subItems?C(s.id):(c(s.id),o([]))},[S,b]=n.useState(!1),[x,y]=n.useState(""),[p,k]=n.useState(""),[v,j]=n.useState(""),A=async()=>{const s={};if(x&&x.trim()&&(s.nickname=x.trim()),p){if(p!==v)return;s.password=p}try{await N.updateMe(s),b(!1),y(""),k(""),j("")}catch{}};return e.jsxs("div",{className:"w-16 xl:w-56 glass-nav h-screen fixed left-0 top-0 flex flex-col z-20 transition-all duration-300",style:{backgroundColor:"#f4f6fb"},children:[e.jsxs("div",{className:"p-4 xl:p-8 flex items-center justify-center xl:justify-start gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-pink-500 rounded-lg flex items-center justify-center text-white flex-shrink-0",children:e.jsx($,{size:18})}),e.jsx("span",{className:"text-xl font-cute text-pink-900 tracking-wide hidden xl:block",children:"YumeCrush Admin"})]}),e.jsx("nav",{className:"flex-1 px-4 space-y-2",children:f.map(s=>e.jsxs("div",{onMouseEnter:()=>s.subItems&&_(s.id),onMouseLeave:()=>s.subItems&&I(s.id),children:[e.jsxs("button",{onClick:()=>z(s),className:`w-full flex items-center justify-center xl:justify-start gap-3 px-2 xl:px-4 py-3.5 rounded-2xl transition-all duration-300 font-bold text-sm ${a===s.id||s.subItems&&s.subItems.some(t=>t.id===a)?"bg-pink-100 text-pink-700 shadow-sm":"text-gray-500 hover:bg-white/50 hover:text-pink-600"}`,children:[e.jsx(s.icon,{size:18,className:"flex-shrink-0"}),e.jsx("span",{className:"hidden xl:block flex-1 text-left",children:s.label}),s.subItems&&e.jsx("span",{className:"hidden xl:block transition-transform duration-300",children:g.includes(s.id)?e.jsx(L,{size:14}):e.jsx(P,{size:14})})]}),s.subItems&&e.jsx("div",{className:`grid transition-all duration-300 ease-in-out ${g.includes(s.id)?"grid-rows-[1fr] opacity-100":"grid-rows-[0fr] opacity-0"}`,children:e.jsx("div",{className:"overflow-hidden",children:e.jsx("div",{className:"mt-1 space-y-1 xl:pl-4",children:s.subItems.map(t=>e.jsxs("button",{onClick:i=>{i.stopPropagation(),c(t.id)},className:`w-full flex items-center justify-center xl:justify-start gap-2 px-2 xl:px-4 py-2.5 rounded-xl transition-all duration-300 text-xs font-bold ${a===t.id?"bg-pink-200/50 text-pink-800":"text-gray-400 hover:text-pink-600 hover:bg-white/30"}`,children:[t.icon?e.jsx(t.icon,{size:16,className:"flex-shrink-0 hidden xl:block"}):e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-current flex-shrink-0 hidden xl:block"}),e.jsx("span",{className:"hidden xl:block",children:t.label}),e.jsx("span",{className:"xl:hidden",children:t.icon?e.jsx(t.icon,{size:14}):t.label.substring(0,1)})]},t.id))})})})]},s.id))}),e.jsx("div",{className:"p-4 border-t border-pink-100",children:e.jsxs("div",{className:"w-full flex xl:flex-row flex-col items-center xl:justify-start justify-center gap-3",children:[e.jsxs("div",{className:"group relative",onClick:()=>d&&d(),children:[e.jsx(W,{username:l}),e.jsx("div",{className:"absolute left-1/2 -translate-x-1/2 -translate-y-full -top-2 bg-pink-700 text-white text-xs px-2 py-1 rounded shadow opacity-0 group-hover:opacity-100 pointer-events-none whitespace-nowrap z-50",children:l})]}),e.jsxs("button",{onClick:h,className:"w-full xl:flex-1 flex items-center justify-center xl:justify-start gap-3 px-2 xl:px-4 py-3 text-red-400 hover:bg-red-50 rounded-2xl transition-colors font-bold text-sm",children:[e.jsx(U,{size:18,className:"flex-shrink-0"}),e.jsx("span",{className:"hidden xl:block",children:"退出登录"})]})]})}),S&&e.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/40",children:[e.jsxs("div",{className:"bg-white rounded-2xl p-6 w-96 shadow-2xl",children:[e.jsx("div",{className:"font-bold mb-4 text-pink-900",children:"修改资料"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{children:e.jsx("input",{type:"text",placeholder:`昵称（当前：${l}）`,value:x,onChange:s=>y(s.target.value),className:"dream-input w-full px-4 py-3 rounded-2xl text-sm font-bold text-gray-700"})}),e.jsx("div",{children:e.jsx("input",{type:"password",placeholder:"新密码",value:p,onChange:s=>k(s.target.value),className:"dream-input w-full px-4 py-3 rounded-2xl text-sm font-bold text-gray-700"})}),e.jsx("div",{children:e.jsx("input",{type:"password",placeholder:"再次输入新密码",value:v,onChange:s=>j(s.target.value),className:"dream-input w-full px-4 py-3 rounded-2xl text-sm font-bold text-gray-700"})})]}),e.jsxs("div",{className:"flex gap-2 justify-end mt-5",children:[e.jsx("button",{className:"px-4 py-2 rounded-xl bg-gray-100 text-gray-600",onClick:()=>{b(!1),y(""),k(""),j("")},children:"取消"}),e.jsx("button",{className:"px-4 py-2 rounded-xl bg-pink-500 text-white",onClick:A,disabled:!x.trim()&&!p,children:"保存"})]})]}),e.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-[1px] bg-slate-300"})]})]})},W=({username:a})=>{const[c,h]=n.useState("");return n.useEffect(()=>{let l=!0;return N.getMyAvatar().then(d=>{l&&h((d==null?void 0:d.avatar)||"/uploads/avatars/default_admin.jpg")}).catch(()=>{l&&h("/uploads/avatars/default_admin.jpg")}),()=>{l=!1}},[a]),e.jsx("div",{className:"group relative w-8 h-8 rounded-full overflow-hidden border border-pink-200 bg-white flex items-center justify-center",children:c?e.jsx("img",{src:c,alt:a,className:"w-full h-full object-cover"}):e.jsx(M,{size:16,className:"text-pink-500"})})};export{ie as default};
//# sourceMappingURL=Sidebar-waL8Dthh.js.map
