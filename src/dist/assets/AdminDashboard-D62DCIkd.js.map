{"version":3,"mappings":"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","names":["__iconNode","Sparkles","createLucideIcon","BASE_URL","getToken","getRefresh","saveTokens","access","refresh","logout","url","authHeaders","refreshingPromise","refreshOnce","rt","r","data","request","path","options","opts","isFormData","baseHeaders","jsonHeader","res","baseHeaders2","jsonHeader2","body","templatesAPI","payload","id","charactersAPI","params","qs","status","modelsAPI","settingsAPI","storiesAPI","syspromptAPI","uploadAPI","file","fd","usersAPI","q","username","nickname","email","password","chatLimit","adminsAPI","ToastContext","createContext","useToast","useContext","ToastProvider","children","toasts","setToasts","useState","showToast","useCallback","message","type","prev","t","jsx","StyleInjector","React","__vitePreload","LoginPage","Sidebar","TemplatesView","CharacterManagement","UsersView","ModelSettingsView","ModelManageView","AdminAccountsView","StoryManagement","AdminDashboard","isLoggedIn","setIsLoggedIn","activeTab","setActiveTab","setUsername","showEdit","setShowEdit","newNickname","setNewNickname","pwd1","setPwd1","pwd2","setPwd2","submitEdit","navigate","useEffect","token","user","jsxs","tab","e","Fragment"],"ignoreList":[0],"sources":["../../node_modules/lucide-react/dist/esm/icons/sparkles.js","../../admin/api.js","../../admin/Toast.jsx","../../admin/AdminDashboard.jsx"],"sourcesContent":["/**\n * @license lucide-react v0.555.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z\",\n      key: \"1s2grr\"\n    }\n  ],\n  [\"path\", { d: \"M20 2v4\", key: \"1rf3ol\" }],\n  [\"path\", { d: \"M22 4h-4\", key: \"gwowj6\" }],\n  [\"circle\", { cx: \"4\", cy: \"20\", r: \"2\", key: \"6kqj1y\" }]\n];\nconst Sparkles = createLucideIcon(\"sparkles\", __iconNode);\n\nexport { __iconNode, Sparkles as default };\n//# sourceMappingURL=sparkles.js.map\n","export const BASE_URL = '/api/admin';\n\nconst getToken = () => localStorage.getItem('admin_access_token') || '';\nconst getRefresh = () => localStorage.getItem('admin_refresh_token') || '';\nconst saveTokens = (access, refresh) => {\n  if (access) localStorage.setItem('admin_access_token', access);\n  if (refresh) localStorage.setItem('admin_refresh_token', refresh);\n};\nconst logout = () => {\n  localStorage.removeItem('admin_access_token');\n  localStorage.removeItem('admin_refresh_token');\n  const url = '/super-admin/login';\n  if (typeof window !== 'undefined' && window.location) {\n    if (typeof window.location.replace === 'function') {\n      window.location.replace(url);\n    } else {\n      window.location.href = url;\n    }\n  }\n};\n\nconst authHeaders = () => ({\n  'Authorization': `Bearer ${getToken()}`,\n});\n\nlet refreshingPromise = null;\nconst refreshOnce = async () => {\n  const rt = getRefresh();\n  if (!rt) { logout(); throw new Error('unauthorized'); }\n  const r = await fetch(`${BASE_URL}/refresh`, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ refresh_token: rt }) });\n  if (!r.ok) { logout(); throw new Error('refresh_failed'); }\n  const data = await r.json();\n  saveTokens(data.access_token, data.refresh_token);\n  return data;\n};\n\nconst request = async (path, options = {}) => {\n  const opts = { ...options };\n  const isFormData = typeof FormData !== 'undefined' && opts.body instanceof FormData;\n  const baseHeaders = authHeaders();\n  const jsonHeader = isFormData ? {} : { 'Content-Type': 'application/json' };\n  opts.headers = { ...(opts.headers || {}), ...jsonHeader, ...baseHeaders };\n  let res = await fetch(`${BASE_URL}${path}`, opts);\n  if (res.status === 401) {\n    if (!refreshingPromise) refreshingPromise = refreshOnce();\n    try {\n      await refreshingPromise;\n    } finally {\n      refreshingPromise = null;\n    }\n    const baseHeaders2 = authHeaders();\n    const jsonHeader2 = isFormData ? {} : { 'Content-Type': 'application/json' };\n    opts.headers = { ...(opts.headers || {}), ...jsonHeader2, ...baseHeaders2 };\n    res = await fetch(`${BASE_URL}${path}`, opts);\n    if (res.status === 401) { logout(); throw new Error('unauthorized'); }\n  }\n  if (!res.ok) throw new Error('failed');\n  if (!res.ok) {\n    let body = '';\n    try { body = await res.text(); } catch {}\n    console.error('[admin.api.request] failed', { path, status: res.status, body });\n    throw new Error('failed');\n  }\n  return res.json();\n};\n\nexport const templatesAPI = {\n  async list() { return request('/templates'); },\n  async create(payload) { return request('/templates', { method: 'POST', body: JSON.stringify(payload) }); },\n  async update(id, payload) { return request(`/templates/${id}`, { method: 'PUT', body: JSON.stringify(payload) }); },\n  async remove(id) { return request(`/templates/${id}`, { method: 'DELETE' }); },\n  async copy(id) { return request(`/templates/${id}/copy`, { method: 'POST' }); },\n  async setDefault(id) { return request(`/templates/${id}/default`, { method: 'POST' }); },\n};\n\nexport const charactersAPI = {\n  async list(params) {\n    const qs = params ? '?' + new URLSearchParams(params).toString() : '';\n    return request(`/characters${qs}`);\n  },\n  async get(id) { return request(`/characters/${id}`); },\n  async create(payload) { return request('/characters', { method: 'POST', body: JSON.stringify(payload) }); },\n  async update(id, payload) { return request(`/characters/${id}`, { method: 'PUT', body: JSON.stringify(payload) }); },\n  async remove(id) { return request(`/characters/${id}`, { method: 'DELETE' }); },\n  async setStatus(id, status) { return request(`/characters/${id}/status`, { method: 'POST', body: JSON.stringify({ status }) }); },\n};\n\nexport const modelsAPI = {\n  async list() { return request('/models'); },\n  async create(payload) { return request('/models', { method: 'POST', body: JSON.stringify(payload) }); },\n  async remove(id) { return request(`/models/${id}`, { method: 'DELETE' }); },\n};\n\nexport const settingsAPI = {\n  async get() { return request('/settings'); },\n  async save(payload) { return request('/settings', { method: 'PUT', body: JSON.stringify(payload) }); },\n};\n\nexport const storiesAPI = {\n  async list() { return request('/stories'); },\n  async get(id) { return request(`/stories/${id}`); },\n  async create(payload) { return request('/stories', { method: 'POST', body: JSON.stringify(payload) }); },\n  async update(id, payload) { return request(`/stories/${id}`, { method: 'PUT', body: JSON.stringify(payload) }); },\n  async remove(id) { return request(`/stories/${id}`, { method: 'DELETE' }); },\n  async setStatus(id, status) { return request(`/stories/${id}/status`, { method: 'POST', body: JSON.stringify({ status }) }); },\n};\n\nexport const syspromptAPI = {\n  async generate(payload) {\n    return request('/sysprompt/generate', { method: 'POST', body: JSON.stringify(payload) });\n  },\n  async generateNoScene(payload) {\n    return request('/sysprompt/generate-noscene', { method: 'POST', body: JSON.stringify(payload) });\n  },\n};\n\nexport const uploadAPI = {\n  async avatar(file) {\n    const fd = new FormData();\n    fd.append('avatar', file);\n    return request('/uploads/avatar', { method: 'POST', body: fd });\n  },\n  async cover(file) {\n    const fd = new FormData();\n    fd.append('cover', file);\n    return request('/uploads/cover', { method: 'POST', body: fd });\n  },\n};\n\nexport const usersAPI = {\n  async list(q) {\n    const qs = q ? `?q=${encodeURIComponent(q)}` : '';\n    return request(`/users${qs}`);\n  },\n  async create({ username, nickname, email, password, chatLimit }) {\n    return request('/users', { method: 'POST', body: JSON.stringify({ username, nickname, email, password, chatLimit }) });\n  },\n  async update(id, payload) {\n    return request(`/users/${id}`, { method: 'PUT', body: JSON.stringify(payload) });\n  },\n  async remove(id) {\n    return request(`/users/${id}`, { method: 'DELETE' });\n  },\n  async changePassword(id, password) {\n    return request(`/users/${id}/password`, { method: 'POST', body: JSON.stringify({ password }) });\n  },\n};\n\nexport const adminsAPI = {\n  async list(q) {\n    const qs = q ? `?q=${encodeURIComponent(q)}` : '';\n    return request(`/admins${qs}`);\n  },\n  async create({ username, email, password }) {\n    return request('/admins', { method: 'POST', body: JSON.stringify({ username, email, password }) });\n  },\n  async update(id, payload) {\n    return request(`/admins/${id}`, { method: 'PUT', body: JSON.stringify(payload) });\n  },\n  async remove(id) {\n    return request(`/admins/${id}`, { method: 'DELETE' });\n  },\n  async changePassword(id, password) {\n    return request(`/admins/${id}/password`, { method: 'POST', body: JSON.stringify({ password }) });\n  },\n  async getMyAvatar() {\n    return request('/admins/me/avatar');\n  },\n  async updateMe(payload) {\n    return request('/admins/me', { method: 'PUT', body: JSON.stringify(payload) });\n  },\n};\n","import React, { createContext, useContext, useState, useCallback } from 'react';\n\nconst ToastContext = createContext(null);\n\nexport const useToast = () => useContext(ToastContext);\n\nexport const ToastProvider = ({ children }) => {\n  const [toasts, setToasts] = useState([]);\n  const showToast = useCallback((message, type = 'success') => {\n    const id = Date.now() + Math.random();\n    setToasts((prev) => [...prev, { id, message, type }]);\n    setTimeout(() => {\n      setToasts((prev) => prev.filter((t) => t.id !== id));\n    }, 3000);\n  }, []);\n\n  return (\n    <ToastContext.Provider value={{ showToast }}>\n      {children}\n      <div className=\"fixed top-6 left-64 right-0 z-50 flex flex-col items-center gap-3 pointer-events-none\">\n        {toasts.map((t) => (\n          <div\n            key={t.id}\n            className={`pointer-events-auto flex items-center justify-center text-center px-4 py-2 rounded-2xl shadow-xl border max-w-[480px] min-w-[180px] mx-auto ${\n              t.type === 'success' ? 'bg-white border-green-200 text-green-700' : 'bg-white border-red-200 text-red-700'\n            }`}\n          >\n            {t.message}\n          </div>\n        ))}\n      </div>\n    </ToastContext.Provider>\n  );\n};\n","import React, { useState, useEffect } from 'react';\nimport { Sparkles } from 'lucide-react';\nimport { adminsAPI } from './api.js';\nimport { ToastProvider } from './Toast.jsx';\nconst StyleInjector = React.lazy(() => import('./components/StyleInjector.jsx'))\nconst LoginPage = React.lazy(() => import('./components/LoginPage.jsx'))\nconst Sidebar = React.lazy(() => import('./components/Sidebar.jsx'))\nconst TemplatesView = React.lazy(() => import('./templates/TemplatesView.jsx'))\nconst CharacterManagement = React.lazy(() => import('./characters/CharacterManagement.jsx'))\nconst UsersView = React.lazy(() => import('./users/UsersView.jsx'))\nconst ModelSettingsView = React.lazy(() => import('./settings/ModelSettingsView.jsx'))\nconst ModelManageView = React.lazy(() => import('./settings/ModelManageView.jsx'))\nconst AdminAccountsView = React.lazy(() => import('./settings/AdminAccountsView.jsx'))\nconst StoryManagement = React.lazy(() => import('./story/StoryManagement.jsx'))\n\nconst AdminDashboard = () => {\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n  const [activeTab, setActiveTab] = useState('templates');\n  const [username, setUsername] = useState('');\n  const [showEdit, setShowEdit] = useState(false);\n  const [newNickname, setNewNickname] = useState('');\n  const [pwd1, setPwd1] = useState('');\n  const [pwd2, setPwd2] = useState('');\n  const submitEdit = async () => {\n    const payload = {};\n    if (newNickname && newNickname.trim()) payload.nickname = newNickname.trim();\n    if (pwd1) {\n      if (pwd1 !== pwd2) return;\n      payload.password = pwd1;\n    }\n    try { await adminsAPI.updateMe(payload); setShowEdit(false); setNewNickname(''); setPwd1(''); setPwd2(''); } catch {}\n  };\n\n  const navigate = (path) => {\n    if (window.history && window.history.replaceState) {\n      window.history.replaceState(null, '', path);\n    }\n  };\n\n  useEffect(() => {\n    const token = localStorage.getItem('admin_access_token');\n    const user = localStorage.getItem('admin_username');\n    const path = window.location.pathname;\n    if (token) {\n      setIsLoggedIn(true);\n      if (user) setUsername(user);\n      setActiveTab('templates');\n      if (path !== '/super-admin/sysprompt') navigate('/super-admin/sysprompt');\n    } else {\n      setIsLoggedIn(false);\n      if (path !== '/super-admin/login') navigate('/super-admin/login');\n    }\n  }, []);\n\n  if (!isLoggedIn) {\n    return (\n      <>\n        <React.Suspense fallback={<div />}> \n          <StyleInjector />\n        </React.Suspense>\n        <ToastProvider>\n          <React.Suspense fallback={<div />}> \n          <LoginPage onLogin={() => {\n            setIsLoggedIn(true);\n            const user = localStorage.getItem('admin_username');\n            if (user) setUsername(user);\n            setActiveTab('templates');\n            navigate('/super-admin/sysprompt');\n          }} />\n          </React.Suspense>\n        </ToastProvider>\n      </>\n    );\n  }\n  return (\n    <div className=\"flex min-h-screen bg白\">\n      <React.Suspense fallback={<div />}> \n        <StyleInjector />\n      </React.Suspense>\n      <React.Suspense fallback={<div />}> \n      <Sidebar\n        activeTab={activeTab}\n        setActiveTab={(tab) => {\n          setActiveTab(tab);\n          if (tab === 'templates') navigate('/super-admin/sysprompt');\n        }}\n        onLogout={() => {\n          setIsLoggedIn(false);\n          localStorage.removeItem('admin_access_token');\n          localStorage.removeItem('admin_refresh_token');\n          localStorage.removeItem('admin_username');\n          navigate('/super-admin/login');\n        }}\n        username={username}\n        onEditProfile={() => setShowEdit(true)}\n      />\n      </React.Suspense>\n      <main className=\"flex-1 ml-16 xl:ml-56 p-8 relative z-10 transition-all duration-300 h-screen overflow-y-auto\">\n        <div className=\"absolute top-0 right-0 p-4 pointer-events-none opacity-20\">\n          <Sparkles size={120} className=\"text-pink-300\" />\n        </div>\n        <React.Suspense fallback={<div />}> \n          {activeTab === 'templates' && <TemplatesView />}\n          {activeTab === 'stories' && <StoryManagement />}\n          {(activeTab === 'characters' || activeTab === 'official_characters') && <CharacterManagement creatorRole=\"admin_role\" />}\n          {activeTab === 'user_characters' && <CharacterManagement creatorRole=\"user_role\" />}\n          {activeTab === 'users' && <UsersView />}\n          {activeTab === 'model_settings' && <ModelSettingsView />}\n          {activeTab === 'model_manage' && username === 'admin' && <ModelManageView />}\n          {activeTab === 'admin_accounts' && username === 'admin' && <AdminAccountsView />}\n        </React.Suspense>\n      </main>\n      <div className=\"ambient-bg\"></div>\n      {showEdit && (\n        <div className=\"fixed inset-0 z-[200] flex items-center justify-center bg-black/40\">\n          <div className=\"bg-white rounded-2xl p-6 w-96 shadow-2xl\">\n            <div className=\"font-bold mb-4 text-pink-900\">修改资料</div>\n            <div className=\"space-y-3\">\n              <div>\n                <input type=\"text\" placeholder={`昵称（当前：${username}）`} value={newNickname} onChange={e => setNewNickname(e.target.value)} className=\"dream-input w-full px-4 py-3 rounded-2xl text-sm font-bold text-gray-700\" />\n              </div>\n              <div>\n                <input type=\"password\" placeholder=\"新密码\" value={pwd1} onChange={e => setPwd1(e.target.value)} className=\"dream-input w-full px-4 py-3 rounded-2xl text-sm font-bold text-gray-700\" />\n              </div>\n              <div>\n                <input type=\"password\" placeholder=\"再次输入新密码\" value={pwd2} onChange={e => setPwd2(e.target.value)} className=\"dream-input w-full px-4 py-3 rounded-2xl text-sm font-bold text-gray-700\" />\n              </div>\n            </div>\n            <div className=\"flex gap-2 justify-end mt-5\">\n              <button className=\"px-4 py-2 rounded-xl bg-gray-100 text-gray-600\" onClick={() => { setShowEdit(false); setNewNickname(''); setPwd1(''); setPwd2(''); }}>取消</button>\n              <button className=\"px-4 py-2 rounded-xl bg-pink-500 text-white\" onClick={submitEdit} disabled={!newNickname.trim() && !pwd1}>保存</button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default AdminDashboard;\n"],"file":"assets/AdminDashboard-D62DCIkd.js"}