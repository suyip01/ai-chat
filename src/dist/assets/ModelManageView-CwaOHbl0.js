import{j as e,r as n}from"./index-DiMvcmcb.js";import{T as C,u as P,m as u}from"./AdminDashboard-D62DCIkd.js";import{P as T}from"./plus-Bz3dnY0B.js";import{T as $}from"./trash-2-CCl4-mF6.js";import{X as z}from"./x-CKT7hpuC.js";import"./createLucideIcon-CiU7U1is.js";const D=()=>{const{showToast:d}=P(),[i,j]=n.useState([]),[l,c]=n.useState(1),h=6,[f,o]=n.useState(!1),[a,x]=n.useState({model_id:"",model_name:"",model_nickname:""}),[p,m]=n.useState(null),g=async()=>{try{const t=await u.list();j(t.items||[])}catch{d("模型列表加载失败","error")}};n.useEffect(()=>{g()},[]);const y=t=>{if(!t)return"-";const s=new Date(t),v=s.getFullYear(),w=String(s.getMonth()+1).padStart(2,"0"),_=String(s.getDate()).padStart(2,"0"),M=String(s.getHours()).padStart(2,"0"),S=String(s.getMinutes()).padStart(2,"0");return`${v}/${w}/${_} ${M}:${S}`},r=Math.max(1,Math.ceil(i.length/h)),b=(l-1)*h,N=i.slice(b,b+h);n.useEffect(()=>{l>r&&c(r)},[i]);const k=async()=>{if(!a.model_id||!a.model_name){d("请填写完整信息","error");return}try{await u.create(a),d("模型添加成功"),o(!1),x({model_id:"",model_name:"",model_nickname:""}),g()}catch{d("添加失败","error")}};return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-cute text-pink-900 flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-6 bg-yellow-400 rounded-full inline-block"}),"模型管理"]}),e.jsx("p",{className:"text-gray-400 text-xs mt-1 ml-4",children:"维护可用的模型列表"})]}),e.jsxs("button",{onClick:()=>o(!0),className:"bg-pink-500 text-white px-4 py-2 rounded-xl font-bold shadow-lg shadow-pink-200 hover:bg-pink-600 transition-colors flex items-center gap-2 text-xs",children:[e.jsx(T,{size:14})," 添加模型"]})]}),e.jsxs("div",{className:"glass-card rounded-2xl overflow-hidden border border-pink-100",children:[e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{className:"bg-pink-100 text-pink-900 font-cute text-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 pl-6 w-16",children:"序号"}),e.jsx("th",{className:"p-3",children:"模型名称"}),e.jsx("th",{className:"p-3",children:"模型ID"}),e.jsx("th",{className:"p-3",children:"盲测模型昵称"}),e.jsx("th",{className:"p-3",children:"添加时间"}),e.jsx("th",{className:"p-3 text-right pr-6",children:"操作"})]})}),e.jsxs("tbody",{className:"text-sm divide-y divide-pink-100",children:[N.map((t,s)=>e.jsxs("tr",{className:"hover:bg-pink-50/30 transition-colors",children:[e.jsx("td",{className:"p-3 pl-6 text-gray-500 font-mono",children:b+s+1}),e.jsx("td",{className:"p-3 font-bold text-pink-700",children:t.model_name}),e.jsx("td",{className:"p-3 font-mono text-gray-600",children:t.model_id}),e.jsx("td",{className:"p-3 text-gray-600",children:t.model_nickname||"-"}),e.jsx("td",{className:"p-3 text-gray-500",children:y(t.created_at)}),e.jsx("td",{className:"p-3 text-right pr-6",children:e.jsx("button",{onClick:()=>m(t),className:"text-red-400 hover:text-red-600 p-1",children:e.jsx($,{size:16})})})]},t.id)),i.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"p-8 text-center text-gray-400 text-sm",children:"暂无模型数据"})})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3",children:[e.jsxs("div",{className:"text-xs text-gray-500",children:["第 ",l," / ",r," 页"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{disabled:l===1,onClick:()=>c(t=>Math.max(1,t-1)),className:`px-3 py-1 rounded-lg text-xs font-bold ${l===1?"bg-gray-100 text-gray-400":"bg-white border border-gray-200 text-gray-600 hover:border-pink-300 hover:text-pink-600 hover:bg-pink-50"}`,children:"上一页"}),Array.from({length:r}).map((t,s)=>e.jsx("button",{onClick:()=>c(s+1),className:`w-8 h-8 rounded-lg text-xs font-bold ${l===s+1?"bg-pink-500 text-white":"bg-white border border-gray-200 text-gray-600 hover:border-pink-300 hover:text-pink-600 hover:bg-pink-50"}`,children:s+1},s)),e.jsx("button",{disabled:l===r,onClick:()=>c(t=>Math.min(r,t+1)),className:`px-3 py-1 rounded-lg text-xs font-bold ${l===r?"bg-gray-100 text-gray-400":"bg-white border border-gray-200 text-gray-600 hover:border-pink-300 hover:text-pink-600 hover:bg-pink-50"}`,children:"下一页"})]})]})]}),p&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black/30 z-50",onClick:()=>m(null)}),e.jsx("div",{className:"fixed top-0 right-0 bottom-0 left-0 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg白 rounded-3xl border border-pink-100 p-6 w-full max-w-md shadow-2xl",children:[e.jsx("h3",{className:"font-cute text-lg text-pink-900 mb-2",children:"删除模型"}),e.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:["确定删除“",p.model_name,"”吗？此操作不可撤回。"]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>m(null),className:"px-5 py-2 rounded-xl bg-white border border-gray-200 text-gray-600 font-bold text-sm hover:bg-gray-50",children:"取消"}),e.jsx("button",{onClick:async()=>{try{await u.remove(p.id),d("删除成功"),m(null),g()}catch{d("删除失败","error")}},className:"px-5 py-2 rounded-xl bg-red-500 text-white font-bold text-sm shadow-sm hover:bg-red-600",children:"确认删除"})]})]})})]}),f&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed top-0 right-0 bottom-0 left-64 bg-black/30 z-50 backdrop-blur-sm",onClick:()=>o(!1)}),e.jsx("div",{className:"fixed top-0 right-0 bottom-0 left-64 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg白 rounded-3xl border border-pink-100 shadow-2xl p-6 animate-fade-in w-full max-w-md",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"font-cute text-xl text-pink-900",children:"添加新模型"}),e.jsx("button",{onClick:()=>o(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(z,{size:20})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-bold text-pink-800 mb-1.5",children:["模型ID ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("input",{type:"text",value:a.model_id,onChange:t=>x({...a,model_id:t.target.value}),placeholder:"例如: gpt-4-turbo",className:"dream-input w-full px-4 py-2.5 rounded-xl text-sm"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-bold text-pink-800 mb-1.5",children:["模型名称 ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("input",{type:"text",value:a.model_name,onChange:t=>x({...a,model_name:t.target.value}),placeholder:"例如: GPT-4 Turbo",className:"dream-input w-full px-4 py-2.5 rounded-xl text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-pink-800 mb-1.5",children:"盲测模型昵称"}),e.jsx("input",{type:"text",value:a.model_nickname,onChange:t=>x({...a,model_nickname:t.target.value}),placeholder:"例如: 智慧之星",className:"dream-input w-full px-4 py-2.5 rounded-xl text-sm"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-8",children:[e.jsx("button",{onClick:()=>o(!1),className:"px-5 py-2.5 rounded-xl bg-gray-50 text-gray-600 font-bold text-sm hover:bg-gray-100 transition-colors",children:"取消"}),e.jsx("button",{onClick:k,className:"px-6 py-2.5 rounded-xl bg-pink-500 text白 font-bold text-sm shadow-lg shadow-pink-200 hover:bg-pink-600 transition-all",children:"保存模型"})]})]})})]})]})},G=()=>e.jsx(C,{children:e.jsx(D,{})});export{G as default};
//# sourceMappingURL=ModelManageView-CwaOHbl0.js.map
