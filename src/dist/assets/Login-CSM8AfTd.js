import{r as s,j as e}from"./index-DiMvcmcb.js";import{u as F}from"./api-BQ_HNd4s.js";import{c as f}from"./createLucideIcon-CiU7U1is.js";/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],N=f("eye-off",j);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],k=f("eye",_),C=({onLogin:x})=>{const[r,h]=s.useState(""),[l,p]=s.useState(""),[n,w]=s.useState(!1),[a,c]=s.useState(!1),[u,i]=s.useState(null),[m,v]=s.useState({height:"100%",top:0}),b=s.useRef(null),d=s.useRef(null),g=s.useRef(null);s.useEffect(()=>{const t=()=>{window.visualViewport&&v({height:`${window.visualViewport.height}px`,top:`${window.visualViewport.offsetTop}px`})};return window.visualViewport&&(window.visualViewport.addEventListener("resize",t),window.visualViewport.addEventListener("scroll",t),t()),()=>{window.visualViewport&&(window.visualViewport.removeEventListener("resize",t),window.visualViewport.removeEventListener("scroll",t))}},[]),s.useEffect(()=>{var t;try{(t=d.current)==null||t.focus()}catch{}},[]);const y=async t=>{if(t.preventDefault(),i(null),!r.trim()||!l.trim()){i("请输入账号和密码");return}c(!0);try{const o=await F.login(r.trim(),l.trim());if(o!=null&&o.access_token)try{localStorage.setItem("user_access_token",o.access_token)}catch{}if(o!=null&&o.refresh_token)try{localStorage.setItem("user_refresh_token",o.refresh_token)}catch{}x()}catch{i("登录失败，请检查账号或密码")}finally{c(!1)}};return e.jsx("div",{ref:b,className:"fixed left-0 w-full bg-primary-50 overflow-y-auto no-scrollbar scroll-smooth font-sans animate-in fade-in duration-700",style:{...m,overscrollBehavior:"none"},children:e.jsx("div",{className:"h-full w-full max-w-md mx-auto bg-white rounded-none md:rounded-3xl shadow-2xl border border-slate-200 overflow-hidden",children:e.jsx("div",{className:"min-h-full w-full flex flex-col px-8 py-10",children:e.jsxs("div",{className:"w-full flex flex-col items-center z-10 max-w-sm m-auto",children:[e.jsx("div",{className:"text-center mb-12",children:e.jsx("h1",{className:"text-[40px] font-extrabold text-[#A855F7] mb-0 tracking-tight font-sans",children:"YumeCrush"})}),e.jsxs("form",{onSubmit:y,className:"w-full space-y-5",children:[e.jsx("input",{type:"text",placeholder:"用户名",value:r,onChange:t=>h(t.target.value),ref:d,className:"w-full h-[60px] px-6 rounded-2xl bg-white border border-[#F3F4F6] text-[#374151] placeholder:text-[#D1D5DB] outline-none focus:border-[#C084FC] focus:bg白 focus:ring-4 focus:ring-[#F3E8FF] transition-all text-[15px] font-medium shadow-sm"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:n?"text":"password",placeholder:"密码",value:l,onChange:t=>p(t.target.value),ref:g,className:"w-full h-[60px] px-6 rounded-2xl bg白 border border-[#F3F4F6] text-[#374151] placeholder:text-[#D1D5DB] outline-none focus:border-[#C084FC] focus:bg白 focus:ring-4 focus:ring-[#F3E8FF] transition-all text-[15px] font-medium shadow-sm"}),e.jsx("button",{type:"button",onClick:()=>w(!n),className:"absolute right-5 top-1/2 -translate-y-1/2 text-[#9CA3AF] hover:text-[#C084FC] transition-colors",children:n?e.jsx(N,{size:20}):e.jsx(k,{size:20})})]}),u&&e.jsx("div",{className:"text-red-500 text-xs font-bold",children:u}),e.jsx("button",{type:"submit",disabled:a,className:`w-full h-[60px] ${a?"bg-[#A855F7]/70":"bg-[#A855F7] hover:bg-[#9333EA]"} text-white font-bold text-[16px] rounded-2xl shadow-[0_10px_30px_rgba(168,85,247,0.3)] active:scale-[0.98] transition-all mt-4`,children:a?"登录中...":"登录"})]})]})})})})};export{C as Login};
//# sourceMappingURL=Login-CSM8AfTd.js.map
